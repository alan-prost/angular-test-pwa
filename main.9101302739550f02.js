"use strict";(self.webpackChunkangular_test_pwa=self.webpackChunkangular_test_pwa||[]).push([[179],{513:(Ae,te,A)=>{function _(e){return"function"==typeof e}function m(e){const n=e(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const R=m(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,o)=>`${o+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function O(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class F{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const i of n)i.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(_(r))try{r()}catch(i){t=i instanceof R?i.errors:[i]}const{_finalizers:o}=this;if(o){this._finalizers=null;for(const i of o)try{y(i)}catch(a){t=t??[],a instanceof R?t=[...t,...a.errors]:t.push(a)}}if(t)throw new R(t)}}add(t){var n;if(t&&t!==this)if(this.closed)y(t);else{if(t instanceof F){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&O(n,t)}remove(t){const{_finalizers:n}=this;n&&O(n,t),t instanceof F&&t._removeParent(this)}}F.EMPTY=(()=>{const e=new F;return e.closed=!0,e})();const H=F.EMPTY;function P(e){return e instanceof F||e&&"closed"in e&&_(e.remove)&&_(e.add)&&_(e.unsubscribe)}function y(e){_(e)?e():e.unsubscribe()}const T={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},N={setTimeout(e,t,...n){const{delegate:r}=N;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=N;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function B(e){N.setTimeout(()=>{const{onUnhandledError:t}=T;if(!t)throw e;t(e)})}function X(){}const w=Q("C",void 0,void 0);function Q(e,t,n){return{kind:e,value:t,error:n}}let S=null;function ne(e){if(T.useDeprecatedSynchronousErrorHandling){const t=!S;if(t&&(S={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:r}=S;if(S=null,n)throw r}}else e()}class He extends F{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,P(t)&&t.add(this)):this.destination=oe}static create(t,n,r){return new ae(t,n,r)}next(t){this.isStopped?J(function z(e){return Q("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?J(function b(e){return Q("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?J(w,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const De=Function.prototype.bind;function ie(e,t){return De.call(e,t)}class Ie{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){K(r)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){K(r)}else K(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){K(n)}}}class ae extends He{constructor(t,n,r){let o;if(super(),_(t)||!t)o={next:t??void 0,error:n??void 0,complete:r??void 0};else{let i;this&&T.useDeprecatedNextContext?(i=Object.create(t),i.unsubscribe=()=>this.unsubscribe(),o={next:t.next&&ie(t.next,i),error:t.error&&ie(t.error,i),complete:t.complete&&ie(t.complete,i)}):o=t}this.destination=new Ie(o)}}function K(e){T.useDeprecatedSynchronousErrorHandling?function Z(e){T.useDeprecatedSynchronousErrorHandling&&S&&(S.errorThrown=!0,S.error=e)}(e):B(e)}function J(e,t){const{onStoppedNotification:n}=T;n&&N.setTimeout(()=>n(e,t))}const oe={closed:!0,next:X,error:function $(e){throw e},complete:X},Ce="function"==typeof Symbol&&Symbol.observable||"@@observable";function pe(e){return e}function Me(e){return 0===e.length?pe:1===e.length?e[0]:function(n){return e.reduce((r,o)=>o(r),n)}}let ve=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,o){const i=function _t(e){return e&&e instanceof He||function at(e){return e&&_(e.next)&&_(e.error)&&_(e.complete)}(e)&&P(e)}(n)?n:new ae(n,r,o);return ne(()=>{const{operator:a,source:l}=this;i.add(a?a.call(i,l):l?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=qe(r))((o,i)=>{const a=new ae({next:l=>{try{n(l)}catch(u){i(u),a.unsubscribe()}},error:i,complete:o});this.subscribe(a)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[Ce](){return this}pipe(...n){return Me(n)(this)}toPromise(n){return new(n=qe(n))((r,o)=>{let i;this.subscribe(a=>i=a,a=>o(a),()=>r(i))})}}return e.create=t=>new e(t),e})();function qe(e){var t;return null!==(t=e??T.Promise)&&void 0!==t?t:Promise}const rn=m(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Qe=(()=>{class e extends ve{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new Gt(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new rn}next(n){ne(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){ne(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ne(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:o,observers:i}=this;return r||o?H:(this.currentObservers=null,i.push(n),new F(()=>{this.currentObservers=null,O(i,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:o,isStopped:i}=this;r?n.error(o):i&&n.complete()}asObservable(){const n=new ve;return n.source=this,n}}return e.create=(t,n)=>new Gt(t,n),e})();class Gt extends Qe{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)}error(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:H}}function mt(e){return _(e?.lift)}function Le(e){return t=>{if(mt(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ve(e,t,n,r,o){return new ue(e,t,n,r,o)}class ue extends He{constructor(t,n,r,o,i,a){super(t),this.onFinalize=i,this.shouldUnsubscribe=a,this._next=n?function(l){try{n(l)}catch(u){t.error(u)}}:super._next,this._error=o?function(l){try{o(l)}catch(u){t.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function M(e,t){return Le((n,r)=>{let o=0;n.subscribe(Ve(r,i=>{r.next(e.call(t,i,o++))}))})}function bt(e){return this instanceof bt?(this.v=e,this):new bt(e)}function ha(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function bi(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=e[i]&&function(a){return new Promise(function(l,u){!function o(i,a,l,u){Promise.resolve(u).then(function(h){i({value:h,done:l})},a)}(l,u,(a=e[i](a)).done,a.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const $r=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function ma(e){return _(e?.then)}function ya(e){return _(e[Ce])}function vo(e){return Symbol.asyncIterator&&_(e?.[Symbol.asyncIterator])}function tr(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Co=function va(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Ca(e){return _(e?.[Co])}function Mi(e){return function vr(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=n.apply(e,t||[]),i=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(E){r[E]&&(o[E]=function(D){return new Promise(function(x,U){i.push([E,D,x,U])>1||l(E,D)})})}function l(E,D){try{!function u(E){E.value instanceof bt?Promise.resolve(E.value.v).then(h,p):v(i[0][2],E)}(r[E](D))}catch(x){v(i[0][3],x)}}function h(E){l("next",E)}function p(E){l("throw",E)}function v(E,D){E(D),i.shift(),i.length&&l(i[0][0],i[0][1])}}(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:r,done:o}=yield bt(n.read());if(o)return yield bt(void 0);yield yield bt(r)}}finally{n.releaseLock()}})}function _a(e){return _(e?.getReader)}function Et(e){if(e instanceof ve)return e;if(null!=e){if(ya(e))return function Wl(e){return new ve(t=>{const n=e[Ce]();if(_(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if($r(e))return function Zl(e){return new ve(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(ma(e))return function Yl(e){return new ve(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,B)})}(e);if(vo(e))return Ea(e);if(Ca(e))return function Ql(e){return new ve(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(_a(e))return function Jl(e){return Ea(Mi(e))}(e)}throw tr(e)}function Ea(e){return new ve(t=>{(function In(e,t){var n,r,o,i;return function Te(e,t,n,r){return new(n||(n=Promise))(function(i,a){function l(p){try{h(r.next(p))}catch(v){a(v)}}function u(p){try{h(r.throw(p))}catch(v){a(v)}}function h(p){p.done?i(p.value):function o(i){return i instanceof n?i:new n(function(a){a(i)})}(p.value).then(l,u)}h((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=ha(e);!(r=yield n.next()).done;)if(t.next(r.value),t.closed)return}catch(a){o={error:a}}finally{try{r&&!r.done&&(i=n.return)&&(yield i.call(n))}finally{if(o)throw o.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function Rt(e,t,n,r=0,o=!1){const i=t.schedule(function(){n(),o?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(i),!o)return i}function lt(e,t,n=1/0){return _(t)?lt((r,o)=>M((i,a)=>t(r,i,o,a))(Et(e(r,o))),n):("number"==typeof t&&(n=t),Le((r,o)=>function ki(e,t,n,r,o,i,a,l){const u=[];let h=0,p=0,v=!1;const E=()=>{v&&!u.length&&!h&&t.complete()},D=U=>h<r?x(U):u.push(U),x=U=>{i&&t.next(U),h++;let q=!1;Et(n(U,p++)).subscribe(Ve(t,ee=>{o?.(ee),i?D(ee):t.next(ee)},()=>{q=!0},void 0,()=>{if(q)try{for(h--;u.length&&h<r;){const ee=u.shift();a?Rt(t,a,()=>x(ee)):x(ee)}E()}catch(ee){t.error(ee)}}))};return e.subscribe(Ve(t,D,()=>{v=!0,E()})),()=>{l?.()}}(r,o,e,n)))}function _o(e=1/0){return lt(pe,e)}const on=new ve(e=>e.complete());function sn(e){return e&&_(e.schedule)}function Er(e){return e[e.length-1]}function Ir(e){return sn(Er(e))?e.pop():void 0}function Oi(e,t=0){return Le((n,r)=>{n.subscribe(Ve(r,o=>Rt(r,e,()=>r.next(o),t),()=>Rt(r,e,()=>r.complete(),t),o=>Rt(r,e,()=>r.error(o),t)))})}function Ta(e,t=0){return Le((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function wa(e,t){if(!e)throw new Error("Iterable cannot be null");return new ve(n=>{Rt(n,t,()=>{const r=e[Symbol.asyncIterator]();Rt(n,t,()=>{r.next().then(o=>{o.done?n.complete():n.next(o.value)})},0,!0)})})}function Ye(e,t){return t?function ru(e,t){if(null!=e){if(ya(e))return function Ni(e,t){return Et(e).pipe(Ta(t),Oi(t))}(e,t);if($r(e))return function Pi(e,t){return new ve(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(ma(e))return function tu(e,t){return Et(e).pipe(Ta(t),Oi(t))}(e,t);if(vo(e))return wa(e,t);if(Ca(e))return function nu(e,t){return new ve(n=>{let r;return Rt(n,t,()=>{r=e[Co](),Rt(n,t,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(a){return void n.error(a)}i?n.complete():n.next(o)},0,!0)}),()=>_(r?.return)&&r.return()})}(e,t);if(_a(e))return function Sa(e,t){return wa(Mi(e),t)}(e,t)}throw tr(e)}(e,t):Et(e)}function xi(...e){const t=Ir(e),n=function eu(e,t){return"number"==typeof Er(e)?e.pop():t}(e,1/0),r=e;return r.length?1===r.length?Et(r[0]):_o(n)(Ye(r,t)):on}class Nt extends Qe{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}function ge(...e){return Ye(e,Ir(e))}function Aa(e={}){const{connector:t=(()=>new Qe),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:o=!0}=e;return i=>{let a,l,u,h=0,p=!1,v=!1;const E=()=>{l?.unsubscribe(),l=void 0},D=()=>{E(),a=u=void 0,p=v=!1},x=()=>{const U=a;D(),U?.unsubscribe()};return Le((U,q)=>{h++,!v&&!p&&E();const ee=u=u??t();q.add(()=>{h--,0===h&&!v&&!p&&(l=Vr(x,o))}),ee.subscribe(q),!a&&h>0&&(a=new ae({next:j=>ee.next(j),error:j=>{v=!0,E(),l=Vr(D,n,j),ee.error(j)},complete:()=>{p=!0,E(),l=Vr(D,r),ee.complete()}}),Et(U).subscribe(a))})(i)}}function Vr(e,t,...n){if(!0===t)return void e();if(!1===t)return;const r=new ae({next:()=>{r.unsubscribe(),e()}});return Et(t(...n)).subscribe(r)}function V(e,t){return Le((n,r)=>{let o=null,i=0,a=!1;const l=()=>a&&!o&&r.complete();n.subscribe(Ve(r,u=>{o?.unsubscribe();let h=0;const p=i++;Et(e(u,p)).subscribe(o=Ve(r,v=>r.next(t?t(u,v,p,h++):v),()=>{o=null,l()}))},()=>{a=!0,l()}))})}function c(e,t){return e===t}function d(e){for(let t in e)if(e[t]===d)return t;throw Error("Could not find renamed property on target object.")}function g(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(g).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function C(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const I=d({__forward_ref__:d});function L(e){return e.__forward_ref__=L,e.toString=function(){return g(this())},e}function k(e){return G(e)?e():e}function G(e){return"function"==typeof e&&e.hasOwnProperty(I)&&e.__forward_ref__===L}function ce(e){return e&&!!e.\u0275providers}class Y extends Error{constructor(t,n){super(function ht(e,t){return`NG0${Math.abs(e)}${t?": "+t:""}`}(t,n)),this.code=t}}function re(e){return"string"==typeof e?e:null==e?"":String(e)}function Tr(e,t){throw new Y(-201,!1)}function gn(e,t){null==e&&function we(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function _e(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function wr(e){return{providers:e.providers||[],imports:e.imports||[]}}function Da(e){return ap(e,Ra)||ap(e,cp)}function ap(e,t){return e.hasOwnProperty(t)?e[t]:null}function ba(e){return e&&(e.hasOwnProperty(ou)||e.hasOwnProperty(OT))?e[ou]:null}const Ra=d({\u0275prov:d}),ou=d({\u0275inj:d}),cp=d({ngInjectableDef:d}),OT=d({ngInjectorDef:d});var Be=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(Be||{});let iu;function Wt(e){const t=iu;return iu=e,t}function up(e,t,n){const r=Da(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&Be.Optional?null:void 0!==t?t:void Tr(g(e))}const et=globalThis,Fi={},uu="__NG_DI_FLAG__",Ma="ngTempTokenPath",xT=/\n/gm,hp="__source";let Eo;function Sr(e){const t=Eo;return Eo=e,t}function HT(e,t=Be.Default){if(void 0===Eo)throw new Y(-203,!1);return null===Eo?up(e,void 0,t):Eo.get(e,t&Be.Optional?null:void 0,t)}function ye(e,t=Be.Default){return(function lp(){return iu}()||HT)(k(e),t)}function he(e,t=Be.Default){return ye(e,ka(t))}function ka(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function du(e){const t=[];for(let n=0;n<e.length;n++){const r=k(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Y(900,!1);let o,i=Be.Default;for(let a=0;a<r.length;a++){const l=r[a],u=UT(l);"number"==typeof u?-1===u?o=l.token:i|=u:o=l}t.push(ye(o,i))}else t.push(ye(r))}return t}function UT(e){return e[uu]}function nr(e){return{toString:e}.toString()}var Oa=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(Oa||{}),Tn=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Tn||{});const Hn={},ze=[],Na=d({\u0275cmp:d}),hu=d({\u0275dir:d}),fu=d({\u0275pipe:d}),pp=d({\u0275mod:d}),rr=d({\u0275fac:d}),Ui=d({__NG_ELEMENT_ID__:d}),gp=d({__NG_ENV_ID__:d});function mp(e,t,n){let r=e.length;for(;;){const o=e.indexOf(t,n);if(-1===o)return o;if(0===o||e.charCodeAt(o-1)<=32){const i=t.length;if(o+i===r||e.charCodeAt(o+i)<=32)return o}n=o+1}}function pu(e,t,n){let r=0;for(;r<n.length;){const o=n[r];if("number"==typeof o){if(0!==o)break;r++;const i=n[r++],a=n[r++],l=n[r++];e.setAttribute(t,a,l,i)}else{const i=o,a=n[++r];vp(i)?e.setProperty(t,i,a):e.setAttribute(t,i,a),r++}}return r}function yp(e){return 3===e||4===e||6===e}function vp(e){return 64===e.charCodeAt(0)}function Bi(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const o=t[r];"number"==typeof o?n=o:0===n||Cp(e,n,o,null,-1===n||2===n?t[++r]:null)}}return e}function Cp(e,t,n,r,o){let i=0,a=e.length;if(-1===t)a=-1;else for(;i<e.length;){const l=e[i++];if("number"==typeof l){if(l===t){a=-1;break}if(l>t){a=i-1;break}}}for(;i<e.length;){const l=e[i];if("number"==typeof l)break;if(l===n){if(null===r)return void(null!==o&&(e[i+1]=o));if(r===e[i+1])return void(e[i+2]=o)}i++,null!==r&&i++,null!==o&&i++}-1!==a&&(e.splice(a,0,t),i=a+1),e.splice(i++,0,n),null!==r&&e.splice(i++,0,r),null!==o&&e.splice(i++,0,o)}const _p="ng-template";function $T(e,t,n){let r=0,o=!0;for(;r<e.length;){let i=e[r++];if("string"==typeof i&&o){const a=e[r++];if(n&&"class"===i&&-1!==mp(a.toLowerCase(),t,0))return!0}else{if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}"number"==typeof i&&(o=!1)}}return!1}function Ep(e){return 4===e.type&&e.value!==_p}function VT(e,t,n){return t===(4!==e.type||n?e.value:_p)}function zT(e,t,n){let r=4;const o=e.attrs||[],i=function qT(e){for(let t=0;t<e.length;t++)if(yp(e[t]))return t;return e.length}(o);let a=!1;for(let l=0;l<t.length;l++){const u=t[l];if("number"!=typeof u){if(!a)if(4&r){if(r=2|1&r,""!==u&&!VT(e,u,n)||""===u&&1===t.length){if(wn(r))return!1;a=!0}}else{const h=8&r?u:t[++l];if(8&r&&null!==e.attrs){if(!$T(e.attrs,h,n)){if(wn(r))return!1;a=!0}continue}const v=GT(8&r?"class":u,o,Ep(e),n);if(-1===v){if(wn(r))return!1;a=!0;continue}if(""!==h){let E;E=v>i?"":o[v+1].toLowerCase();const D=8&r?E:null;if(D&&-1!==mp(D,h,0)||2&r&&h!==E){if(wn(r))return!1;a=!0}}}}else{if(!a&&!wn(r)&&!wn(u))return!1;if(a&&wn(u))continue;a=!1,r=u|1&r}}return wn(r)||a}function wn(e){return 0==(1&e)}function GT(e,t,n,r){if(null===t)return-1;let o=0;if(r||!n){let i=!1;for(;o<t.length;){const a=t[o];if(a===e)return o;if(3===a||6===a)i=!0;else{if(1===a||2===a){let l=t[++o];for(;"string"==typeof l;)l=t[++o];continue}if(4===a)break;if(0===a){o+=4;continue}}o+=i?1:2}return-1}return function WT(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function Ip(e,t,n=!1){for(let r=0;r<t.length;r++)if(zT(e,t[r],n))return!0;return!1}function Tp(e,t){return e?":not("+t.trim()+")":t}function YT(e){let t=e[0],n=1,r=2,o="",i=!1;for(;n<e.length;){let a=e[n];if("string"==typeof a)if(2&r){const l=e[++n];o+="["+a+(l.length>0?'="'+l+'"':"")+"]"}else 8&r?o+="."+a:4&r&&(o+=" "+a);else""!==o&&!wn(a)&&(t+=Tp(i,o),o=""),r=a,i=i||!wn(r);n++}return""!==o&&(t+=Tp(i,o)),t}function Pa(e){return nr(()=>{const t=Sp(e),n={...t,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Oa.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Tn.Emulated,styles:e.styles||ze,_:null,schemas:e.schemas||null,tView:null,id:""};Ap(n);const r=e.dependencies;return n.directiveDefs=xa(r,!1),n.pipeDefs=xa(r,!0),n.id=function ow(e){let t=0;const n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const o of n)t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}(n),n})}function ew(e){return je(e)||It(e)}function tw(e){return null!==e}function Kr(e){return nr(()=>({type:e.type,bootstrap:e.bootstrap||ze,declarations:e.declarations||ze,imports:e.imports||ze,exports:e.exports||ze,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function wp(e,t){if(null==e)return Hn;const n={};for(const r in e)if(e.hasOwnProperty(r)){let o=e[r],i=o;Array.isArray(o)&&(i=o[1],o=o[0]),n[o]=r,t&&(t[o]=i)}return n}function Pt(e){return nr(()=>{const t=Sp(e);return Ap(t),t})}function je(e){return e[Na]||null}function It(e){return e[hu]||null}function xt(e){return e[fu]||null}function ln(e,t){const n=e[pp]||null;if(!n&&!0===t)throw new Error(`Type ${g(e)} does not have '\u0275mod' property.`);return n}function Sp(e){const t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||Hn,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||ze,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:wp(e.inputs,t),outputs:wp(e.outputs)}}function Ap(e){e.features?.forEach(t=>t(e))}function xa(e,t){if(!e)return null;const n=t?xt:ew;return()=>("function"==typeof e?e():e).map(r=>n(r)).filter(tw)}const ut=0,se=1,Ne=2,st=3,Sn=4,ji=5,Mt=6,To=7,ft=8,Ar=9,wo=10,Re=11,$i=12,Dp=13,So=14,pt=15,Vi=16,Ao=17,Un=18,zi=19,bp=20,Dr=21,or=22,Gi=23,Ki=24,Ue=25,gu=1,Rp=2,Bn=7,Do=9,Tt=11;function Yt(e){return Array.isArray(e)&&"object"==typeof e[gu]}function Lt(e){return Array.isArray(e)&&!0===e[gu]}function mu(e){return 0!=(4&e.flags)}function qr(e){return e.componentOffset>-1}function Fa(e){return 1==(1&e.flags)}function An(e){return!!e.template}function yu(e){return 0!=(512&e[Ne])}function Wr(e,t){return e.hasOwnProperty(rr)?e[rr]:null}let wt=null,Ha=!1;function mn(e){const t=wt;return wt=e,t}const Op={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Pp(e){if(!Wi(e)||e.dirty){if(!e.producerMustRecompute(e)&&!Fp(e))return void(e.dirty=!1);e.producerRecomputeValue(e),e.dirty=!1}}function Lp(e){e.dirty=!0,function xp(e){if(void 0===e.liveConsumerNode)return;const t=Ha;Ha=!0;try{for(const n of e.liveConsumerNode)n.dirty||Lp(n)}finally{Ha=t}}(e),e.consumerMarkedDirty?.(e)}function Cu(e){return e&&(e.nextProducerIndex=0),mn(e)}function _u(e,t){if(mn(t),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(Wi(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)Ua(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Fp(e){bo(e);for(let t=0;t<e.producerNode.length;t++){const n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(Pp(n),r!==n.version))return!0}return!1}function Hp(e){if(bo(e),Wi(e))for(let t=0;t<e.producerNode.length;t++)Ua(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function Ua(e,t){if(function Bp(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}(e),bo(e),1===e.liveConsumerNode.length)for(let r=0;r<e.producerNode.length;r++)Ua(e.producerNode[r],e.producerIndexOfThis[r]);const n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){const r=e.liveConsumerIndexOfThis[t],o=e.liveConsumerNode[t];bo(o),o.producerIndexOfThis[r]=t}}function Wi(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function bo(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}let jp=null;const Gp=()=>{},yw=(()=>({...Op,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:e=>{e.schedule(e.ref)},hasRun:!1,cleanupFn:Gp}))();class vw{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Zr(){return Kp}function Kp(e){return e.type.prototype.ngOnChanges&&(e.setInput=_w),Cw}function Cw(){const e=Wp(this),t=e?.current;if(t){const n=e.previous;if(n===Hn)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function _w(e,t,n,r){const o=this.declaredInputs[n],i=Wp(e)||function Ew(e,t){return e[qp]=t}(e,{previous:Hn,current:null}),a=i.current||(i.current={}),l=i.previous,u=l[o];a[o]=new vw(u&&u.currentValue,t,l===Hn),e[r]=t}Zr.ngInherit=!0;const qp="__ngSimpleChanges__";function Wp(e){return e[qp]||null}const jn=function(e,t,n){};function tt(e){for(;Array.isArray(e);)e=e[ut];return e}function Qt(e,t){return tt(t[e.index])}function un(e,t){const n=t[e];return Yt(n)?n:n[ut]}function Rr(e,t){return null==t?null:e[t]}function Jp(e){e[Ao]=0}function Dw(e){1024&e[Ne]||(e[Ne]|=1024,eg(e,1))}function Xp(e){1024&e[Ne]&&(e[Ne]&=-1025,eg(e,-1))}function eg(e,t){let n=e[st];if(null===n)return;n[ji]+=t;let r=n;for(n=n[st];null!==n&&(1===t&&1===r[ji]||-1===t&&0===r[ji]);)n[ji]+=t,r=n,n=n[st]}const Se={lFrame:dg(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function rg(){return Se.bindingsEnabled}function W(){return Se.lFrame.lView}function $e(){return Se.lFrame.tView}function St(){let e=og();for(;null!==e&&64===e.type;)e=e.parent;return e}function og(){return Se.lFrame.currentTNode}function $n(e,t){const n=Se.lFrame;n.currentTNode=e,n.isParent=t}function Su(){return Se.lFrame.isParent}function jw(e,t){const n=Se.lFrame;n.bindingIndex=n.bindingRootIndex=e,Du(t)}function Du(e){Se.lFrame.currentDirectiveIndex=e}function Ru(e){Se.lFrame.currentQueryIndex=e}function Vw(e){const t=e[se];return 2===t.type?t.declTNode:1===t.type?e[Mt]:null}function lg(e,t,n){if(n&Be.SkipSelf){let o=t,i=e;for(;!(o=o.parent,null!==o||n&Be.Host||(o=Vw(i),null===o||(i=i[So],10&o.type))););if(null===o)return!1;t=o,e=i}const r=Se.lFrame=ug();return r.currentTNode=t,r.lView=e,!0}function Mu(e){const t=ug(),n=e[se];Se.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function ug(){const e=Se.lFrame,t=null===e?null:e.child;return null===t?dg(e):t}function dg(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function hg(){const e=Se.lFrame;return Se.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const fg=hg;function ku(){const e=hg();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Ht(){return Se.lFrame.selectedIndex}function Yr(e){Se.lFrame.selectedIndex=e}function Ou(){Se.lFrame.currentNamespace="svg"}function Nu(){!function qw(){Se.lFrame.currentNamespace=null}()}let gg=!0;function ja(){return gg}function Mr(e){gg=e}function $a(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const i=e.data[n].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:l,ngAfterViewInit:u,ngAfterViewChecked:h,ngOnDestroy:p}=i;a&&(e.contentHooks??=[]).push(-n,a),l&&((e.contentHooks??=[]).push(n,l),(e.contentCheckHooks??=[]).push(n,l)),u&&(e.viewHooks??=[]).push(-n,u),h&&((e.viewHooks??=[]).push(n,h),(e.viewCheckHooks??=[]).push(n,h)),null!=p&&(e.destroyHooks??=[]).push(n,p)}}function Va(e,t,n){mg(e,t,3,n)}function za(e,t,n,r){(3&e[Ne])===n&&mg(e,t,n,r)}function Pu(e,t){let n=e[Ne];(3&n)===t&&(n&=8191,n+=1,e[Ne]=n)}function mg(e,t,n,r){const i=r??-1,a=t.length-1;let l=0;for(let u=void 0!==r?65535&e[Ao]:0;u<a;u++)if("number"==typeof t[u+1]){if(l=t[u],null!=r&&l>=r)break}else t[u]<0&&(e[Ao]+=65536),(l<i||-1==i)&&(Zw(e,n,t,u),e[Ao]=(4294901760&e[Ao])+u+2),u++}function yg(e,t){jn(4,e,t);const n=mn(null);try{t.call(e)}finally{mn(n),jn(5,e,t)}}function Zw(e,t,n,r){const o=n[r]<0,i=n[r+1],l=e[o?-n[r]:n[r]];o?e[Ne]>>13<e[Ao]>>16&&(3&e[Ne])===t&&(e[Ne]+=8192,yg(l,i)):yg(l,i)}const Oo=-1;class Yi{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Lu(e){return e!==Oo}function Qi(e){return 32767&e}function Ji(e,t){let n=function Xw(e){return e>>16}(e),r=t;for(;n>0;)r=r[So],n--;return r}let Fu=!0;function Ga(e){const t=Fu;return Fu=e,t}const vg=255,Cg=5;let eS=0;const Vn={};function Ka(e,t){const n=_g(e,t);if(-1!==n)return n;const r=t[se];r.firstCreatePass&&(e.injectorIndex=t.length,Hu(r.data,e),Hu(t,null),Hu(r.blueprint,null));const o=qa(e,t),i=e.injectorIndex;if(Lu(o)){const a=Qi(o),l=Ji(o,t),u=l[se].data;for(let h=0;h<8;h++)t[i+h]=l[a+h]|u[a+h]}return t[i+8]=o,i}function Hu(e,t){e.push(0,0,0,0,0,0,0,0,t)}function _g(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function qa(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,o=t;for(;null!==o;){if(r=bg(o),null===r)return Oo;if(n++,o=o[So],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Oo}function Uu(e,t,n){!function tS(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ui)&&(r=n[Ui]),null==r&&(r=n[Ui]=eS++);const o=r&vg;t.data[e+(o>>Cg)]|=1<<o}(e,t,n)}function Eg(e,t,n){if(n&Be.Optional||void 0!==e)return e;Tr()}function Ig(e,t,n,r){if(n&Be.Optional&&void 0===r&&(r=null),!(n&(Be.Self|Be.Host))){const o=e[Ar],i=Wt(void 0);try{return o?o.get(t,r,n&Be.Optional):up(t,r,n&Be.Optional)}finally{Wt(i)}}return Eg(r,0,n)}function Tg(e,t,n,r=Be.Default,o){if(null!==e){if(2048&t[Ne]&&!(r&Be.Self)){const a=function aS(e,t,n,r,o){let i=e,a=t;for(;null!==i&&null!==a&&2048&a[Ne]&&!(512&a[Ne]);){const l=wg(i,a,n,r|Be.Self,Vn);if(l!==Vn)return l;let u=i.parent;if(!u){const h=a[bp];if(h){const p=h.get(n,Vn,r);if(p!==Vn)return p}u=bg(a),a=a[So]}i=u}return o}(e,t,n,r,Vn);if(a!==Vn)return a}const i=wg(e,t,n,r,Vn);if(i!==Vn)return i}return Ig(t,n,r,o)}function wg(e,t,n,r,o){const i=function oS(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Ui)?e[Ui]:void 0;return"number"==typeof t?t>=0?t&vg:sS:t}(n);if("function"==typeof i){if(!lg(t,e,r))return r&Be.Host?Eg(o,0,r):Ig(t,n,r,o);try{let a;if(a=i(r),null!=a||r&Be.Optional)return a;Tr()}finally{fg()}}else if("number"==typeof i){let a=null,l=_g(e,t),u=Oo,h=r&Be.Host?t[pt][Mt]:null;for((-1===l||r&Be.SkipSelf)&&(u=-1===l?qa(e,t):t[l+8],u!==Oo&&Ag(r,!1)?(a=t[se],l=Qi(u),t=Ji(u,t)):l=-1);-1!==l;){const p=t[se];if(Sg(i,l,p.data)){const v=rS(l,t,n,a,r,h);if(v!==Vn)return v}u=t[l+8],u!==Oo&&Ag(r,t[se].data[l+8]===h)&&Sg(i,l,t)?(a=p,l=Qi(u),t=Ji(u,t)):l=-1}}return o}function rS(e,t,n,r,o,i){const a=t[se],l=a.data[e+8],p=function Wa(e,t,n,r,o){const i=e.providerIndexes,a=t.data,l=1048575&i,u=e.directiveStart,p=i>>20,E=o?l+p:e.directiveEnd;for(let D=r?l:l+p;D<E;D++){const x=a[D];if(D<u&&n===x||D>=u&&x.type===n)return D}if(o){const D=a[u];if(D&&An(D)&&D.type===n)return u}return null}(l,a,n,null==r?qr(l)&&Fu:r!=a&&0!=(3&l.type),o&Be.Host&&i===l);return null!==p?Qr(t,a,p,l):Vn}function Qr(e,t,n,r){let o=e[n];const i=t.data;if(function Yw(e){return e instanceof Yi}(o)){const a=o;a.resolving&&function an(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new Y(-200,`Circular dependency in DI detected for ${e}${n}`)}(function Oe(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():re(e)}(i[n]));const l=Ga(a.canSeeViewProviders);a.resolving=!0;const h=a.injectImpl?Wt(a.injectImpl):null;lg(e,r,Be.Default);try{o=e[n]=a.factory(void 0,i,e,r),t.firstCreatePass&&n>=r.directiveStart&&function Ww(e,t,n){const{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=t.type.prototype;if(r){const a=Kp(t);(n.preOrderHooks??=[]).push(e,a),(n.preOrderCheckHooks??=[]).push(e,a)}o&&(n.preOrderHooks??=[]).push(0-e,o),i&&((n.preOrderHooks??=[]).push(e,i),(n.preOrderCheckHooks??=[]).push(e,i))}(n,i[n],t)}finally{null!==h&&Wt(h),Ga(l),a.resolving=!1,fg()}}return o}function Sg(e,t,n){return!!(n[t+(e>>Cg)]&1<<e)}function Ag(e,t){return!(e&Be.Self||e&Be.Host&&t)}class Ut{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return Tg(this._tNode,this._lView,t,ka(r),n)}}function sS(){return new Ut(St(),W())}function Bu(e){return G(e)?()=>{const t=Bu(k(e));return t&&t()}:Wr(e)}function bg(e){const t=e[se],n=t.type;return 2===n?t.declTNode:1===n?e[Mt]:null}function Ho(e,t){e.forEach(n=>Array.isArray(n)?Ho(n,t):t(n))}function Mg(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Ya(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function nc(e){return 128==(128&e.flags)}var kr=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(kr||{});const Zu=new Map;let HS=0;const Qu="__ngContext__";function kt(e,t){Yt(t)?(e[Qu]=t[zi],function BS(e){Zu.set(e[zi],e)}(t)):e[Qu]=t}let Ju;function Xu(e,t){return Ju(e,t)}function os(e){const t=e[st];return Lt(t)?t[st]:t}function Qg(e){return Xg(e[$i])}function Jg(e){return Xg(e[Sn])}function Xg(e){for(;null!==e&&!Lt(e);)e=e[Sn];return e}function $o(e,t,n,r,o){if(null!=r){let i,a=!1;Lt(r)?i=r:Yt(r)&&(a=!0,r=r[ut]);const l=tt(r);0===e&&null!==n?null==o?rm(t,n,l):Jr(t,n,l,o||null,!0):1===e&&null!==n?Jr(t,n,l,o||null,!0):2===e?function lc(e,t,n){const r=ac(e,t);r&&function iA(e,t,n,r){e.removeChild(t,n,r)}(e,r,t,n)}(t,l,a):3===e&&t.destroyNode(l),null!=i&&function cA(e,t,n,r,o){const i=n[Bn];i!==tt(n)&&$o(t,e,r,i,o);for(let l=Tt;l<n.length;l++){const u=n[l];ss(u[se],u,e,t,r,i)}}(t,e,i,n,o)}}function ic(e,t,n){return e.createElement(t,n)}function tm(e,t){const n=e[Do],r=n.indexOf(t);Xp(t),n.splice(r,1)}function sc(e,t){if(e.length<=Tt)return;const n=Tt+t,r=e[n];if(r){const o=r[Vi];null!==o&&o!==e&&tm(o,r),t>0&&(e[n-1][Sn]=r[Sn]);const i=Ya(e,Tt+t);!function QS(e,t){ss(e,t,t[Re],2,null,null),t[ut]=null,t[Mt]=null}(r[se],r);const a=i[Un];null!==a&&a.detachView(i[se]),r[st]=null,r[Sn]=null,r[Ne]&=-129}return r}function td(e,t){if(!(256&t[Ne])){const n=t[Re];t[Gi]&&Hp(t[Gi]),t[Ki]&&Hp(t[Ki]),n.destroyNode&&ss(e,t,n,3,null,null),function eA(e){let t=e[$i];if(!t)return nd(e[se],e);for(;t;){let n=null;if(Yt(t))n=t[$i];else{const r=t[Tt];r&&(n=r)}if(!n){for(;t&&!t[Sn]&&t!==e;)Yt(t)&&nd(t[se],t),t=t[st];null===t&&(t=e),Yt(t)&&nd(t[se],t),n=t&&t[Sn]}t=n}}(t)}}function nd(e,t){if(!(256&t[Ne])){t[Ne]&=-129,t[Ne]|=256,function oA(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const o=t[n[r]];if(!(o instanceof Yi)){const i=n[r+1];if(Array.isArray(i))for(let a=0;a<i.length;a+=2){const l=o[i[a]],u=i[a+1];jn(4,l,u);try{u.call(l)}finally{jn(5,l,u)}}else{jn(4,o,i);try{i.call(o)}finally{jn(5,o,i)}}}}}(e,t),function rA(e,t){const n=e.cleanup,r=t[To];if(null!==n)for(let i=0;i<n.length-1;i+=2)if("string"==typeof n[i]){const a=n[i+3];a>=0?r[a]():r[-a].unsubscribe(),i+=2}else n[i].call(r[n[i+1]]);null!==r&&(t[To]=null);const o=t[Dr];if(null!==o){t[Dr]=null;for(let i=0;i<o.length;i++)(0,o[i])()}}(e,t),1===t[se].type&&t[Re].destroy();const n=t[Vi];if(null!==n&&Lt(t[st])){n!==t[st]&&tm(n,t);const r=t[Un];null!==r&&r.detachView(e)}!function jS(e){Zu.delete(e[zi])}(t)}}function rd(e,t,n){return function nm(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[ut];{const{componentOffset:o}=r;if(o>-1){const{encapsulation:i}=e.data[r.directiveStart+o];if(i===Tn.None||i===Tn.Emulated)return null}return Qt(r,n)}}(e,t.parent,n)}function Jr(e,t,n,r,o){e.insertBefore(t,n,r,o)}function rm(e,t,n){e.appendChild(t,n)}function om(e,t,n,r,o){null!==r?Jr(e,t,n,r,o):rm(e,t,n)}function ac(e,t){return e.parentNode(t)}let od,cd,am=function sm(e,t,n){return 40&e.type?Qt(e,n):null};function cc(e,t,n,r){const o=rd(e,r,t),i=t[Re],l=function im(e,t,n){return am(e,t,n)}(r.parent||t[Mt],r,t);if(null!=o)if(Array.isArray(n))for(let u=0;u<n.length;u++)om(i,o,n[u],l,!1);else om(i,o,n,l,!1);void 0!==od&&od(i,r,t,n,o)}function is(e,t){if(null!==t){const n=t.type;if(3&n)return Qt(t,e);if(4&n)return id(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return is(e,r);{const o=e[t.index];return Lt(o)?id(-1,o):tt(o)}}if(32&n)return Xu(t,e)()||tt(e[t.index]);{const r=lm(e,t);return null!==r?Array.isArray(r)?r[0]:is(os(e[pt]),r):is(e,t.next)}}return null}function lm(e,t){return null!==t?e[pt][Mt].projection[t.projection]:null}function id(e,t){const n=Tt+e+1;if(n<t.length){const r=t[n],o=r[se].firstChild;if(null!==o)return is(r,o)}return t[Bn]}function sd(e,t,n,r,o,i,a){for(;null!=n;){const l=r[n.index],u=n.type;if(a&&0===t&&(l&&kt(tt(l),r),n.flags|=2),32!=(32&n.flags))if(8&u)sd(e,t,n.child,r,o,i,!1),$o(t,e,o,l,i);else if(32&u){const h=Xu(n,r);let p;for(;p=h();)$o(t,e,o,p,i);$o(t,e,o,l,i)}else 16&u?dm(e,t,r,n,o,i):$o(t,e,o,l,i);n=a?n.projectionNext:n.next}}function ss(e,t,n,r,o,i){sd(n,r,e.firstChild,t,o,i,!1)}function dm(e,t,n,r,o,i){const a=n[pt],u=a[Mt].projection[r.projection];if(Array.isArray(u))for(let h=0;h<u.length;h++)$o(t,e,o,u[h],i);else{let h=u;const p=a[st];nc(r)&&(h.flags|=128),sd(e,t,h,p,o,i,!0)}}function hm(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function fm(e,t,n){const{mergedAttrs:r,classes:o,styles:i}=n;null!==r&&pu(e,t,r),null!==o&&hm(e,t,o),null!==i&&function uA(e,t,n){e.setAttribute(t,"style",n)}(e,t,i)}class le{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=_e({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const us=new le("ENVIRONMENT_INITIALIZER"),Dm=new le("INJECTOR",-1),bm=new le("INJECTOR_DEF_TYPES");class pd{get(t,n=Fi){if(n===Fi){const r=new Error(`NullInjectorError: No provider for ${g(t)}!`);throw r.name="NullInjectorError",r}return n}}function FA(...e){return{\u0275providers:Rm(0,e),\u0275fromNgModule:!0}}function Rm(e,...t){const n=[],r=new Set;let o;const i=a=>{n.push(a)};return Ho(t,a=>{const l=a;fc(l,i,[],r)&&(o||=[],o.push(l))}),void 0!==o&&Mm(o,i),n}function Mm(e,t){for(let n=0;n<e.length;n++){const{ngModule:r,providers:o}=e[n];md(o,i=>{t(i,r)})}}function fc(e,t,n,r){if(!(e=k(e)))return!1;let o=null,i=ba(e);const a=!i&&je(e);if(i||a){if(a&&!a.standalone)return!1;o=e}else{const u=e.ngModule;if(i=ba(u),!i)return!1;o=u}const l=r.has(o);if(a){if(l)return!1;if(r.add(o),a.dependencies){const u="function"==typeof a.dependencies?a.dependencies():a.dependencies;for(const h of u)fc(h,t,n,r)}}else{if(!i)return!1;{if(null!=i.imports&&!l){let h;r.add(o);try{Ho(i.imports,p=>{fc(p,t,n,r)&&(h||=[],h.push(p))})}finally{}void 0!==h&&Mm(h,t)}if(!l){const h=Wr(o)||(()=>new o);t({provide:o,useFactory:h,deps:ze},o),t({provide:bm,useValue:o,multi:!0},o),t({provide:us,useValue:()=>ye(o),multi:!0},o)}const u=i.providers;if(null!=u&&!l){const h=e;md(u,p=>{t(p,h)})}}}return o!==e&&void 0!==e.providers}function md(e,t){for(let n of e)ce(n)&&(n=n.\u0275providers),Array.isArray(n)?md(n,t):t(n)}const HA=d({provide:String,useValue:d});function yd(e){return null!==e&&"object"==typeof e&&HA in e}function Xr(e){return"function"==typeof e}const vd=new le("Set Injector scope."),pc={},BA={};let Cd;function gc(){return void 0===Cd&&(Cd=new pd),Cd}class Dn{}class mc extends Dn{get destroyed(){return this._destroyed}constructor(t,n,r,o){super(),this.parent=n,this.source=r,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ed(t,a=>this.processProvider(a)),this.records.set(Dm,Ko(void 0,this)),o.has("environment")&&this.records.set(Dn,Ko(void 0,this));const i=this.records.get(vd);null!=i&&"string"==typeof i.value&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(bm.multi,ze,Be.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of t)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();const n=Sr(this),r=Wt(void 0);try{return t()}finally{Sr(n),Wt(r)}}get(t,n=Fi,r=Be.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(gp))return t[gp](this);r=ka(r);const i=Sr(this),a=Wt(void 0);try{if(!(r&Be.SkipSelf)){let u=this.records.get(t);if(void 0===u){const h=function GA(e){return"function"==typeof e||"object"==typeof e&&e instanceof le}(t)&&Da(t);u=h&&this.injectableDefInScope(h)?Ko(_d(t),pc):null,this.records.set(t,u)}if(null!=u)return this.hydrate(t,u)}return(r&Be.Self?gc():this.parent).get(t,n=r&Be.Optional&&n===Fi?null:n)}catch(l){if("NullInjectorError"===l.name){if((l[Ma]=l[Ma]||[]).unshift(g(t)),i)throw l;return function BT(e,t,n,r){const o=e[Ma];throw t[hp]&&o.unshift(t[hp]),e.message=function jT(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let o=g(t);if(Array.isArray(t))o=t.map(g).join(" -> ");else if("object"==typeof t){let i=[];for(let a in t)if(t.hasOwnProperty(a)){let l=t[a];i.push(a+":"+("string"==typeof l?JSON.stringify(l):g(l)))}o=`{${i.join(", ")}}`}return`${n}${r?"("+r+")":""}[${o}]: ${e.replace(xT,"\n  ")}`}("\n"+e.message,o,n,r),e.ngTokenPath=o,e[Ma]=null,e}(l,t,"R3InjectorError",this.source)}throw l}finally{Wt(a),Sr(i)}}resolveInjectorInitializers(){const t=Sr(this),n=Wt(void 0);try{const o=this.get(us.multi,ze,Be.Self);for(const i of o)i()}finally{Sr(t),Wt(n)}}toString(){const t=[],n=this.records;for(const r of n.keys())t.push(g(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Y(205,!1)}processProvider(t){let n=Xr(t=k(t))?t:k(t&&t.provide);const r=function $A(e){return yd(e)?Ko(void 0,e.useValue):Ko(function Nm(e,t,n){let r;if(Xr(e)){const o=k(e);return Wr(o)||_d(o)}if(yd(e))r=()=>k(e.useValue);else if(function Om(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...du(e.deps||[]));else if(function km(e){return!(!e||!e.useExisting)}(e))r=()=>ye(k(e.useExisting));else{const o=k(e&&(e.useClass||e.provide));if(!function VA(e){return!!e.deps}(e))return Wr(o)||_d(o);r=()=>new o(...du(e.deps))}return r}(e),pc)}(t);if(Xr(t)||!0!==t.multi)this.records.get(n);else{let o=this.records.get(n);o||(o=Ko(void 0,pc,!0),o.factory=()=>du(o.multi),this.records.set(n,o)),n=t,o.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===pc&&(n.value=BA,n.value=n.factory()),"object"==typeof n.value&&n.value&&function zA(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=k(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){const n=this._onDestroyHooks.indexOf(t);-1!==n&&this._onDestroyHooks.splice(n,1)}}function _d(e){const t=Da(e),n=null!==t?t.factory:Wr(e);if(null!==n)return n;if(e instanceof le)throw new Y(204,!1);if(e instanceof Function)return function jA(e){const t=e.length;if(t>0)throw function ts(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?"),new Y(204,!1);const n=function kT(e){return e&&(e[Ra]||e[cp])||null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Y(204,!1)}function Ko(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function Ed(e,t){for(const n of e)Array.isArray(n)?Ed(n,t):n&&ce(n)?Ed(n.\u0275providers,t):t(n)}const yc=new le("AppId",{providedIn:"root",factory:()=>KA}),KA="ng",Pm=new le("Platform Initializer"),Nr=new le("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),xm=new le("CSP nonce",{providedIn:"root",factory:()=>function zo(){if(void 0!==cd)return cd;if(typeof document<"u")return document;throw new Y(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Lm=(e,t,n)=>null;function Rd(e,t,n=!1){return Lm(e,t,n)}class nD{}class Um{}class oD{resolveComponentFactory(t){throw function rD(e){const t=Error(`No component factory found for ${g(e)}.`);return t.ngComponent=e,t}(t)}}let Tc=(()=>{class e{static#e=this.NULL=new oD}return e})();function iD(){return Zo(St(),W())}function Zo(e,t){return new Pr(Qt(e,t))}let Pr=(()=>{class e{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=iD}return e})();class jm{}let cD=(()=>{class e{static#e=this.\u0275prov=_e({token:e,providedIn:"root",factory:()=>null})}return e})();class Sc{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const lD=new Sc("16.2.10"),Od={};function Gm(e,t=null,n=null,r){const o=Km(e,t,n,r);return o.resolveInjectorInitializers(),o}function Km(e,t=null,n=null,r,o=new Set){const i=[n||ze,FA(e)];return r=r||("object"==typeof e?void 0:g(e)),new mc(i,t||gc(),r||null,o)}let bn=(()=>{class e{static#e=this.THROW_IF_NOT_FOUND=Fi;static#t=this.NULL=new pd;static create(n,r){if(Array.isArray(n))return Gm({name:""},r,n,"");{const o=n.name??"";return Gm({name:o},n.parent,n.providers,o)}}static#n=this.\u0275prov=_e({token:e,providedIn:"any",factory:()=>ye(Dm)});static#r=this.__NG_ELEMENT_ID__=-1}return e})();function Pd(e){return e.ngOriginalError}class cr{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&Pd(t);for(;n&&Pd(n);)n=Pd(n);return n||null}}function Ld(e){return t=>{setTimeout(e,void 0,t)}}const Bt=class mD extends Qe{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let o=t,i=n||(()=>null),a=r;if(t&&"object"==typeof t){const u=t;o=u.next?.bind(u),i=u.error?.bind(u),a=u.complete?.bind(u)}this.__isAsync&&(i=Ld(i),o&&(o=Ld(o)),a&&(a=Ld(a)));const l=super.subscribe({next:o,error:i,complete:a});return t instanceof F&&t.add(l),l}};function Wm(...e){}class Je{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Bt(!1),this.onMicrotaskEmpty=new Bt(!1),this.onStable=new Bt(!1),this.onError=new Bt(!1),typeof Zone>"u")throw new Y(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&n,o.shouldCoalesceRunChangeDetection=r,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=function yD(){const e="function"==typeof et.requestAnimationFrame;let t=et[e?"requestAnimationFrame":"setTimeout"],n=et[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&n){const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function _D(e){const t=()=>{!function CD(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(et,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Hd(e),e.isCheckStableRunning=!0,Fd(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Hd(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,o,i,a,l)=>{if(function ID(e){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0].data?.__ignore_ng_zone__}(l))return n.invokeTask(o,i,a,l);try{return Zm(e),n.invokeTask(o,i,a,l)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===i.type||e.shouldCoalesceRunChangeDetection)&&t(),Ym(e)}},onInvoke:(n,r,o,i,a,l,u)=>{try{return Zm(e),n.invoke(o,i,a,l,u)}finally{e.shouldCoalesceRunChangeDetection&&t(),Ym(e)}},onHasTask:(n,r,o,i)=>{n.hasTask(o,i),r===o&&("microTask"==i.change?(e._hasPendingMicrotasks=i.microTask,Hd(e),Fd(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:(n,r,o,i)=>(n.handleError(o,i),e.runOutsideAngular(()=>e.onError.emit(i)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Je.isInAngularZone())throw new Y(909,!1)}static assertNotInAngularZone(){if(Je.isInAngularZone())throw new Y(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,o){const i=this._inner,a=i.scheduleEventTask("NgZoneEvent: "+o,t,vD,Wm,Wm);try{return i.runTask(a,n,r)}finally{i.cancelTask(a)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const vD={};function Fd(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Hd(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Zm(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Ym(e){e._nesting--,Fd(e)}class ED{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Bt,this.onMicrotaskEmpty=new Bt,this.onStable=new Bt,this.onError=new Bt}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,o){return t.apply(n,r)}}const Qm=new le("",{providedIn:"root",factory:Jm});function Jm(){const e=he(Je);let t=!0;return xi(new ve(o=>{t=e.isStable&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks,e.runOutsideAngular(()=>{o.next(t),o.complete()})}),new ve(o=>{let i;e.runOutsideAngular(()=>{i=e.onStable.subscribe(()=>{Je.assertNotInAngularZone(),queueMicrotask(()=>{!t&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks&&(t=!0,o.next(!0))})})});const a=e.onUnstable.subscribe(()=>{Je.assertInAngularZone(),t&&(t=!1,e.runOutsideAngular(()=>{o.next(!1)}))});return()=>{i.unsubscribe(),a.unsubscribe()}}).pipe(Aa()))}function lr(e){return e instanceof Function?e():e}let Ud=(()=>{class e{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=_e({token:e,providedIn:"root",factory:()=>new e})}return e})();function fs(e){for(;e;){e[Ne]|=64;const t=os(e);if(yu(e)&&!t)return e;e=t}return null}const ry=new le("",{providedIn:"root",factory:()=>!1});let Dc=null;function ay(e,t){return e[t]??uy()}function cy(e,t){const n=uy();n.producerNode?.length&&(e[t]=Dc,n.lView=e,Dc=ly())}const OD={...Op,consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{fs(e.lView)},lView:null};function ly(){return Object.create(OD)}function uy(){return Dc??=ly(),Dc}const ke={};function Bd(e){dy($e(),W(),Ht()+e,!1)}function dy(e,t,n,r){if(!r)if(3==(3&t[Ne])){const i=e.preOrderCheckHooks;null!==i&&Va(t,i,n)}else{const i=e.preOrderHooks;null!==i&&za(t,i,0,n)}Yr(n)}function me(e,t=Be.Default){const n=W();return null===n?ye(e,t):Tg(St(),n,k(e),t)}function bc(e,t,n,r,o,i,a,l,u,h,p){const v=t.blueprint.slice();return v[ut]=o,v[Ne]=140|r,(null!==h||e&&2048&e[Ne])&&(v[Ne]|=2048),Jp(v),v[st]=v[So]=e,v[ft]=n,v[wo]=a||e&&e[wo],v[Re]=l||e&&e[Re],v[Ar]=u||e&&e[Ar]||null,v[Mt]=i,v[zi]=function US(){return HS++}(),v[or]=p,v[bp]=h,v[pt]=2==t.type?e[pt]:v,v}function Jo(e,t,n,r,o){let i=e.data[t];if(null===i)i=function jd(e,t,n,r,o){const i=og(),a=Su(),u=e.data[t]=function jD(e,t,n,r,o,i){let a=t?t.injectorIndex:-1,l=0;return function Mo(){return null!==Se.skipHydrationRootTNode}()&&(l|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:l,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?i:i&&i.parent,n,t,r,o);return null===e.firstChild&&(e.firstChild=u),null!==i&&(a?null==i.child&&null!==u.parent&&(i.child=u):null===i.next&&(i.next=u,u.prev=i)),u}(e,t,n,r,o),function Bw(){return Se.lFrame.inI18n}()&&(i.flags|=32);else if(64&i.type){i.type=n,i.value=r,i.attrs=o;const a=function Zi(){const e=Se.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();i.injectorIndex=null===a?-1:a.injectorIndex}return $n(i,!0),i}function ps(e,t,n,r){if(0===n)return-1;const o=t.length;for(let i=0;i<n;i++)t.push(r),e.blueprint.push(r),e.data.push(null);return o}function hy(e,t,n,r,o){const i=ay(t,Gi),a=Ht(),l=2&r;try{Yr(-1),l&&t.length>Ue&&dy(e,t,Ue,!1),jn(l?2:0,o);const h=l?i:null,p=Cu(h);try{null!==h&&(h.dirty=!1),n(r,o)}finally{_u(h,p)}}finally{l&&null===t[Gi]&&cy(t,Gi),Yr(a),jn(l?3:1,o)}}function $d(e,t,n){if(mu(t)){const r=mn(null);try{const i=t.directiveEnd;for(let a=t.directiveStart;a<i;a++){const l=e.data[a];l.contentQueries&&l.contentQueries(1,n[a],a)}}finally{mn(r)}}}function fy(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Gd(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function Gd(e,t,n,r,o,i,a,l,u,h,p){const v=Ue+r,E=v+o,D=function xD(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:ke);return n}(v,E),x="function"==typeof h?h():h;return D[se]={type:e,blueprint:D,template:n,queries:null,viewQuery:l,declTNode:t,data:D.slice().fill(null,v),bindingStartIndex:v,expandoStartIndex:E,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:u,consts:x,incompleteFirstPass:!1,ssrId:p}}let py=e=>null;function gy(e,t,n,r){for(let o in e)if(e.hasOwnProperty(o)){n=null===n?{}:n;const i=e[o];null===r?my(n,t,o,i):r.hasOwnProperty(o)&&my(n,t,r[o],i)}return n}function my(e,t,n,r){e.hasOwnProperty(n)?e[n].push(t,r):e[n]=[t,r]}function yy(e,t,n,r,o,i){for(let h=0;h<r.length;h++)Uu(Ka(n,t),e,r[h].type);!function XD(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}(n,e.data.length,r.length);for(let h=0;h<r.length;h++){const p=r[h];p.providersResolver&&p.providersResolver(p)}let a=!1,l=!1,u=ps(e,t,r.length,null);for(let h=0;h<r.length;h++){const p=r[h];n.mergedAttrs=Bi(n.mergedAttrs,p.hostAttrs),eb(e,n,t,u,p),JD(u,p,o),null!==p.contentQueries&&(n.flags|=4),(null!==p.hostBindings||null!==p.hostAttrs||0!==p.hostVars)&&(n.flags|=64);const v=p.type.prototype;!a&&(v.ngOnChanges||v.ngOnInit||v.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),a=!0),!l&&(v.ngOnChanges||v.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),l=!0),u++}!function $D(e,t,n){const o=t.directiveEnd,i=e.data,a=t.attrs,l=[];let u=null,h=null;for(let p=t.directiveStart;p<o;p++){const v=i[p],E=n?n.get(v):null,x=E?E.outputs:null;u=gy(v.inputs,p,u,E?E.inputs:null),h=gy(v.outputs,p,h,x);const U=null===u||null===a||Ep(t)?null:rb(u,p,a);l.push(U)}null!==u&&(u.hasOwnProperty("class")&&(t.flags|=8),u.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=l,t.inputs=u,t.outputs=h}(e,n,i)}function vy(e,t,n){const r=n.directiveStart,o=n.directiveEnd,i=n.index,a=function $w(){return Se.lFrame.currentDirectiveIndex}();try{Yr(i);for(let l=r;l<o;l++){const u=e.data[l],h=t[l];Du(l),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&ZD(u,h)}}finally{Yr(-1),Du(a)}}function ZD(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function qd(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function JD(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;An(t)&&(n[""]=e)}}function eb(e,t,n,r,o){e.data[r]=o;const i=o.factory||(o.factory=Wr(o.type)),a=new Yi(i,An(o),me);e.blueprint[r]=a,n[r]=a,function KD(e,t,n,r,o){const i=o.hostBindings;if(i){let a=e.hostBindingOpCodes;null===a&&(a=e.hostBindingOpCodes=[]);const l=~t.index;(function qD(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(a)!=l&&a.push(l),a.push(n,r,i)}}(e,t,r,ps(e,n,o.hostVars,ke),o)}function nb(e,t,n,r,o,i){const a=i[t];if(null!==a)for(let l=0;l<a.length;)Cy(r,n,a[l++],a[l++],a[l++])}function Cy(e,t,n,r,o){const i=mn(null);try{const a=e.inputTransforms;null!==a&&a.hasOwnProperty(r)&&(o=a[r].call(t,o)),null!==e.setInput?e.setInput(t,o,n,r):t[r]=o}finally{mn(i)}}function rb(e,t,n){let r=null,o=0;for(;o<n.length;){const i=n[o];if(0!==i)if(5!==i){if("number"==typeof i)break;if(e.hasOwnProperty(i)){null===r&&(r=[]);const a=e[i];for(let l=0;l<a.length;l+=2)if(a[l]===t){r.push(i,a[l+1],n[o+1]);break}}o+=2}else o+=2;else o+=4}return r}function Ey(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r+1];if(-1!==i){const a=e.data[i];Ru(n[r]),a.contentQueries(2,t[i],i)}}}function Rc(e,t){return e[$i]?e[Dp][Sn]=t:e[$i]=t,e[Dp]=t,t}function Zd(e,t,n){Ru(0);const r=mn(null);try{t(e,n)}finally{mn(r)}}function Sy(e,t){const n=e[Ar],r=n?n.get(cr,null):null;r&&r.handleError(t)}function Yd(e,t,n,r,o){for(let i=0;i<n.length;){const a=n[i++],l=n[i++];Cy(e.data[a],t[a],r,l,o)}}function ur(e,t,n){const r=function Ba(e,t){return tt(t[e])}(t,e);!function em(e,t,n){e.setValue(t,n)}(e[Re],r,n)}function ob(e,t){const n=un(t,e),r=n[se];!function ib(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n);const o=n[ut];null!==o&&null===n[or]&&(n[or]=Rd(o,n[Ar])),Qd(r,n,n[ft])}function Qd(e,t,n){Mu(t);try{const r=e.viewQuery;null!==r&&Zd(1,r,n);const o=e.template;null!==o&&hy(e,t,o,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Ey(e,t),e.staticViewQueries&&Zd(2,e.viewQuery,n);const i=e.components;null!==i&&function sb(e,t){for(let n=0;n<t.length;n++)ob(e,t[n])}(t,i)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[Ne]&=-5,ku()}}let Ay=(()=>{class e{constructor(){this.all=new Set,this.queue=new Map}create(n,r,o){const i=typeof Zone>"u"?null:Zone.current,a=function mw(e,t,n){const r=Object.create(yw);n&&(r.consumerAllowSignalWrites=!0),r.fn=e,r.schedule=t;const o=a=>{r.cleanupFn=a};return r.ref={notify:()=>Lp(r),run:()=>{if(r.dirty=!1,r.hasRun&&!Fp(r))return;r.hasRun=!0;const a=Cu(r);try{r.cleanupFn(),r.cleanupFn=Gp,r.fn(o)}finally{_u(r,a)}},cleanup:()=>r.cleanupFn()},r.ref}(n,h=>{this.all.has(h)&&this.queue.set(h,i)},o);let l;this.all.add(a),a.notify();const u=()=>{a.cleanup(),l?.(),this.all.delete(a),this.queue.delete(a)};return l=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=_e({token:e,providedIn:"root",factory:()=>new e})}return e})();function Mc(e,t,n){let r=n?e.styles:null,o=n?e.classes:null,i=0;if(null!==t)for(let a=0;a<t.length;a++){const l=t[a];"number"==typeof l?i=l:1==i?o=C(o,l):2==i&&(r=C(r,l+": "+t[++a]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=o:e.classesWithoutHost=o}function gs(e,t,n,r,o=!1){for(;null!==n;){const i=t[n.index];null!==i&&r.push(tt(i)),Lt(i)&&Dy(i,r);const a=n.type;if(8&a)gs(e,t,n.child,r);else if(32&a){const l=Xu(n,t);let u;for(;u=l();)r.push(u)}else if(16&a){const l=lm(t,n);if(Array.isArray(l))r.push(...l);else{const u=os(t[pt]);gs(u[se],u,l,r,!0)}}n=o?n.projectionNext:n.next}return r}function Dy(e,t){for(let n=Tt;n<e.length;n++){const r=e[n],o=r[se].firstChild;null!==o&&gs(r[se],r,o,t)}e[Bn]!==e[ut]&&t.push(e[Bn])}function kc(e,t,n,r=!0){const o=t[wo],i=o.rendererFactory,a=o.afterRenderEventManager;i.begin?.(),a?.begin();try{by(e,t,e.template,n)}catch(u){throw r&&Sy(t,u),u}finally{i.end?.(),o.effectManager?.flush(),a?.end()}}function by(e,t,n,r){const o=t[Ne];if(256!=(256&o)){t[wo].effectManager?.flush(),Mu(t);try{Jp(t),function sg(e){return Se.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&hy(e,t,n,2,r);const a=3==(3&o);if(a){const h=e.preOrderCheckHooks;null!==h&&Va(t,h,null)}else{const h=e.preOrderHooks;null!==h&&za(t,h,0,null),Pu(t,0)}if(function lb(e){for(let t=Qg(e);null!==t;t=Jg(t)){if(!t[Rp])continue;const n=t[Do];for(let r=0;r<n.length;r++){Dw(n[r])}}}(t),Ry(t,2),null!==e.contentQueries&&Ey(e,t),a){const h=e.contentCheckHooks;null!==h&&Va(t,h)}else{const h=e.contentHooks;null!==h&&za(t,h,1),Pu(t,1)}!function PD(e,t){const n=e.hostBindingOpCodes;if(null===n)return;const r=ay(t,Ki);try{for(let o=0;o<n.length;o++){const i=n[o];if(i<0)Yr(~i);else{const a=i,l=n[++o],u=n[++o];jw(l,a),r.dirty=!1;const h=Cu(r);try{u(2,t[a])}finally{_u(r,h)}}}}finally{null===t[Ki]&&cy(t,Ki),Yr(-1)}}(e,t);const l=e.components;null!==l&&ky(t,l,0);const u=e.viewQuery;if(null!==u&&Zd(2,u,r),a){const h=e.viewCheckHooks;null!==h&&Va(t,h)}else{const h=e.viewHooks;null!==h&&za(t,h,2),Pu(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[Ne]&=-73,Xp(t)}finally{ku()}}}function Ry(e,t){for(let n=Qg(e);null!==n;n=Jg(n))for(let r=Tt;r<n.length;r++)My(n[r],t)}function ub(e,t,n){My(un(t,e),n)}function My(e,t){if(!function Sw(e){return 128==(128&e[Ne])}(e))return;const n=e[se],r=e[Ne];if(80&r&&0===t||1024&r||2===t)by(n,e,n.template,e[ft]);else if(e[ji]>0){Ry(e,1);const o=n.components;null!==o&&ky(e,o,1)}}function ky(e,t,n){for(let r=0;r<t.length;r++)ub(e,t[r],n)}class ms{get rootNodes(){const t=this._lView,n=t[se];return gs(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ft]}set context(t){this._lView[ft]=t}get destroyed(){return 256==(256&this._lView[Ne])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[st];if(Lt(t)){const n=t[8],r=n?n.indexOf(this):-1;r>-1&&(sc(t,r),Ya(n,r))}this._attachedToViewContainer=!1}td(this._lView[se],this._lView)}onDestroy(t){!function tg(e,t){if(256==(256&e[Ne]))throw new Y(911,!1);null===e[Dr]&&(e[Dr]=[]),e[Dr].push(t)}(this._lView,t)}markForCheck(){fs(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ne]&=-129}reattach(){this._lView[Ne]|=128}detectChanges(){kc(this._lView[se],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Y(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function XS(e,t){ss(e,t,t[Re],2,null,null)}(this._lView[se],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Y(902,!1);this._appRef=t}}class db extends ms{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;kc(t[se],t,t[ft],!1)}checkNoChanges(){}get context(){return null}}class Oy extends Tc{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=je(t);return new ys(n,this.ngModule)}}function Ny(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class fb{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=ka(r);const o=this.injector.get(t,Od,r);return o!==Od||n===Od?o:this.parentInjector.get(t,n,r)}}class ys extends Um{get inputs(){const t=this.componentDef,n=t.inputTransforms,r=Ny(t.inputs);if(null!==n)for(const o of r)n.hasOwnProperty(o.propName)&&(o.transform=n[o.propName]);return r}get outputs(){return Ny(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function QT(e){return e.map(YT).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,o){let i=(o=o||this.ngModule)instanceof Dn?o:o?.injector;i&&null!==this.componentDef.getStandaloneInjector&&(i=this.componentDef.getStandaloneInjector(i)||i);const a=i?new fb(t,i):t,l=a.get(jm,null);if(null===l)throw new Y(407,!1);const v={rendererFactory:l,sanitizer:a.get(cD,null),effectManager:a.get(Ay,null),afterRenderEventManager:a.get(Ud,null)},E=l.createRenderer(null,this.componentDef),D=this.componentDef.selectors[0][0]||"div",x=r?function LD(e,t,n,r){const i=r.get(ry,!1)||n===Tn.ShadowDom,a=e.selectRootElement(t,i);return function FD(e){py(e)}(a),a}(E,r,this.componentDef.encapsulation,a):ic(E,D,function hb(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(D)),ee=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let j=null;null!==x&&(j=Rd(x,a,!0));const fe=Gd(0,null,null,1,0,null,null,null,null,null,null),Ee=bc(null,fe,null,ee,null,null,v,E,a,null,j);let Fe,Dt;Mu(Ee);try{const Jn=this.componentDef;let fo,op=null;Jn.findHostDirectiveDefs?(fo=[],op=new Map,Jn.findHostDirectiveDefs(Jn,fo,op),fo.push(Jn)):fo=[Jn];const j1=function gb(e,t){const n=e[se],r=Ue;return e[r]=t,Jo(n,r,2,"#host",null)}(Ee,x),$1=function mb(e,t,n,r,o,i,a){const l=o[se];!function yb(e,t,n,r){for(const o of e)t.mergedAttrs=Bi(t.mergedAttrs,o.hostAttrs);null!==t.mergedAttrs&&(Mc(t,t.mergedAttrs,!0),null!==n&&fm(r,n,t))}(r,e,t,a);let u=null;null!==t&&(u=Rd(t,o[Ar]));const h=i.rendererFactory.createRenderer(t,n);let p=16;n.signals?p=4096:n.onPush&&(p=64);const v=bc(o,fy(n),null,p,o[e.index],e,i,h,null,null,u);return l.firstCreatePass&&qd(l,e,r.length-1),Rc(o,v),o[e.index]=v}(j1,x,Jn,fo,Ee,v,E);Dt=function Qp(e,t){return e.data[t]}(fe,Ue),x&&function Cb(e,t,n,r){if(r)pu(e,n,["ng-version",lD.full]);else{const{attrs:o,classes:i}=function JT(e){const t=[],n=[];let r=1,o=2;for(;r<e.length;){let i=e[r];if("string"==typeof i)2===o?""!==i&&t.push(i,e[++r]):8===o&&n.push(i);else{if(!wn(o))break;o=i}r++}return{attrs:t,classes:n}}(t.selectors[0]);o&&pu(e,n,o),i&&i.length>0&&hm(e,n,i.join(" "))}}(E,Jn,x,r),void 0!==n&&function _b(e,t,n){const r=e.projection=[];for(let o=0;o<t.length;o++){const i=n[o];r.push(null!=i?Array.from(i):null)}}(Dt,this.ngContentSelectors,n),Fe=function vb(e,t,n,r,o,i){const a=St(),l=o[se],u=Qt(a,o);yy(l,o,a,n,null,r);for(let p=0;p<n.length;p++)kt(Qr(o,l,a.directiveStart+p,a),o);vy(l,o,a),u&&kt(u,o);const h=Qr(o,l,a.directiveStart+a.componentOffset,a);if(e[ft]=o[ft]=h,null!==i)for(const p of i)p(h,t);return $d(l,a,e),h}($1,Jn,fo,op,Ee,[Eb]),Qd(fe,Ee,null)}finally{ku()}return new pb(this.componentType,Fe,Zo(Dt,Ee),Ee,Dt)}}class pb extends nD{constructor(t,n,r,o,i){super(),this.location=r,this._rootLView=o,this._tNode=i,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new db(o),this.componentType=t}setInput(t,n){const r=this._tNode.inputs;let o;if(null!==r&&(o=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;const i=this._rootLView;Yd(i[se],i,o,t,n),this.previousInputValues.set(t,n),fs(un(this._tNode.index,i))}}get injector(){return new Ut(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function Eb(){const e=St();$a(W()[se],e)}function ei(e,t,n,r){return function Ot(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}(e,function ko(){return Se.lFrame.bindingIndex++}(),n)?t+re(n)+r:ke}function ih(e,t,n,r,o){const a=o?"class":"style";Yd(e,n,t.inputs[a],a,r)}function fn(e,t,n,r){const o=W(),i=$e(),a=Ue+e,l=o[Re],u=i.firstCreatePass?function nR(e,t,n,r,o,i){const a=t.consts,u=Jo(t,e,2,r,Rr(a,o));return function Kd(e,t,n,r){if(rg()){const o=null===r?null:{"":-1},i=function YD(e,t){const n=e.directiveRegistry;let r=null,o=null;if(n)for(let i=0;i<n.length;i++){const a=n[i];if(Ip(t,a.selectors,!1))if(r||(r=[]),An(a))if(null!==a.findHostDirectiveDefs){const l=[];o=o||new Map,a.findHostDirectiveDefs(a,l,o),r.unshift(...l,a),qd(e,t,l.length)}else r.unshift(a),qd(e,t,0);else o=o||new Map,a.findHostDirectiveDefs?.(a,r,o),r.push(a)}return null===r?null:[r,o]}(e,n);let a,l;null===i?a=l=null:[a,l]=i,null!==a&&yy(e,t,n,a,o,l),o&&function QD(e,t,n){if(t){const r=e.localNames=[];for(let o=0;o<t.length;o+=2){const i=n[t[o+1]];if(null==i)throw new Y(-301,!1);r.push(t[o],i)}}}(n,r,o)}n.mergedAttrs=Bi(n.mergedAttrs,n.attrs)}(t,n,u,Rr(a,i)),null!==u.attrs&&Mc(u,u.attrs,!1),null!==u.mergedAttrs&&Mc(u,u.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,u),u}(a,i,o,t,n,r):i.data[a],h=tv(i,o,u,l,t,e);o[a]=h;const p=Fa(u);return $n(u,!0),fm(l,h,u),32!=(32&u.flags)&&ja()&&cc(i,o,h,u),0===function Rw(){return Se.lFrame.elementDepthCount}()&&kt(h,o),function Mw(){Se.lFrame.elementDepthCount++}(),p&&(function Vd(e,t,n){rg()&&(function WD(e,t,n,r){const o=n.directiveStart,i=n.directiveEnd;qr(n)&&function tb(e,t,n){const r=Qt(t,e),o=fy(n);let a=16;n.signals?a=4096:n.onPush&&(a=64);const l=Rc(e,bc(e,o,null,a,r,t,null,e[wo].rendererFactory.createRenderer(r,n),null,null,null));e[t.index]=l}(t,n,e.data[o+n.componentOffset]),e.firstCreatePass||Ka(n,t),kt(r,t);const a=n.initialInputs;for(let l=o;l<i;l++){const u=e.data[l],h=Qr(t,e,l,n);kt(h,t),null!==a&&nb(0,l-o,h,u,0,a),An(u)&&(un(n.index,t)[ft]=Qr(t,e,l,n))}}(e,t,n,Qt(n,t)),64==(64&n.flags)&&vy(e,t,n))}(i,o,u),$d(i,u,o)),null!==r&&function zd(e,t,n=Qt){const r=t.localNames;if(null!==r){let o=t.index+1;for(let i=0;i<r.length;i+=2){const a=r[i+1],l=-1===a?n(t,e):e[a];e[o++]=l}}}(o,u),fn}function Kn(){let e=St();Su()?function Au(){Se.lFrame.isParent=!1}():(e=e.parent,$n(e,!1));const t=e;(function Ow(e){return Se.skipHydrationRootTNode===e})(t)&&function Lw(){Se.skipHydrationRootTNode=null}(),function kw(){Se.lFrame.elementDepthCount--}();const n=$e();return n.firstCreatePass&&($a(n,e),mu(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function Qw(e){return 0!=(8&e.flags)}(t)&&ih(n,t,W(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function Jw(e){return 0!=(16&e.flags)}(t)&&ih(n,t,W(),t.stylesWithoutHost,!1),Kn}function to(e,t,n,r){return fn(e,t,n,r),Kn(),to}let tv=(e,t,n,r,o,i)=>(Mr(!0),ic(r,o,function pg(){return Se.lFrame.currentNamespace}()));function Hc(e){return!!e&&"function"==typeof e.then}function ov(e){return!!e&&"function"==typeof e.subscribe}function Is(e,t,n,r){const o=W(),i=$e(),a=St();return function sv(e,t,n,r,o,i,a){const l=Fa(r),h=e.firstCreatePass&&function Ty(e){return e.cleanup||(e.cleanup=[])}(e),p=t[ft],v=function Iy(e){return e[To]||(e[To]=[])}(t);let E=!0;if(3&r.type||a){const U=Qt(r,t),q=a?a(U):U,ee=v.length,j=a?Ee=>a(tt(Ee[r.index])):r.index;let fe=null;if(!a&&l&&(fe=function lR(e,t,n,r){const o=e.cleanup;if(null!=o)for(let i=0;i<o.length-1;i+=2){const a=o[i];if(a===n&&o[i+1]===r){const l=t[To],u=o[i+2];return l.length>u?l[u]:null}"string"==typeof a&&(i+=2)}return null}(e,t,o,r.index)),null!==fe)(fe.__ngLastListenerFn__||fe).__ngNextListenerFn__=i,fe.__ngLastListenerFn__=i,E=!1;else{i=cv(r,t,p,i,!1);const Ee=n.listen(q,o,i);v.push(i,Ee),h&&h.push(o,j,ee,ee+1)}}else i=cv(r,t,p,i,!1);const D=r.outputs;let x;if(E&&null!==D&&(x=D[o])){const U=x.length;if(U)for(let q=0;q<U;q+=2){const Fe=t[x[q]][x[q+1]].subscribe(i),Dt=v.length;v.push(i,Fe),h&&h.push(o,r.index,Dt,-(Dt+1))}}}(i,o,o[Re],a,e,t,r),Is}function av(e,t,n,r){try{return jn(6,t,n),!1!==n(r)}catch(o){return Sy(e,o),!1}finally{jn(7,t,n)}}function cv(e,t,n,r,o){return function i(a){if(a===Function)return r;fs(e.componentOffset>-1?un(e.index,t):t);let u=av(t,n,r,a),h=i.__ngNextListenerFn__;for(;h;)u=av(t,n,h,a)&&u,h=h.__ngNextListenerFn__;return o&&!1===u&&a.preventDefault(),u}}function li(e,t=""){const n=W(),r=$e(),o=e+Ue,i=r.firstCreatePass?Jo(r,o,1,t,null):r.data[o],a=Nv(r,n,i,t,e);n[o]=a,ja()&&cc(r,n,a,i),$n(i,!1)}let Nv=(e,t,n,r,o)=>(Mr(!0),function oc(e,t){return e.createText(t)}(t[Re],r));function fh(e){return jc("",e,""),fh}function jc(e,t,n){const r=W(),o=ei(r,e,t,n);return o!==ke&&ur(r,Ht(),o),jc}const di="en-US";let tC=di;class oo{}class DC{}class _h extends oo{constructor(t,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Oy(this);const o=ln(t);this._bootstrapComponents=lr(o.bootstrap),this._r3Injector=Km(t,n,[{provide:oo,useValue:this},{provide:Tc,useValue:this.componentFactoryResolver},...r],g(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Eh extends DC{constructor(t){super(),this.moduleType=t}create(t){return new _h(this.moduleType,t,[])}}class bC extends oo{constructor(t){super(),this.componentFactoryResolver=new Oy(this),this.instance=null;const n=new mc([...t.providers,{provide:oo,useValue:this},{provide:Tc,useValue:this.componentFactoryResolver}],t.parent||gc(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function RC(e,t,n=null){return new bC({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}let sk=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=Rm(0,n.type),o=r.length>0?RC([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,o)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=_e({token:e,providedIn:"environment",factory:()=>new e(ye(Dn))})}return e})();function MC(e){e.getStandaloneInjector=t=>t.get(sk).getOrCreateStandaloneInjector(e)}function Pk(e,t,n,r=!0){const o=t[se];if(function tA(e,t,n,r){const o=Tt+r,i=n.length;r>0&&(n[o-1][Sn]=t),r<i-Tt?(t[Sn]=n[o],Mg(n,Tt+r,t)):(n.push(t),t[Sn]=null),t[st]=n;const a=t[Vi];null!==a&&n!==a&&function nA(e,t){const n=e[Do];t[pt]!==t[st][st][pt]&&(e[Rp]=!0),null===n?e[Do]=[t]:n.push(t)}(a,t);const l=t[Un];null!==l&&l.insertView(e),t[Ne]|=128}(o,t,e,n),r){const i=id(n,e),a=t[Re],l=ac(a,e[Bn]);null!==l&&function JS(e,t,n,r,o,i){r[ut]=o,r[Mt]=t,ss(e,r,n,1,o,i)}(o,e[Mt],a,t,l,i)}}Symbol;let kn=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=Vk}return e})();function Vk(){return function WC(e,t){let n;const r=t[e.index];return Lt(r)?n=r:(n=function _y(e,t,n,r){return[e,!0,!1,t,null,0,r,n,null,null,null]}(r,t,null,e),t[e.index]=n,Rc(t,n)),ZC(n,t,e,r),new KC(n,e,t)}(St(),W())}const zk=kn,KC=class extends zk{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return Zo(this._hostTNode,this._hostLView)}get injector(){return new Ut(this._hostTNode,this._hostLView)}get parentInjector(){const t=qa(this._hostTNode,this._hostLView);if(Lu(t)){const n=Ji(t,this._hostLView),r=Qi(t);return new Ut(n[se].data[r+8],n)}return new Ut(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=qC(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-Tt}createEmbeddedView(t,n,r){let o,i;"number"==typeof r?o=r:null!=r&&(o=r.index,i=r.injector);const l=t.createEmbeddedViewImpl(n||{},i,null);return this.insertImpl(l,o,false),l}createComponent(t,n,r,o,i){const a=t&&!function es(e){return"function"==typeof e}(t);let l;if(a)l=n;else{const U=n||{};l=U.index,r=U.injector,o=U.projectableNodes,i=U.environmentInjector||U.ngModuleRef}const u=a?t:new ys(je(t)),h=r||this.parentInjector;if(!i&&null==u.ngModule){const q=(a?h:this.parentInjector).get(Dn,null);q&&(i=q)}je(u.componentType??{});const D=u.create(h,o,null,i);return this.insertImpl(D.hostView,l,false),D}insert(t,n){return this.insertImpl(t,n,!1)}insertImpl(t,n,r){const o=t._lView;if(function Aw(e){return Lt(e[st])}(o)){const u=this.indexOf(t);if(-1!==u)this.detach(u);else{const h=o[st],p=new KC(h,h[Mt],h[st]);p.detach(p.indexOf(t))}}const a=this._adjustIndex(n),l=this._lContainer;return Pk(l,o,a,!r),t.attachToViewContainerRef(),Mg(wh(l),a,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=qC(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=sc(this._lContainer,n);r&&(Ya(wh(this._lContainer),n),td(r[se],r))}detach(t){const n=this._adjustIndex(t,-1),r=sc(this._lContainer,n);return r&&null!=Ya(wh(this._lContainer),n)?new ms(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function qC(e){return e[8]}function wh(e){return e[8]||(e[8]=[])}let ZC=function YC(e,t,n,r){if(e[Bn])return;let o;o=8&n.type?tt(r):function Gk(e,t){const n=e[Re],r=n.createComment(""),o=Qt(t,e);return Jr(n,ac(n,o),r,function sA(e,t){return e.nextSibling(t)}(n,o),!1),r}(t,n),e[Bn]=o};const E_=new le("Application Initializer");let xh=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=he(E_,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const o of this.appInits){const i=o();if(Hc(i))n.push(i);else if(ov(i)){const a=new Promise((l,u)=>{i.subscribe({complete:l,error:u})});n.push(a)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(o=>{this.reject(o)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=_e({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),I_=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=_e({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();const hr=new le("LocaleId",{providedIn:"root",factory:()=>he(hr,Be.Optional|Be.SkipSelf)||function T0(){return typeof $localize<"u"&&$localize.locale||di}()});let T_=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Nt(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=_e({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class A0{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}let D0=(()=>{class e{compileModuleSync(n){return new Eh(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),i=lr(ln(n).declarations).reduce((a,l)=>{const u=je(l);return u&&a.push(new ys(u)),a},[]);return new A0(r,i)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=_e({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const D_=new le(""),Yc=new le("");let Bh,Hh=(()=>{class e{constructor(n,r,o){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Bh||(function q0(e){Bh=e}(o),o.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Je.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,o){let i=-1;r&&r>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==i),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:i,updateCb:o})}whenStable(n,r,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,o){return[]}static#e=this.\u0275fac=function(r){return new(r||e)(ye(Je),ye(Uh),ye(Yc))};static#t=this.\u0275prov=_e({token:e,factory:e.\u0275fac})}return e})(),Uh=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return Bh?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=_e({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})(),Lr=null;const b_=new le("AllowMultipleToken"),jh=new le("PlatformDestroyListeners"),R_=new le("appBootstrapListener");function O_(e,t,n=[]){const r=`Platform: ${t}`,o=new le(r);return(i=[])=>{let a=$h();if(!a||a.injector.get(b_,!1)){const l=[...n,...i,{provide:o,useValue:!0}];e?e(l):function Y0(e){if(Lr&&!Lr.get(b_,!1))throw new Y(400,!1);(function M_(){!function dw(e){jp=e}(()=>{throw new Y(600,!1)})})(),Lr=e;const t=e.get(P_);(function k_(e){e.get(Pm,null)?.forEach(n=>n())})(e)}(function N_(e=[],t){return bn.create({name:t,providers:[{provide:vd,useValue:"platform"},{provide:jh,useValue:new Set([()=>Lr=null])},...e]})}(l,r))}return function J0(e){const t=$h();if(!t)throw new Y(401,!1);return t}()}}function $h(){return Lr?.get(P_)??null}let P_=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const o=function X0(e="zone.js",t){return"noop"===e?new ED:"zone.js"===e?new Je(t):e}(r?.ngZone,function x_(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return o.run(()=>{const i=function ik(e,t,n){return new _h(e,t,n)}(n.moduleType,this.injector,function B_(e){return[{provide:Je,useFactory:e},{provide:us,multi:!0,useFactory:()=>{const t=he(tO,{optional:!0});return()=>t.initialize()}},{provide:U_,useFactory:eO},{provide:Qm,useFactory:Jm}]}(()=>o)),a=i.injector.get(cr,null);return o.runOutsideAngular(()=>{const l=o.onError.subscribe({next:u=>{a.handleError(u)}});i.onDestroy(()=>{Qc(this._modules,i),l.unsubscribe()})}),function L_(e,t,n){try{const r=n();return Hc(r)?r.catch(o=>{throw t.runOutsideAngular(()=>e.handleError(o)),o}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(a,o,()=>{const l=i.injector.get(xh);return l.runInitializers(),l.donePromise.then(()=>(function nC(e){gn(e,"Expected localeId to be defined"),"string"==typeof e&&(tC=e.toLowerCase().replace(/_/g,"-"))}(i.injector.get(hr,di)||di),this._moduleDoBootstrap(i),i))})})}bootstrapModule(n,r=[]){const o=F_({},r);return function W0(e,t,n){const r=new Eh(n);return Promise.resolve(r)}(0,0,n).then(i=>this.bootstrapModuleFactory(i,o))}_moduleDoBootstrap(n){const r=n.injector.get(pi);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(o=>r.bootstrap(o));else{if(!n.instance.ngDoBootstrap)throw new Y(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Y(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(jh,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||e)(ye(bn))};static#t=this.\u0275prov=_e({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();function F_(e,t){return Array.isArray(t)?t.reduce(F_,e):{...e,...t}}let pi=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=he(U_),this.zoneIsStable=he(Qm),this.componentTypes=[],this.components=[],this.isStable=he(T_).hasPendingTasks.pipe(V(n=>n?ge(!1):this.zoneIsStable),function s(e,t=pe){return e=e??c,Le((n,r)=>{let o,i=!0;n.subscribe(Ve(r,a=>{const l=t(a);(i||!e(o,l))&&(i=!1,o=l,r.next(a))}))})}(),Aa()),this._injector=he(Dn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const o=n instanceof Um;if(!this._injector.get(xh).done)throw!o&&function Io(e){const t=je(e)||It(e)||xt(e);return null!==t&&t.standalone}(n),new Y(405,!1);let a;a=o?n:this._injector.get(Tc).resolveComponentFactory(n),this.componentTypes.push(a.componentType);const l=function Z0(e){return e.isBoundToModule}(a)?void 0:this._injector.get(oo),h=a.create(bn.NULL,[],r||a.selector,l),p=h.location.nativeElement,v=h.injector.get(D_,null);return v?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),Qc(this.components,h),v?.unregisterApplication(p)}),this._loadComponent(h),h}tick(){if(this._runningTick)throw new Y(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Qc(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(R_,[]);r.push(...this._bootstrapListeners),r.forEach(o=>o(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Qc(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new Y(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=_e({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Qc(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const U_=new le("",{providedIn:"root",factory:()=>he(cr).handleError.bind(void 0)});function eO(){const e=he(Je),t=he(cr);return n=>e.runOutsideAngular(()=>t.handleError(n))}let tO=(()=>{class e{constructor(){this.zone=he(Je),this.applicationRef=he(pi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=_e({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();let Jc=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=oO}return e})();function oO(e){return function iO(e,t,n){if(qr(e)&&!n){const r=un(e.index,t);return new ms(r,r)}return 47&e.type?new ms(t[pt],t):null}(St(),W(),16==(16&e))}const vO=O_(null,"core",[]);let CO=(()=>{class e{constructor(n){}static#e=this.\u0275fac=function(r){return new(r||e)(ye(pi))};static#t=this.\u0275mod=Kr({type:e});static#n=this.\u0275inj=wr({})}return e})(),Zh=null;function gi(){return Zh}class OO{}const On=new le("DocumentToken");let oE=(()=>{class e{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=_e({token:e,factory:function(){return he(NO)},providedIn:"platform"})}return e})(),NO=(()=>{class e extends oE{constructor(){super(),this._doc=he(On),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return gi().getBaseHref(this._doc)}onPopState(n){const r=gi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=gi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,o){this._history.pushState(n,r,o)}replaceState(n,r,o){this._history.replaceState(n,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=_e({token:e,factory:function(){return new e},providedIn:"platform"})}return e})();function iE(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function sE(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function so(e){return e&&"?"!==e[0]?"?"+e:e}let rl=(()=>{class e{historyGo(n){throw new Error("Not implemented")}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=_e({token:e,factory:function(){return he(xO)},providedIn:"root"})}return e})();const PO=new le("appBaseHref");let xO=(()=>{class e extends rl{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??he(On).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return iE(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+so(this._platformLocation.search),o=this._platformLocation.hash;return o&&n?`${r}${o}`:r}pushState(n,r,o,i){const a=this.prepareExternalUrl(o+so(i));this._platformLocation.pushState(n,r,a)}replaceState(n,r,o,i){const a=this.prepareExternalUrl(o+so(i));this._platformLocation.replaceState(n,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||e)(ye(oE),ye(PO,8))};static#t=this.\u0275prov=_e({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Ps=(()=>{class e{constructor(n){this._subject=new Bt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function HO(e){if(new RegExp("^(https?:)?//").test(e)){const[,n]=e.split(/\/\/[^\/]+/);return n}return e}(sE(aE(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+so(r))}normalize(n){return e.stripTrailingSlash(function FO(e,t){if(!e||!t.startsWith(e))return t;const n=t.substring(e.length);return""===n||["/",";","?","#"].includes(n[0])?n:t}(this._basePath,aE(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",o=null){this._locationStrategy.pushState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+so(r)),o)}replaceState(n,r="",o=null){this._locationStrategy.replaceState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+so(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(o=>o(n,r))}subscribe(n,r,o){return this._subject.subscribe({next:n,error:r,complete:o})}static#e=this.normalizeQueryParams=so;static#t=this.joinWithSlash=iE;static#n=this.stripTrailingSlash=sE;static#r=this.\u0275fac=function(r){return new(r||e)(ye(rl))};static#o=this.\u0275prov=_e({token:e,factory:function(){return function LO(){return new Ps(ye(rl))}()},providedIn:"root"})}return e})();function aE(e){return e.replace(/\/index.html$/,"")}let IE=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Kr({type:e});static#n=this.\u0275inj=wr({})}return e})();const TE="browser";function wE(e){return e===TE}function SE(e){return"server"===e}class AP extends OO{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class pf extends AP{static makeCurrent(){!function kO(e){Zh||(Zh=e)}(new pf)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function DP(){return Hs=Hs||document.querySelector("base"),Hs?Hs.getAttribute("href"):null}();return null==n?null:function bP(e){ml=ml||document.createElement("a"),ml.setAttribute("href",e);const t=ml.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){Hs=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function IN(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const r=n.indexOf("="),[o,i]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(o.trim()===t)return decodeURIComponent(i)}return null}(document.cookie,t)}}let ml,Hs=null,MP=(()=>{class e{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=_e({token:e,factory:e.\u0275fac})}return e})();const gf=new le("EventManagerPlugins");let ME=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(o=>{o.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,o){return this._findPluginFor(r).addEventListener(n,r,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(i=>i.supports(n)),!r)throw new Y(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||e)(ye(gf),ye(Je))};static#t=this.\u0275prov=_e({token:e,factory:e.\u0275fac})}return e})();class kE{constructor(t){this._doc=t}}const mf="ng-app-id";let OE=(()=>{class e{constructor(n,r,o,i={}){this.doc=n,this.appId=r,this.nonce=o,this.platformId=i,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=SE(i),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(o=>o.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${mf}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(o=>{null!=o.textContent&&r.set(o.textContent,o)}),r}return null}changeUsageCount(n,r){const o=this.styleRef;if(o.has(n)){const i=o.get(n);return i.usage+=r,i.usage}return o.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const o=this.styleNodesInDOM,i=o?.get(r);if(i?.parentNode===n)return o.delete(r),i.removeAttribute(mf),i;{const a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(mf,this.appId),a}}addStyleToHost(n,r){const o=this.getStyleElement(n,r);n.appendChild(o);const i=this.styleRef,a=i.get(r)?.elements;a?a.push(o):i.set(r,{elements:[o],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||e)(ye(On),ye(yc),ye(xm,8),ye(Nr))};static#t=this.\u0275prov=_e({token:e,factory:e.\u0275fac})}return e})();const yf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},vf=/%COMP%/g,PP=new le("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function PE(e,t){return t.map(n=>n.replace(vf,e))}let xE=(()=>{class e{constructor(n,r,o,i,a,l,u,h=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=i,this.doc=a,this.platformId=l,this.ngZone=u,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=SE(l),this.defaultRenderer=new Cf(n,a,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Tn.ShadowDom&&(r={...r,encapsulation:Tn.Emulated});const o=this.getOrCreateRenderer(n,r);return o instanceof FE?o.applyToHost(n):o instanceof _f&&o.applyStyles(),o}getOrCreateRenderer(n,r){const o=this.rendererByCompId;let i=o.get(r.id);if(!i){const a=this.doc,l=this.ngZone,u=this.eventManager,h=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,v=this.platformIsServer;switch(r.encapsulation){case Tn.Emulated:i=new FE(u,h,r,this.appId,p,a,l,v);break;case Tn.ShadowDom:return new HP(u,h,n,r,a,l,this.nonce,v);default:i=new _f(u,h,r,p,a,l,v)}o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||e)(ye(ME),ye(OE),ye(yc),ye(PP),ye(On),ye(Nr),ye(Je),ye(xm))};static#t=this.\u0275prov=_e({token:e,factory:e.\u0275fac})}return e})();class Cf{constructor(t,n,r,o){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=o,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(yf[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(LE(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(LE(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?this.doc.querySelector(t):t;if(!r)throw new Y(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,o){if(o){n=o+":"+n;const i=yf[o];i?t.setAttributeNS(i,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const o=yf[r];o?t.removeAttributeNS(o,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,o){o&(kr.DashCase|kr.Important)?t.style.setProperty(n,r,o&kr.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&kr.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t[n]=r}setValue(t,n){t.nodeValue=n}listen(t,n,r){if("string"==typeof t&&!(t=gi().getGlobalEventTarget(this.doc,t)))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if("__ngUnwrap__"===n)return t;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))&&n.preventDefault()}}}function LE(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class HP extends Cf{constructor(t,n,r,o,i,a,l,u){super(t,i,a,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const h=PE(o.id,o.styles);for(const p of h){const v=document.createElement("style");l&&v.setAttribute("nonce",l),v.textContent=p,this.shadowRoot.appendChild(v)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class _f extends Cf{constructor(t,n,r,o,i,a,l,u){super(t,i,a,l),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=o,this.styles=u?PE(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class FE extends _f{constructor(t,n,r,o,i,a,l,u){const h=o+"-"+r.id;super(t,n,r,i,a,l,u,h),this.contentAttr=function xP(e){return"_ngcontent-%COMP%".replace(vf,e)}(h),this.hostAttr=function LP(e){return"_nghost-%COMP%".replace(vf,e)}(h)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}let UP=(()=>{class e extends kE{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,o){return n.addEventListener(r,o,!1),()=>this.removeEventListener(n,r,o)}removeEventListener(n,r,o){return n.removeEventListener(r,o)}static#e=this.\u0275fac=function(r){return new(r||e)(ye(On))};static#t=this.\u0275prov=_e({token:e,factory:e.\u0275fac})}return e})();const HE=["alt","control","meta","shift"],BP={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},jP={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let $P=(()=>{class e extends kE{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,r,o){const i=e.parseEventName(r),a=e.eventCallback(i.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>gi().onAndCancel(n,i.domEventName,a))}static parseEventName(n){const r=n.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const i=e._normalizeKey(r.pop());let a="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),a="code."),HE.forEach(h=>{const p=r.indexOf(h);p>-1&&(r.splice(p,1),a+=h+".")}),a+=i,0!=r.length||0===i.length)return null;const u={};return u.domEventName=o,u.fullKey=a,u}static matchEventFullKeyCode(n,r){let o=BP[n.key]||n.key,i="";return r.indexOf("code.")>-1&&(o=n.code,i="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),HE.forEach(a=>{a!==o&&(0,jP[a])(n)&&(i+=a+".")}),i+=o,i===r)}static eventCallback(n,r,o){return i=>{e.matchEventFullKeyCode(i,n)&&o.runGuarded(()=>r(i))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||e)(ye(On))};static#t=this.\u0275prov=_e({token:e,factory:e.\u0275fac})}return e})();const KP=O_(vO,"browser",[{provide:Nr,useValue:TE},{provide:Pm,useValue:function VP(){pf.makeCurrent()},multi:!0},{provide:On,useFactory:function GP(){return function pA(e){cd=e}(document),document},deps:[]}]),qP=new le(""),jE=[{provide:Yc,useClass:class RP{addToWindow(t){et.getAngularTestability=(r,o=!0)=>{const i=t.findTestabilityInTree(r,o);if(null==i)throw new Y(5103,!1);return i},et.getAllAngularTestabilities=()=>t.getAllTestabilities(),et.getAllAngularRootElements=()=>t.getAllRootElements(),et.frameworkStabilizers||(et.frameworkStabilizers=[]),et.frameworkStabilizers.push(r=>{const o=et.getAllAngularTestabilities();let i=o.length,a=!1;const l=function(u){a=a||u,i--,0==i&&r(a)};o.forEach(u=>{u.whenStable(l)})})}findTestabilityInTree(t,n,r){return null==n?null:t.getTestability(n)??(r?gi().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:D_,useClass:Hh,deps:[Je,Uh,Yc]},{provide:Hh,useClass:Hh,deps:[Je,Uh,Yc]}],$E=[{provide:vd,useValue:"root"},{provide:cr,useFactory:function zP(){return new cr},deps:[]},{provide:gf,useClass:UP,multi:!0,deps:[On,Je,Nr]},{provide:gf,useClass:$P,multi:!0,deps:[On]},xE,OE,ME,{provide:jm,useExisting:xE},{provide:class rP{},useClass:MP,deps:[]},[]];let WP=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:yc,useValue:n.appId}]}}static#e=this.\u0275fac=function(r){return new(r||e)(ye(qP,12))};static#t=this.\u0275mod=Kr({type:e});static#n=this.\u0275inj=wr({providers:[...$E,...jE],imports:[IE,CO]})}return e})(),VE=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static#e=this.\u0275fac=function(r){return new(r||e)(ye(On))};static#t=this.\u0275prov=_e({token:e,factory:function(r){let o=null;return o=r?new r:function YP(){return new VE(ye(On))}(),o},providedIn:"root"})}return e})();typeof window<"u"&&window;var zt=A(97);function tn(e,t){return Le((n,r)=>{let o=0;n.subscribe(Ve(r,i=>e.call(t,i,o++)&&r.next(i)))})}function qE(e){return Le((t,n)=>{Et(e).subscribe(Ve(n,()=>n.complete(),X)),!n.closed&&t.subscribe(n)})}var it=A(593);class tx{static getInteractionStatusFromEvent(t,n){switch(t.eventType){case zt.t.LOGIN_START:return it.$H.Login;case zt.t.SSO_SILENT_START:return it.$H.SsoSilent;case zt.t.ACQUIRE_TOKEN_START:if(t.interactionType===it.s_.Redirect||t.interactionType===it.s_.Popup)return it.$H.AcquireToken;break;case zt.t.HANDLE_REDIRECT_START:return it.$H.HandleRedirect;case zt.t.LOGOUT_START:return it.$H.Logout;case zt.t.SSO_SILENT_SUCCESS:case zt.t.SSO_SILENT_FAILURE:if(n&&n!==it.$H.SsoSilent)break;return it.$H.None;case zt.t.LOGOUT_END:if(n&&n!==it.$H.Logout)break;return it.$H.None;case zt.t.HANDLE_REDIRECT_END:if(n&&n!==it.$H.HandleRedirect)break;return it.$H.None;case zt.t.LOGIN_SUCCESS:case zt.t.LOGIN_FAILURE:case zt.t.ACQUIRE_TOKEN_SUCCESS:case zt.t.ACQUIRE_TOKEN_FAILURE:case zt.t.RESTORE_FROM_BFCACHE:if(t.interactionType===it.s_.Redirect||t.interactionType===it.s_.Popup){if(n&&n!==it.$H.Login&&n!==it.$H.AcquireToken)break;return it.$H.None}}return null}}var nx=A(325),rx=A(581),ox=A(484);const If={now:()=>(If.delegate||Date).now(),delegate:void 0};class ix extends Qe{constructor(t=1/0,n=1/0,r=If){super(),this._bufferSize=t,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,n)}next(t){const{isStopped:n,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:i,_windowTime:a}=this;n||(r.push(t),!o&&r.push(i.now()+a)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(t),{_infiniteTimeWindow:r,_buffer:o}=this,i=o.slice();for(let a=0;a<i.length&&!t.closed;a+=r?1:2)t.next(i[a]);return this._checkFinalizedStatuses(t),n}_trimBuffer(){const{_bufferSize:t,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:o}=this,i=(o?1:2)*t;if(t<1/0&&i<r.length&&r.splice(0,r.length-i),!o){const a=n.now();let l=0;for(let u=1;u<r.length&&r[u]<=a;u+=2)l=u;l&&r.splice(0,l+1)}}}function yi(e,t){return _(t)?lt(e,t,1):lt(e,1)}function Hr(e){return Le((t,n)=>{let i,r=null,o=!1;r=t.subscribe(Ve(n,void 0,void 0,a=>{i=Et(e(a,Hr(e)(t))),r?(r.unsubscribe(),r=null,i.subscribe(n)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(n))})}const yl=m(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:ax}=Array,{getPrototypeOf:cx,prototype:lx,keys:ux}=Object;const{isArray:fx}=Array;function WE(e){return M(t=>function px(e,t){return fx(t)?e(...t):e(t)}(e,t))}function ZE(...e){const t=Ir(e),n=function Xl(e){return _(Er(e))?e.pop():void 0}(e),{args:r,keys:o}=function dx(e){if(1===e.length){const t=e[0];if(ax(t))return{args:t,keys:null};if(function hx(e){return e&&"object"==typeof e&&cx(e)===lx}(t)){const n=ux(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}(e);if(0===r.length)return Ye([],t);const i=new ve(function mx(e,t,n=pe){return r=>{YE(t,()=>{const{length:o}=e,i=new Array(o);let a=o,l=o;for(let u=0;u<o;u++)YE(t,()=>{const h=Ye(e[u],t);let p=!1;h.subscribe(Ve(r,v=>{i[u]=v,p||(p=!0,l--),l||r.next(n(i.slice()))},()=>{--a||r.complete()}))},r)},r)}}(r,t,o?a=>function gx(e,t){return e.reduce((n,r,o)=>(n[r]=t[o],n),{})}(o,a):pe));return n?i.pipe(WE(n)):i}function YE(e,t,n){e?Rt(n,e,t):t()}function Us(...e){return function yx(){return _o(1)}()(Ye(e,Ir(e)))}function vl(e){return new ve(t=>{Et(e()).subscribe(t)})}function vi(e,t){const n=_(e)?e:()=>e,r=o=>o.error(n());return new ve(t?o=>t.schedule(r,0,o):r)}function Tf(){return Le((e,t)=>{let n=null;e._refCount++;const r=Ve(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(n=null);const o=e._connection,i=n;n=null,o&&(!i||o===i)&&o.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}class wf extends ve{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,mt(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new F;const n=this.getSubject();t.add(this.source.subscribe(Ve(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=F.EMPTY)}return t}refCount(){return Tf()(this)}}function nn(e){return e<=0?()=>on:Le((t,n)=>{let r=0;t.subscribe(Ve(n,o=>{++r<=e&&(n.next(o),e<=r&&n.complete())}))})}function Cl(e){return Le((t,n)=>{let r=!1;t.subscribe(Ve(n,o=>{r=!0,n.next(o)},()=>{r||n.next(e),n.complete()}))})}function QE(e=Cx){return Le((t,n)=>{let r=!1;t.subscribe(Ve(n,o=>{r=!0,n.next(o)},()=>r?n.complete():n.error(e())))})}function Cx(){return new yl}function ao(e,t){const n=arguments.length>=2;return r=>r.pipe(e?tn((o,i)=>e(o,i,r)):pe,nn(1),n?Cl(t):QE(()=>new yl))}function At(e,t,n){const r=_(e)||t||n?{next:e,error:t,complete:n}:e;return r?Le((o,i)=>{var a;null===(a=r.subscribe)||void 0===a||a.call(r);let l=!0;o.subscribe(Ve(i,u=>{var h;null===(h=r.next)||void 0===h||h.call(r,u),i.next(u)},()=>{var u;l=!1,null===(u=r.complete)||void 0===u||u.call(r),i.complete()},u=>{var h;l=!1,null===(h=r.error)||void 0===h||h.call(r,u),i.error(u)},()=>{var u,h;l&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(h=r.finalize)||void 0===h||h.call(r)}))}):pe}function Sf(e){return e<=0?()=>on:Le((t,n)=>{let r=[];t.subscribe(Ve(n,o=>{r.push(o),e<r.length&&r.shift()},()=>{for(const o of r)n.next(o);n.complete()},void 0,()=>{r=null}))})}function JE(e){return M(()=>e)}function Af(e){return Le((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}const xe="primary",Bs=Symbol("RouteTitle");class Tx{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Ci(e){return new Tx(e)}function wx(e,t,n){const r=n.path.split("/");if(r.length>e.length||"full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const o={};for(let i=0;i<r.length;i++){const a=r[i],l=e[i];if(a.startsWith(":"))o[a.substring(1)]=l;else if(a!==l.path)return null}return{consumed:e.slice(0,r.length),posParams:o}}function Zn(e,t){const n=e?Object.keys(e):void 0,r=t?Object.keys(t):void 0;if(!n||!r||n.length!=r.length)return!1;let o;for(let i=0;i<n.length;i++)if(o=n[i],!XE(e[o],t[o]))return!1;return!0}function XE(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((o,i)=>r[i]===o)}return e===t}function eI(e){return e.length>0?e[e.length-1]:null}function Ur(e){return function sx(e){return!!e&&(e instanceof ve||_(e.lift)&&_(e.subscribe))}(e)?e:Hc(e)?Ye(Promise.resolve(e)):ge(e)}const Ax={exact:function rI(e,t,n){if(!co(e.segments,t.segments)||!_l(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!e.children[r]||!rI(e.children[r],t.children[r],n))return!1;return!0},subset:oI},tI={exact:function Dx(e,t){return Zn(e,t)},subset:function bx(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>XE(e[n],t[n]))},ignored:()=>!0};function nI(e,t,n){return Ax[n.paths](e.root,t.root,n.matrixParams)&&tI[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function oI(e,t,n){return iI(e,t,t.segments,n)}function iI(e,t,n,r){if(e.segments.length>n.length){const o=e.segments.slice(0,n.length);return!(!co(o,n)||t.hasChildren()||!_l(o,n,r))}if(e.segments.length===n.length){if(!co(e.segments,n)||!_l(e.segments,n,r))return!1;for(const o in t.children)if(!e.children[o]||!oI(e.children[o],t.children[o],r))return!1;return!0}{const o=n.slice(0,e.segments.length),i=n.slice(e.segments.length);return!!(co(e.segments,o)&&_l(e.segments,o,r)&&e.children[xe])&&iI(e.children[xe],t,i,r)}}function _l(e,t,n){return t.every((r,o)=>tI[n](e[o].parameters,r.parameters))}class _i{constructor(t=new Ze([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ci(this.queryParams)),this._queryParamMap}toString(){return kx.serialize(this)}}class Ze{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return El(this)}}class js{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Ci(this.parameters)),this._parameterMap}toString(){return cI(this)}}function co(e,t){return e.length===t.length&&e.every((n,r)=>n.path===t[r].path)}let $s=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=_e({token:e,factory:function(){return new Df},providedIn:"root"})}return e})();class Df{parse(t){const n=new $x(t);return new _i(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){const n=`/${Vs(t.root,!0)}`,r=function Px(e){const t=Object.keys(e).map(n=>{const r=e[n];return Array.isArray(r)?r.map(o=>`${Il(n)}=${Il(o)}`).join("&"):`${Il(n)}=${Il(r)}`}).filter(n=>!!n);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${n}${r}${"string"==typeof t.fragment?`#${function Ox(e){return encodeURI(e)}(t.fragment)}`:""}`}}const kx=new Df;function El(e){return e.segments.map(t=>cI(t)).join("/")}function Vs(e,t){if(!e.hasChildren())return El(e);if(t){const n=e.children[xe]?Vs(e.children[xe],!1):"",r=[];return Object.entries(e.children).forEach(([o,i])=>{o!==xe&&r.push(`${o}:${Vs(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function Mx(e,t){let n=[];return Object.entries(e.children).forEach(([r,o])=>{r===xe&&(n=n.concat(t(o,r)))}),Object.entries(e.children).forEach(([r,o])=>{r!==xe&&(n=n.concat(t(o,r)))}),n}(e,(r,o)=>o===xe?[Vs(e.children[xe],!1)]:[`${o}:${Vs(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[xe]?`${El(e)}/${n[0]}`:`${El(e)}/(${n.join("//")})`}}function sI(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Il(e){return sI(e).replace(/%3B/gi,";")}function bf(e){return sI(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Tl(e){return decodeURIComponent(e)}function aI(e){return Tl(e.replace(/\+/g,"%20"))}function cI(e){return`${bf(e.path)}${function Nx(e){return Object.keys(e).map(t=>`;${bf(t)}=${bf(e[t])}`).join("")}(e.parameters)}`}const xx=/^[^\/()?;#]+/;function Rf(e){const t=e.match(xx);return t?t[0]:""}const Lx=/^[^\/()?;=#]+/,Hx=/^[^=?&#]+/,Bx=/^[^&#]+/;class $x{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ze([],{}):new Ze([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[xe]=new Ze(t,n)),r}parseSegment(){const t=Rf(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Y(4009,!1);return this.capture(t),new js(Tl(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const n=function Fx(e){const t=e.match(Lx);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=Rf(this.remaining);o&&(r=o,this.capture(r))}t[Tl(n)]=Tl(r)}parseQueryParam(t){const n=function Ux(e){const t=e.match(Hx);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const a=function jx(e){const t=e.match(Bx);return t?t[0]:""}(this.remaining);a&&(r=a,this.capture(r))}const o=aI(n),i=aI(r);if(t.hasOwnProperty(o)){let a=t[o];Array.isArray(a)||(a=[a],t[o]=a),a.push(i)}else t[o]=i}parseParens(t){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Rf(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Y(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=xe);const a=this.parseChildren();n[i]=1===Object.keys(a).length?a[xe]:new Ze([],a),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Y(4011,!1)}}function lI(e){return e.segments.length>0?new Ze([],{[xe]:e}):e}function uI(e){const t={};for(const r of Object.keys(e.children)){const i=uI(e.children[r]);if(r===xe&&0===i.segments.length&&i.hasChildren())for(const[a,l]of Object.entries(i.children))t[a]=l;else(i.segments.length>0||i.hasChildren())&&(t[r]=i)}return function Vx(e){if(1===e.numberOfChildren&&e.children[xe]){const t=e.children[xe];return new Ze(e.segments.concat(t.segments),t.children)}return e}(new Ze(e.segments,t))}function lo(e){return e instanceof _i}function dI(e){let t;const o=lI(function n(i){const a={};for(const u of i.children){const h=n(u);a[u.outlet]=h}const l=new Ze(i.url,a);return i===e&&(t=l),l}(e.root));return t??o}function hI(e,t,n,r){let o=e;for(;o.parent;)o=o.parent;if(0===t.length)return Mf(o,o,o,n,r);const i=function Gx(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new pI(!0,0,e);let t=0,n=!1;const r=e.reduce((o,i,a)=>{if("object"==typeof i&&null!=i){if(i.outlets){const l={};return Object.entries(i.outlets).forEach(([u,h])=>{l[u]="string"==typeof h?h.split("/"):h}),[...o,{outlets:l}]}if(i.segmentPath)return[...o,i.segmentPath]}return"string"!=typeof i?[...o,i]:0===a?(i.split("/").forEach((l,u)=>{0==u&&"."===l||(0==u&&""===l?n=!0:".."===l?t++:""!=l&&o.push(l))}),o):[...o,i]},[]);return new pI(n,t,r)}(t);if(i.toRoot())return Mf(o,o,new Ze([],{}),n,r);const a=function Kx(e,t,n){if(e.isAbsolute)return new Sl(t,!0,0);if(!n)return new Sl(t,!1,NaN);if(null===n.parent)return new Sl(n,!0,0);const r=wl(e.commands[0])?0:1;return function qx(e,t,n){let r=e,o=t,i=n;for(;i>o;){if(i-=o,r=r.parent,!r)throw new Y(4005,!1);o=r.segments.length}return new Sl(r,!1,o-i)}(n,n.segments.length-1+r,e.numberOfDoubleDots)}(i,o,e),l=a.processChildren?Gs(a.segmentGroup,a.index,i.commands):gI(a.segmentGroup,a.index,i.commands);return Mf(o,a.segmentGroup,l,n,r)}function wl(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function zs(e){return"object"==typeof e&&null!=e&&e.outlets}function Mf(e,t,n,r,o){let a,i={};r&&Object.entries(r).forEach(([u,h])=>{i[u]=Array.isArray(h)?h.map(p=>`${p}`):`${h}`}),a=e===t?n:fI(e,t,n);const l=lI(uI(a));return new _i(l,i,o)}function fI(e,t,n){const r={};return Object.entries(e.children).forEach(([o,i])=>{r[o]=i===t?n:fI(i,t,n)}),new Ze(e.segments,r)}class pI{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&wl(r[0]))throw new Y(4003,!1);const o=r.find(zs);if(o&&o!==eI(r))throw new Y(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Sl{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}}function gI(e,t,n){if(e||(e=new Ze([],{})),0===e.segments.length&&e.hasChildren())return Gs(e,t,n);const r=function Zx(e,t,n){let r=0,o=t;const i={match:!1,pathIndex:0,commandIndex:0};for(;o<e.segments.length;){if(r>=n.length)return i;const a=e.segments[o],l=n[r];if(zs(l))break;const u=`${l}`,h=r<n.length-1?n[r+1]:null;if(o>0&&void 0===u)break;if(u&&h&&"object"==typeof h&&void 0===h.outlets){if(!yI(u,h,a))return i;r+=2}else{if(!yI(u,{},a))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(e,t,n),o=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const i=new Ze(e.segments.slice(0,r.pathIndex),{});return i.children[xe]=new Ze(e.segments.slice(r.pathIndex),e.children),Gs(i,0,o)}return r.match&&0===o.length?new Ze(e.segments,{}):r.match&&!e.hasChildren()?kf(e,t,n):r.match?Gs(e,0,o):kf(e,t,n)}function Gs(e,t,n){if(0===n.length)return new Ze(e.segments,{});{const r=function Wx(e){return zs(e[0])?e[0].outlets:{[xe]:e}}(n),o={};if(Object.keys(r).some(i=>i!==xe)&&e.children[xe]&&1===e.numberOfChildren&&0===e.children[xe].segments.length){const i=Gs(e.children[xe],t,n);return new Ze(e.segments,i.children)}return Object.entries(r).forEach(([i,a])=>{"string"==typeof a&&(a=[a]),null!==a&&(o[i]=gI(e.children[i],t,a))}),Object.entries(e.children).forEach(([i,a])=>{void 0===r[i]&&(o[i]=a)}),new Ze(e.segments,o)}}function kf(e,t,n){const r=e.segments.slice(0,t);let o=0;for(;o<n.length;){const i=n[o];if(zs(i)){const u=Yx(i.outlets);return new Ze(r,u)}if(0===o&&wl(n[0])){r.push(new js(e.segments[t].path,mI(n[0]))),o++;continue}const a=zs(i)?i.outlets[xe]:`${i}`,l=o<n.length-1?n[o+1]:null;a&&l&&wl(l)?(r.push(new js(a,mI(l))),o+=2):(r.push(new js(a,{})),o++)}return new Ze(r,{})}function Yx(e){const t={};return Object.entries(e).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(t[n]=kf(new Ze([],{}),0,r))}),t}function mI(e){const t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function yI(e,t,n){return e==n.path&&Zn(t,n.parameters)}const Ks="imperative";class Yn{constructor(t,n){this.id=t,this.url=n}}class Of extends Yn{constructor(t,n,r="imperative",o=null){super(t,n),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ei extends Yn{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class qs extends Yn{constructor(t,n,r,o){super(t,n),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ws extends Yn{constructor(t,n,r,o){super(t,n),this.reason=r,this.code=o,this.type=16}}class Al extends Yn{constructor(t,n,r,o){super(t,n),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class vI extends Yn{constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qx extends Yn{constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jx extends Yn{constructor(t,n,r,o,i){super(t,n),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Xx extends Yn{constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class eL extends Yn{constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tL{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class nL{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class rL{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class oL{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class iL{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sL{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Nf{}class Pf{constructor(t){this.url=t}}class aL{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Zs,this.attachRef=null}}let Zs=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const o=this.getOrCreateContext(n);o.outlet=r,this.contexts.set(n,o)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new aL,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=_e({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class CI{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){const n=xf(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){const n=xf(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const n=Lf(t,this._root);return n.length<2?[]:n[n.length-2].children.map(o=>o.value).filter(o=>o!==t)}pathFromRoot(t){return Lf(t,this._root).map(n=>n.value)}}function xf(e,t){if(e===t.value)return t;for(const n of t.children){const r=xf(e,n);if(r)return r}return null}function Lf(e,t){if(e===t.value)return[t];for(const n of t.children){const r=Lf(e,n);if(r.length)return r.unshift(t),r}return[]}class gr{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}}function Ii(e){const t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}class _I extends CI{constructor(t,n){super(t),this.snapshot=n,Ff(this,t)}toString(){return this.snapshot.toString()}}function EI(e,t){const n=function cL(e,t){const a=new Dl([],{},{},"",{},xe,t,null,{});return new TI("",new gr(a,[]))}(0,t),r=new Nt([new js("",{})]),o=new Nt({}),i=new Nt({}),a=new Nt({}),l=new Nt(""),u=new Ti(r,o,a,l,i,xe,t,n.root);return u.snapshot=n.root,new _I(new gr(u,[]),n)}class Ti{constructor(t,n,r,o,i,a,l,u){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=i,this.outlet=a,this.component=l,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(M(h=>h[Bs]))??ge(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=o,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(M(t=>Ci(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(M(t=>Ci(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function II(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const o=n[r],i=n[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(i.component)break;r--}}return function lL(e){return e.reduce((t,n)=>({params:{...t.params,...n.params},data:{...t.data,...n.data},resolve:{...n.data,...t.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Dl{get title(){return this.data?.[Bs]}constructor(t,n,r,o,i,a,l,u,h){this.url=t,this.params=n,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=a,this.component=l,this.routeConfig=u,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ci(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ci(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class TI extends CI{constructor(t,n){super(n),this.url=t,Ff(this,n)}toString(){return wI(this._root)}}function Ff(e,t){t.value._routerState=e,t.children.forEach(n=>Ff(e,n))}function wI(e){const t=e.children.length>0?` { ${e.children.map(wI).join(", ")} } `:"";return`${e.value}${t}`}function Hf(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Zn(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),Zn(t.params,n.params)||e.paramsSubject.next(n.params),function Sx(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Zn(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.urlSubject.next(n.url),Zn(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function Uf(e,t){const n=Zn(e.params,t.params)&&function Rx(e,t){return co(e,t)&&e.every((n,r)=>Zn(n.parameters,t[r].parameters))}(e.url,t.url);return n&&!(!e.parent!=!t.parent)&&(!e.parent||Uf(e.parent,t.parent))}let SI=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=xe,this.activateEvents=new Bt,this.deactivateEvents=new Bt,this.attachEvents=new Bt,this.detachEvents=new Bt,this.parentContexts=he(Zs),this.location=he(kn),this.changeDetector=he(Jc),this.environmentInjector=he(Dn),this.inputBinder=he(bl,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:o}=n.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Y(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Y(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Y(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new Y(4013,!1);this._activatedRoute=n;const o=this.location,a=n.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,u=new uL(n,l,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275dir=Pt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Zr]})}return e})();class uL{constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===Ti?this.route:t===Zs?this.childContexts:this.parent.get(t,n)}}const bl=new le("");function Ys(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const o=function hL(e,t,n){return t.children.map(r=>{for(const o of n.children)if(e.shouldReuseRoute(r.value,o.value.snapshot))return Ys(e,r,o);return Ys(e,r)})}(e,t,n);return new gr(r,o)}{if(e.shouldAttach(t.value)){const i=e.retrieve(t.value);if(null!==i){const a=i.route;return a.value._futureSnapshot=t.value,a.children=t.children.map(l=>Ys(e,l)),a}}const r=function fL(e){return new Ti(new Nt(e.url),new Nt(e.params),new Nt(e.queryParams),new Nt(e.fragment),new Nt(e.data),e.outlet,e.component,e)}(t.value),o=t.children.map(i=>Ys(e,i));return new gr(r,o)}}const Bf="ngNavigationCancelingError";function DI(e,t){const{redirectTo:n,navigationBehaviorOptions:r}=lo(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,o=bI(!1,0,t);return o.url=n,o.navigationBehaviorOptions=r,o}function bI(e,t,n){const r=new Error("NavigationCancelingError: "+(e||""));return r[Bf]=!0,r.cancellationCode=t,n&&(r.url=n),r}function RI(e){return e&&e[Bf]}let MI=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275cmp=Pa({type:e,selectors:[["ng-component"]],standalone:!0,features:[MC],decls:1,vars:0,template:function(r,o){1&r&&to(0,"router-outlet")},dependencies:[SI],encapsulation:2})}return e})();function jf(e){const t=e.children&&e.children.map(jf),n=t?{...e,children:t}:{...e};return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==xe&&(n.component=MI),n}function xn(e){return e.outlet||xe}function Qs(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){const n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class EL{constructor(t,n,r,o,i){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=i}activate(t){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),Hf(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){const o=Ii(n);t.children.forEach(i=>{const a=i.value.outlet;this.deactivateRoutes(i,o[a],r),delete o[a]}),Object.values(o).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(t,n,r){const o=t.value,i=n?n.value:null;if(o===i)if(o.component){const a=r.getContext(o.outlet);a&&this.deactivateChildRoutes(t,n,a.children)}else this.deactivateChildRoutes(t,n,r);else i&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){const r=n.getContext(t.value.outlet),o=r&&t.value.component?r.children:n,i=Ii(t);for(const a of Object.keys(i))this.deactivateRouteAndItsChildren(i[a],o);if(r&&r.outlet){const a=r.outlet.detach(),l=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:a,route:t,contexts:l})}}deactivateRouteAndOutlet(t,n){const r=n.getContext(t.value.outlet),o=r&&t.value.component?r.children:n,i=Ii(t);for(const a of Object.keys(i))this.deactivateRouteAndItsChildren(i[a],o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){const o=Ii(n);t.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new sL(i.value.snapshot))}),t.children.length&&this.forwardEvent(new oL(t.value.snapshot))}activateRoutes(t,n,r){const o=t.value,i=n?n.value:null;if(Hf(o),o===i)if(o.component){const a=r.getOrCreateContext(o.outlet);this.activateChildRoutes(t,n,a.children)}else this.activateChildRoutes(t,n,r);else if(o.component){const a=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const l=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),a.children.onOutletReAttached(l.contexts),a.attachRef=l.componentRef,a.route=l.route.value,a.outlet&&a.outlet.attach(l.componentRef,l.route.value),Hf(l.route.value),this.activateChildRoutes(t,null,a.children)}else{const l=Qs(o.snapshot);a.attachRef=null,a.route=o,a.injector=l,a.outlet&&a.outlet.activateWith(o,a.injector),this.activateChildRoutes(t,null,a.children)}}else this.activateChildRoutes(t,null,r)}}class kI{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Rl{constructor(t,n){this.component=t,this.route=n}}function IL(e,t,n){const r=e._root;return Js(r,t?t._root:null,n,[r.value])}function wi(e,t){const n=Symbol(),r=t.get(e,n);return r===n?"function"!=typeof e||function MT(e){return null!==Da(e)}(e)?t.get(e):e:r}function Js(e,t,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=Ii(t);return e.children.forEach(a=>{(function wL(e,t,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=e.value,a=t?t.value:null,l=n?n.getContext(e.value.outlet):null;if(a&&i.routeConfig===a.routeConfig){const u=function SL(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!co(e.url,t.url);case"pathParamsOrQueryParamsChange":return!co(e.url,t.url)||!Zn(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Uf(e,t)||!Zn(e.queryParams,t.queryParams);default:return!Uf(e,t)}}(a,i,i.routeConfig.runGuardsAndResolvers);u?o.canActivateChecks.push(new kI(r)):(i.data=a.data,i._resolvedData=a._resolvedData),Js(e,t,i.component?l?l.children:null:n,r,o),u&&l&&l.outlet&&l.outlet.isActivated&&o.canDeactivateChecks.push(new Rl(l.outlet.component,a))}else a&&Xs(t,l,o),o.canActivateChecks.push(new kI(r)),Js(e,null,i.component?l?l.children:null:n,r,o)})(a,i[a.value.outlet],n,r.concat([a.value]),o),delete i[a.value.outlet]}),Object.entries(i).forEach(([a,l])=>Xs(l,n.getContext(a),o)),o}function Xs(e,t,n){const r=Ii(e),o=e.value;Object.entries(r).forEach(([i,a])=>{Xs(a,o.component?t?t.children.getContext(i):null:t,n)}),n.canDeactivateChecks.push(new Rl(o.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,o))}function ea(e){return"function"==typeof e}function OI(e){return e instanceof yl||"EmptyError"===e?.name}const Ml=Symbol("INITIAL_VALUE");function Si(){return V(e=>ZE(e.map(t=>t.pipe(nn(1),function vx(...e){const t=Ir(e);return Le((n,r)=>{(t?Us(e,n,t):Us(e,n)).subscribe(r)})}(Ml)))).pipe(M(t=>{for(const n of t)if(!0!==n){if(n===Ml)return Ml;if(!1===n||n instanceof _i)return n}return!0}),tn(t=>t!==Ml),nn(1)))}function NI(e){return function Pe(...e){return Me(e)}(At(t=>{if(lo(t))throw DI(0,t)}),M(t=>!0===t))}class kl{constructor(t){this.segmentGroup=t||null}}class PI{constructor(t){this.urlTree=t}}function Ai(e){return vi(new kl(e))}function xI(e){return vi(new PI(e))}class GL{constructor(t,n){this.urlSerializer=t,this.urlTree=n}noMatchError(t){return new Y(4002,!1)}lineralizeSegments(t,n){let r=[],o=n.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return ge(r);if(o.numberOfChildren>1||!o.children[xe])return vi(new Y(4e3,!1));o=o.children[xe]}}applyRedirectCommands(t,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r)}applyRedirectCreateUrlTree(t,n,r,o){const i=this.createSegmentGroup(t,n.root,r,o);return new _i(i,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){const r={};return Object.entries(t).forEach(([o,i])=>{if("string"==typeof i&&i.startsWith(":")){const l=i.substring(1);r[o]=n[l]}else r[o]=i}),r}createSegmentGroup(t,n,r,o){const i=this.createSegments(t,n.segments,r,o);let a={};return Object.entries(n.children).forEach(([l,u])=>{a[l]=this.createSegmentGroup(t,u,r,o)}),new Ze(i,a)}createSegments(t,n,r,o){return n.map(i=>i.path.startsWith(":")?this.findPosParam(t,i,o):this.findOrReturn(i,r))}findPosParam(t,n,r){const o=r[n.path.substring(1)];if(!o)throw new Y(4001,!1);return o}findOrReturn(t,n){let r=0;for(const o of n){if(o.path===t.path)return n.splice(r),o;r++}return t}}const $f={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function KL(e,t,n,r,o){const i=Vf(e,t,n);return i.matched?(r=function gL(e,t){return e.providers&&!e._injector&&(e._injector=RC(e.providers,t,`Route: ${e.path}`)),e._injector??t}(t,r),function $L(e,t,n,r){const o=t.canMatch;return o&&0!==o.length?ge(o.map(a=>{const l=wi(a,e);return Ur(function kL(e){return e&&ea(e.canMatch)}(l)?l.canMatch(t,n):e.runInContext(()=>l(t,n)))})).pipe(Si(),NI()):ge(!0)}(r,t,n).pipe(M(a=>!0===a?i:{...$f}))):ge(i)}function Vf(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{...$f}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const o=(t.matcher||wx)(n,e,t);if(!o)return{...$f};const i={};Object.entries(o.posParams??{}).forEach(([l,u])=>{i[l]=u.path});const a=o.consumed.length>0?{...i,...o.consumed[o.consumed.length-1].parameters}:i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:n.slice(o.consumed.length),parameters:a,positionalParamSegments:o.posParams??{}}}function LI(e,t,n,r){return n.length>0&&function ZL(e,t,n){return n.some(r=>Ol(e,t,r)&&xn(r)!==xe)}(e,n,r)?{segmentGroup:new Ze(t,WL(r,new Ze(n,e.children))),slicedSegments:[]}:0===n.length&&function YL(e,t,n){return n.some(r=>Ol(e,t,r))}(e,n,r)?{segmentGroup:new Ze(e.segments,qL(e,0,n,r,e.children)),slicedSegments:n}:{segmentGroup:new Ze(e.segments,e.children),slicedSegments:n}}function qL(e,t,n,r,o){const i={};for(const a of r)if(Ol(e,n,a)&&!o[xn(a)]){const l=new Ze([],{});i[xn(a)]=l}return{...o,...i}}function WL(e,t){const n={};n[xe]=t;for(const r of e)if(""===r.path&&xn(r)!==xe){const o=new Ze([],{});n[xn(r)]=o}return n}function Ol(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}class eF{constructor(t,n,r,o,i,a,l){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=o,this.urlTree=i,this.paramsInheritanceStrategy=a,this.urlSerializer=l,this.allowRedirects=!0,this.applyRedirects=new GL(this.urlSerializer,this.urlTree)}noMatchError(t){return new Y(4002,!1)}recognize(){const t=LI(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,xe).pipe(Hr(n=>{if(n instanceof PI)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof kl?this.noMatchError(n):n}),M(n=>{const r=new Dl([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},xe,this.rootComponentType,null,{}),o=new gr(r,n),i=new TI("",o),a=function zx(e,t,n=null,r=null){return hI(dI(e),t,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(a),this.inheritParamsAndData(i._root),{state:i,tree:a}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t.root,xe).pipe(Hr(r=>{throw r instanceof kl?this.noMatchError(r):r}))}inheritParamsAndData(t){const n=t.value,r=II(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(t,n,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(t,n,r):this.processSegment(t,n,r,r.segments,o,!0)}processChildren(t,n,r){const o=[];for(const i of Object.keys(r.children))"primary"===i?o.unshift(i):o.push(i);return Ye(o).pipe(yi(i=>{const a=r.children[i],l=function CL(e,t){const n=e.filter(r=>xn(r)===t);return n.push(...e.filter(r=>xn(r)!==t)),n}(n,i);return this.processSegmentGroup(t,l,a,i)}),function Ex(e,t){return Le(function _x(e,t,n,r,o){return(i,a)=>{let l=n,u=t,h=0;i.subscribe(Ve(a,p=>{const v=h++;u=l?e(u,p,v):(l=!0,p),r&&a.next(u)},o&&(()=>{l&&a.next(u),a.complete()})))}}(e,t,arguments.length>=2,!0))}((i,a)=>(i.push(...a),i)),Cl(null),function Ix(e,t){const n=arguments.length>=2;return r=>r.pipe(e?tn((o,i)=>e(o,i,r)):pe,Sf(1),n?Cl(t):QE(()=>new yl))}(),lt(i=>{if(null===i)return Ai(r);const a=FI(i);return function tF(e){e.sort((t,n)=>t.value.outlet===xe?-1:n.value.outlet===xe?1:t.value.outlet.localeCompare(n.value.outlet))}(a),ge(a)}))}processSegment(t,n,r,o,i,a){return Ye(n).pipe(yi(l=>this.processSegmentAgainstRoute(l._injector??t,n,l,r,o,i,a).pipe(Hr(u=>{if(u instanceof kl)return ge(null);throw u}))),ao(l=>!!l),Hr(l=>{if(OI(l))return function JL(e,t,n){return 0===t.length&&!e.children[n]}(r,o,i)?ge([]):Ai(r);throw l}))}processSegmentAgainstRoute(t,n,r,o,i,a,l){return function QL(e,t,n,r){return!!(xn(e)===r||r!==xe&&Ol(t,n,e))&&("**"===e.path||Vf(t,e,n).matched)}(r,o,i,a)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,o,r,i,a,l):l&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,o,n,r,i,a):Ai(o):Ai(o)}expandSegmentAgainstRouteUsingRedirect(t,n,r,o,i,a){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,o,a):this.expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,o,i,a)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o){const i=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?xI(i):this.applyRedirects.lineralizeSegments(r,i).pipe(lt(a=>{const l=new Ze(a,{});return this.processSegment(t,n,l,a,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,o,i,a){const{matched:l,consumedSegments:u,remainingSegments:h,positionalParamSegments:p}=Vf(n,o,i);if(!l)return Ai(n);const v=this.applyRedirects.applyRedirectCommands(u,o.redirectTo,p);return o.redirectTo.startsWith("/")?xI(v):this.applyRedirects.lineralizeSegments(o,v).pipe(lt(E=>this.processSegment(t,r,n,E.concat(h),a,!1)))}matchSegmentAgainstRoute(t,n,r,o,i,a){let l;if("**"===r.path){const u=o.length>0?eI(o).parameters:{};l=ge({snapshot:new Dl(o,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,HI(r),xn(r),r.component??r._loadedComponent??null,r,UI(r)),consumedSegments:[],remainingSegments:[]}),n.children={}}else l=KL(n,r,o,t).pipe(M(({matched:u,consumedSegments:h,remainingSegments:p,parameters:v})=>u?{snapshot:new Dl(h,v,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,HI(r),xn(r),r.component??r._loadedComponent??null,r,UI(r)),consumedSegments:h,remainingSegments:p}:null));return l.pipe(V(u=>null===u?Ai(n):this.getChildConfig(t=r._injector??t,r,o).pipe(V(({routes:h})=>{const p=r._loadedInjector??t,{snapshot:v,consumedSegments:E,remainingSegments:D}=u,{segmentGroup:x,slicedSegments:U}=LI(n,E,D,h);if(0===U.length&&x.hasChildren())return this.processChildren(p,h,x).pipe(M(ee=>null===ee?null:[new gr(v,ee)]));if(0===h.length&&0===U.length)return ge([new gr(v,[])]);const q=xn(r)===i;return this.processSegment(p,h,x,U,q?xe:i,!0).pipe(M(ee=>[new gr(v,ee)]))}))))}getChildConfig(t,n,r){return n.children?ge({routes:n.children,injector:t}):n.loadChildren?void 0!==n._loadedRoutes?ge({routes:n._loadedRoutes,injector:n._loadedInjector}):function jL(e,t,n,r){const o=t.canLoad;return void 0===o||0===o.length?ge(!0):ge(o.map(a=>{const l=wi(a,e);return Ur(function DL(e){return e&&ea(e.canLoad)}(l)?l.canLoad(t,n):e.runInContext(()=>l(t,n)))})).pipe(Si(),NI())}(t,n,r).pipe(lt(o=>o?this.configLoader.loadChildren(t,n).pipe(At(i=>{n._loadedRoutes=i.routes,n._loadedInjector=i.injector})):function zL(e){return vi(bI(!1,3))}())):ge({routes:[],injector:t})}}function nF(e){const t=e.value.routeConfig;return t&&""===t.path}function FI(e){const t=[],n=new Set;for(const r of e){if(!nF(r)){t.push(r);continue}const o=t.find(i=>r.value.routeConfig===i.value.routeConfig);void 0!==o?(o.children.push(...r.children),n.add(o)):t.push(r)}for(const r of n){const o=FI(r.children);t.push(new gr(r.value,o))}return t.filter(r=>!n.has(r))}function HI(e){return e.data||{}}function UI(e){return e.resolve||{}}function BI(e){return"string"==typeof e.title||null===e.title}function zf(e){return V(t=>{const n=e(t);return n?Ye(n).pipe(M(()=>t)):ge(t)})}const Nl=new le("ROUTES");let jI=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=he(D0)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return ge(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=Ur(n.loadComponent()).pipe(M($I),At(i=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=i}),Af(()=>{this.componentLoaders.delete(n)})),o=new wf(r,()=>new Qe).pipe(Tf());return this.componentLoaders.set(n,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ge({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const i=function lF(e,t,n,r){return Ur(e.loadChildren()).pipe(M($I),lt(o=>o instanceof DC||Array.isArray(o)?ge(o):Ye(t.compileModuleAsync(o))),M(o=>{r&&r(e);let i,a,l=!1;return Array.isArray(o)?(a=o,!0):(i=o.create(n).injector,a=i.get(Nl,[],{optional:!0,self:!0}).flat()),{routes:a.map(jf),injector:i}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(Af(()=>{this.childrenLoaders.delete(r)})),a=new wf(i,()=>new Qe).pipe(Tf());return this.childrenLoaders.set(r,a),a}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=_e({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function $I(e){return function uF(e){return e&&"object"==typeof e&&"default"in e}(e)?e.default:e}let Pl=(()=>{class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Qe,this.transitionAbortSubject=new Qe,this.configLoader=he(jI),this.environmentInjector=he(Dn),this.urlSerializer=he($s),this.rootContexts=he(Zs),this.inputBindingEnabled=null!==he(bl,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ge(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new nL(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new tL(o))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n,r,o){return this.transitions=new Nt({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:n.urlHandlingStrategy.extract(r),urlAfterRedirects:n.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ks,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(tn(i=>0!==i.id),M(i=>({...i,extractedUrl:n.urlHandlingStrategy.extract(i.rawUrl)})),V(i=>{this.currentTransition=i;let a=!1,l=!1;return ge(i).pipe(At(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),V(u=>{const h=u.currentBrowserUrl.toString(),p=!n.navigated||u.extractedUrl.toString()!==h||h!==u.currentUrlTree.toString();if(!p&&"reload"!==(u.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const E="";return this.events.next(new Ws(u.id,this.urlSerializer.serialize(u.rawUrl),E,0)),u.resolve(null),on}if(n.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return ge(u).pipe(V(E=>{const D=this.transitions?.getValue();return this.events.next(new Of(E.id,this.urlSerializer.serialize(E.extractedUrl),E.source,E.restoredState)),D!==this.transitions?.getValue()?on:Promise.resolve(E)}),function rF(e,t,n,r,o,i){return lt(a=>function XL(e,t,n,r,o,i,a="emptyOnly"){return new eF(e,t,n,r,o,a,i).recognize()}(e,t,n,r,a.extractedUrl,o,i).pipe(M(({state:l,tree:u})=>({...a,targetSnapshot:l,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),At(E=>{i.targetSnapshot=E.targetSnapshot,i.urlAfterRedirects=E.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:E.urlAfterRedirects};const D=new vI(E.id,this.urlSerializer.serialize(E.extractedUrl),this.urlSerializer.serialize(E.urlAfterRedirects),E.targetSnapshot);this.events.next(D)}));if(p&&n.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:E,extractedUrl:D,source:x,restoredState:U,extras:q}=u,ee=new Of(E,this.urlSerializer.serialize(D),x,U);this.events.next(ee);const j=EI(0,this.rootComponentType).snapshot;return this.currentTransition=i={...u,targetSnapshot:j,urlAfterRedirects:D,extras:{...q,skipLocationChange:!1,replaceUrl:!1}},ge(i)}{const E="";return this.events.next(new Ws(u.id,this.urlSerializer.serialize(u.extractedUrl),E,1)),u.resolve(null),on}}),At(u=>{const h=new Qx(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}),M(u=>(this.currentTransition=i={...u,guards:IL(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},i)),function NL(e,t){return lt(n=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:a}}=n;return 0===a.length&&0===i.length?ge({...n,guardsResult:!0}):function PL(e,t,n,r){return Ye(e).pipe(lt(o=>function BL(e,t,n,r,o){const i=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return i&&0!==i.length?ge(i.map(l=>{const u=Qs(t)??o,h=wi(l,u);return Ur(function ML(e){return e&&ea(e.canDeactivate)}(h)?h.canDeactivate(e,t,n,r):u.runInContext(()=>h(e,t,n,r))).pipe(ao())})).pipe(Si()):ge(!0)}(o.component,o.route,n,t,r)),ao(o=>!0!==o,!0))}(a,r,o,e).pipe(lt(l=>l&&function AL(e){return"boolean"==typeof e}(l)?function xL(e,t,n,r){return Ye(t).pipe(yi(o=>Us(function FL(e,t){return null!==e&&t&&t(new rL(e)),ge(!0)}(o.route.parent,r),function LL(e,t){return null!==e&&t&&t(new iL(e)),ge(!0)}(o.route,r),function UL(e,t,n){const r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(a=>function TL(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(a)).filter(a=>null!==a).map(a=>vl(()=>ge(a.guards.map(u=>{const h=Qs(a.node)??n,p=wi(u,h);return Ur(function RL(e){return e&&ea(e.canActivateChild)}(p)?p.canActivateChild(r,e):h.runInContext(()=>p(r,e))).pipe(ao())})).pipe(Si())));return ge(i).pipe(Si())}(e,o.path,n),function HL(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return ge(!0);const o=r.map(i=>vl(()=>{const a=Qs(t)??n,l=wi(i,a);return Ur(function bL(e){return e&&ea(e.canActivate)}(l)?l.canActivate(t,e):a.runInContext(()=>l(t,e))).pipe(ao())}));return ge(o).pipe(Si())}(e,o.route,n))),ao(o=>!0!==o,!0))}(r,i,e,t):ge(l)),M(l=>({...n,guardsResult:l})))})}(this.environmentInjector,u=>this.events.next(u)),At(u=>{if(i.guardsResult=u.guardsResult,lo(u.guardsResult))throw DI(0,u.guardsResult);const h=new Jx(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(h)}),tn(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),zf(u=>{if(u.guards.canActivateChecks.length)return ge(u).pipe(At(h=>{const p=new Xx(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}),V(h=>{let p=!1;return ge(h).pipe(function oF(e,t){return lt(n=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=n;if(!o.length)return ge(n);let i=0;return Ye(o).pipe(yi(a=>function iF(e,t,n,r){const o=e.routeConfig,i=e._resolve;return void 0!==o?.title&&!BI(o)&&(i[Bs]=o.title),function sF(e,t,n,r){const o=function aF(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===o.length)return ge({});const i={};return Ye(o).pipe(lt(a=>function cF(e,t,n,r){const o=Qs(t)??r,i=wi(e,o);return Ur(i.resolve?i.resolve(t,n):o.runInContext(()=>i(t,n)))}(e[a],t,n,r).pipe(ao(),At(l=>{i[a]=l}))),Sf(1),JE(i),Hr(a=>OI(a)?on:vi(a)))}(i,e,t,r).pipe(M(a=>(e._resolvedData=a,e.data=II(e,n).resolve,o&&BI(o)&&(e.data[Bs]=o.title),null)))}(a.route,r,e,t)),At(()=>i++),Sf(1),lt(a=>i===o.length?ge(n):on))})}(n.paramsInheritanceStrategy,this.environmentInjector),At({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(h,"",2)}}))}),At(h=>{const p=new eL(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}))}),zf(u=>{const h=p=>{const v=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&v.push(this.configLoader.loadComponent(p.routeConfig).pipe(At(E=>{p.component=E}),M(()=>{})));for(const E of p.children)v.push(...h(E));return v};return ZE(h(u.targetSnapshot.root)).pipe(Cl(),nn(1))}),zf(()=>this.afterPreactivation()),M(u=>{const h=function dL(e,t,n){const r=Ys(e,t._root,n?n._root:void 0);return new _I(r,t)}(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=i={...u,targetRouterState:h},i}),At(()=>{this.events.next(new Nf)}),((e,t,n,r)=>M(o=>(new EL(t,o.targetRouterState,o.currentRouterState,n,r).activate(e),o)))(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),nn(1),At({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ei(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),n.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),qE(this.transitionAbortSubject.pipe(At(u=>{throw u}))),Af(()=>{a||l||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Hr(u=>{if(l=!0,RI(u))this.events.next(new qs(i.id,this.urlSerializer.serialize(i.extractedUrl),u.message,u.cancellationCode)),function pL(e){return RI(e)&&lo(e.url)}(u)?this.events.next(new Pf(u.url)):i.resolve(!1);else{this.events.next(new Al(i.id,this.urlSerializer.serialize(i.extractedUrl),u,i.targetSnapshot??void 0));try{i.resolve(n.errorHandler(u))}catch(h){i.reject(h)}}return on}))}))}cancelNavigationTransition(n,r,o){const i=new qs(n.id,this.urlSerializer.serialize(n.extractedUrl),r,o);this.events.next(i),n.resolve(!1)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=_e({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function VI(e){return e!==Ks}let zI=(()=>{class e{buildTitle(n){let r,o=n.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===xe);return r}getResolvedTitleForRoute(n){return n.data[Bs]}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=_e({token:e,factory:function(){return he(dF)},providedIn:"root"})}return e})(),dF=(()=>{class e extends zI{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||e)(ye(VE))};static#t=this.\u0275prov=_e({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),hF=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=_e({token:e,factory:function(){return he(pF)},providedIn:"root"})}return e})();class fF{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}}let pF=(()=>{class e extends fF{static#e=this.\u0275fac=function(){let n;return function(o){return(n||(n=function Dg(e){return nr(()=>{const t=e.prototype.constructor,n=t[rr]||Bu(t),r=Object.prototype;let o=Object.getPrototypeOf(e.prototype).constructor;for(;o&&o!==r;){const i=o[rr]||Bu(o);if(i&&i!==n)return i;o=Object.getPrototypeOf(o)}return i=>new i})}(e)))(o||e)}}();static#t=this.\u0275prov=_e({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const Gf=new le("",{providedIn:"root",factory:()=>({})});let gF=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=_e({token:e,factory:function(){return he(mF)},providedIn:"root"})}return e})(),mF=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=_e({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var ta=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(ta||{});function yF(e){throw e}function vF(e,t,n){return t.parse("/")}const CF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_F={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ln=(()=>{class e{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=he(I_),this.isNgZoneEnabled=!1,this._events=new Qe,this.options=he(Gf,{optional:!0})||{},this.pendingTasks=he(T_),this.errorHandler=this.options.errorHandler||yF,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||vF,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=he(gF),this.routeReuseStrategy=he(hF),this.titleStrategy=he(zI),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=he(Nl,{optional:!0})?.flat()??[],this.navigationTransitions=he(Pl),this.urlSerializer=he($s),this.location=he(Ps),this.componentInputBindingEnabled=!!he(bl,{optional:!0}),this.eventsSubscription=new F,this.isNgZoneEnabled=he(Je)instanceof Je&&Je.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new _i,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=EI(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:o}=this.navigationTransitions;if(null===o)return void(KI(r)&&this._events.next(r));if(r instanceof Of)VI(o.source)&&(this.browserUrlTree=o.extractedUrl);else if(r instanceof Ws)this.rawUrlTree=o.rawUrl;else if(r instanceof vI){if("eager"===this.urlUpdateStrategy){if(!o.extras.skipLocationChange){const i=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl);this.setBrowserUrl(i,o)}this.browserUrlTree=o.urlAfterRedirects}}else if(r instanceof Nf)this.currentUrlTree=o.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),this.routerState=o.targetRouterState,"deferred"===this.urlUpdateStrategy&&(o.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,o),this.browserUrlTree=o.urlAfterRedirects);else if(r instanceof qs)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(o);else if(r instanceof Pf){const i=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),a={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||VI(o.source)};this.scheduleNavigation(i,Ks,null,a,{resolve:o.resolve,reject:o.reject,promise:o.promise})}r instanceof Al&&this.restoreHistory(o,!0),r instanceof Ei&&(this.navigated=!0),KI(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Ks,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,o){const i={replaceUrl:!0},a=o?.navigationId?o:null;if(o){const u={...o};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(i.state=u)}const l=this.parseUrl(n);this.scheduleNavigation(l,r,a,i)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(jf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:o,queryParams:i,fragment:a,queryParamsHandling:l,preserveFragment:u}=r,h=u?this.currentUrlTree.fragment:a;let v,p=null;switch(l){case"merge":p={...this.currentUrlTree.queryParams,...i};break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=i||null}null!==p&&(p=this.removeEmptyProps(p));try{v=dI(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),v=this.currentUrlTree.root}return hI(v,n,p,h??null)}navigateByUrl(n,r={skipLocationChange:!1}){const o=lo(n)?n:this.parseUrl(n),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,Ks,null,r)}navigate(n,r={skipLocationChange:!1}){return function EF(e){for(let t=0;t<e.length;t++)if(null==e[t])throw new Y(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,n)}return r}isActive(n,r){let o;if(o=!0===r?{...CF}:!1===r?{..._F}:r,lo(n))return nI(this.currentUrlTree,n,o);const i=this.parseUrl(n);return nI(this.currentUrlTree,i,o)}removeEmptyProps(n){return Object.keys(n).reduce((r,o)=>{const i=n[o];return null!=i&&(r[o]=i),r},{})}scheduleNavigation(n,r,o,i,a){if(this.disposed)return Promise.resolve(!1);let l,u,h;a?(l=a.resolve,u=a.reject,h=a.promise):h=new Promise((v,E)=>{l=v,u=E});const p=this.pendingTasks.add();return function GI(e,t){e.events.pipe(tn(n=>n instanceof Ei||n instanceof qs||n instanceof Al||n instanceof Ws),M(n=>n instanceof Ei||n instanceof Ws?ta.COMPLETE:n instanceof qs&&(0===n.code||1===n.code)?ta.REDIRECTING:ta.FAILED),tn(n=>n!==ta.REDIRECTING),nn(1)).subscribe(()=>{t()})}(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:n,extras:i,resolve:l,reject:u,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(v=>Promise.reject(v))}setBrowserUrl(n,r){const o=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){const a={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(o,"",a)}else{const i={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(o,"",i)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-this.browserPageId;0!==i?this.location.historyGo(i):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=_e({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function KI(e){return!(e instanceof Nf||e instanceof Pf)}const XI="@azure/msal-angular",Zf="3.0.6",xl=new le("MSAL_INSTANCE"),Yf=new le("MSAL_GUARD_CONFIG"),RF=new le("MSAL_INTERCEPTOR_CONFIG"),MF=new le("MSAL_BROADCAST_CONFIG");let Di=(()=>{class e{constructor(n,r){this.instance=n,this.location=r;const o=this.location.path(!0).split("#").pop();o&&(this.redirectHash=`#${o}`),this.instance.initializeWrapperLibrary(it.lA.Angular,Zf)}initialize(){return Ye(this.instance.initialize())}acquireTokenPopup(n){return Ye(this.instance.acquireTokenPopup(n))}acquireTokenRedirect(n){return Ye(this.instance.acquireTokenRedirect(n))}acquireTokenSilent(n){return Ye(this.instance.acquireTokenSilent(n))}handleRedirectObservable(n){return Ye(this.instance.initialize().then(()=>this.instance.handleRedirectPromise(n||this.redirectHash)))}loginPopup(n){return Ye(this.instance.loginPopup(n))}loginRedirect(n){return Ye(this.instance.loginRedirect(n))}logout(n){return Ye(this.instance.logout(n))}logoutRedirect(n){return Ye(this.instance.logoutRedirect(n))}logoutPopup(n){return Ye(this.instance.logoutPopup(n))}ssoSilent(n){return Ye(this.instance.ssoSilent(n))}getLogger(){return this.logger||(this.logger=this.instance.getLogger().clone(XI,Zf)),this.logger}setLogger(n){this.logger=n.clone(XI,Zf),this.instance.setLogger(n)}}return e.\u0275fac=function(n){return new(n||e)(ye(xl),ye(Ps))},e.\u0275prov=_e({token:e,factory:e.\u0275fac}),e})(),Ll=(()=>{class e{constructor(n,r,o){this.msalInstance=n,this.authService=r,this.msalBroadcastConfig=o,this.msalBroadcastConfig&&this.msalBroadcastConfig.eventsToReplay>0?(this.authService.getLogger().verbose(`BroadcastService - eventsToReplay set on BroadcastConfig, replaying the last ${this.msalBroadcastConfig.eventsToReplay} events`),this._msalSubject=new ix(this.msalBroadcastConfig.eventsToReplay)):this._msalSubject=new Qe,this.msalSubject$=this._msalSubject.asObservable(),this._inProgress=new Nt(it.$H.Startup),this.inProgress$=this._inProgress.asObservable(),this.msalInstance.addEventCallback(i=>{this._msalSubject.next(i);const a=tx.getInteractionStatusFromEvent(i,this._inProgress.value);null!==a&&(this.authService.getLogger().verbose(`BroadcastService - ${i.eventType} results in setting inProgress from ${this._inProgress.value} to ${a}`),this._inProgress.next(a))})}}return e.\u0275fac=function(n){return new(n||e)(ye(xl),ye(Di),ye(MF,8))},e.\u0275prov=_e({token:e,factory:e.\u0275fac}),e})(),eT=(()=>{class e{constructor(n,r,o,i,a){this.msalGuardConfig=n,this.msalBroadcastService=r,this.authService=o,this.location=i,this.router=a,this.msalBroadcastService.inProgress$.subscribe()}parseUrl(n){return this.router.parseUrl(n)}getDestinationUrl(n){this.authService.getLogger().verbose("Guard - getting destination url");const r=document.getElementsByTagName("base"),o=this.location.normalize(r.length?r[0].href:window.location.origin),i=this.location.prepareExternalUrl(n);return i.startsWith("#")?(this.authService.getLogger().verbose("Guard - destination by hash routing"),`${o}/${i}`):`${o}${n}`}loginInteractively(n){const r="function"==typeof this.msalGuardConfig.authRequest?this.msalGuardConfig.authRequest(this.authService,n):{...this.msalGuardConfig.authRequest};if(this.msalGuardConfig.interactionType===it.s_.Popup)return this.authService.getLogger().verbose("Guard - logging in by popup"),this.authService.loginPopup(r).pipe(M(i=>(this.authService.getLogger().verbose("Guard - login by popup successful, can activate, setting active account"),this.authService.instance.setActiveAccount(i.account),!0)));this.authService.getLogger().verbose("Guard - logging in by redirect");const o=this.getDestinationUrl(n.url);return this.authService.loginRedirect({redirectStartPage:o,...r}).pipe(M(()=>!1))}activateHelper(n){if(this.msalGuardConfig.interactionType!==it.s_.Popup&&this.msalGuardConfig.interactionType!==it.s_.Redirect)throw new nx.WK("invalid_interaction_type","Invalid interaction type provided to MSAL Guard. InteractionType.Popup or InteractionType.Redirect must be provided in the MsalGuardConfiguration");if(this.authService.getLogger().verbose("MSAL Guard activated"),!(typeof window<"u"))return this.authService.getLogger().info("Guard - window is undefined, MSAL does not support server-side token acquisition"),ge(!0);if(rx.G.hashContainsKnownProperties(window.location.hash)&&ox.zd()&&!this.authService.instance.getConfiguration().system.allowRedirectInIframe)return this.authService.getLogger().warning("Guard - redirectUri set to page with MSAL Guard. It is recommended to not set redirectUri to a page that requires authentication."),ge(!1);this.msalGuardConfig.loginFailedRoute&&(this.loginFailedRoute=this.parseUrl(this.msalGuardConfig.loginFailedRoute));const r=this.location.path(!0);return this.authService.initialize().pipe(yi(()=>this.authService.handleRedirectObservable()),yi(()=>{if(!this.authService.instance.getAllAccounts().length)return n?(this.authService.getLogger().verbose("Guard - no accounts retrieved, log in required to activate"),this.loginInteractively(n)):(this.authService.getLogger().verbose("Guard - no accounts retrieved, no state, cannot load"),ge(!1));if(this.authService.getLogger().verbose("Guard - at least 1 account exists, can activate or load"),n){const o=this.includesCode(n.url),i=!!n.root&&!!n.root.fragment&&this.includesCode(`#${n.root.fragment}`),a=0===this.location.prepareExternalUrl(n.url).indexOf("#");if(o&&(i||a))return this.authService.getLogger().info("Guard - Hash contains known code response, stopping navigation."),r.indexOf("#")>-1?ge(this.parseUrl(this.location.path())):ge(this.parseUrl(""))}return ge(!0)}),Hr(o=>(this.authService.getLogger().error("Guard - error while logging in, unable to activate"),this.authService.getLogger().errorPii(`Guard - error: ${o.message}`),this.loginFailedRoute&&n?(this.authService.getLogger().verbose("Guard - loginFailedRoute set, redirecting"),ge(this.loginFailedRoute)):ge(!1))))}includesCode(n){return n.lastIndexOf("/code")>-1&&n.lastIndexOf("/code")===n.length-5||n.indexOf("#code=")>-1||n.indexOf("&code=")>-1}canActivate(n,r){return this.authService.getLogger().verbose("Guard - canActivate"),this.activateHelper(r)}canActivateChild(n,r){return this.authService.getLogger().verbose("Guard - canActivateChild"),this.activateHelper(r)}canMatch(){return this.authService.getLogger().verbose("Guard - canLoad"),this.activateHelper()}}return e.\u0275fac=function(n){return new(n||e)(ye(Yf),ye(Ll),ye(Di),ye(Ps),ye(Ln))},e.\u0275prov=_e({token:e,factory:e.\u0275fac}),e})(),kF=(()=>{class e{constructor(n){this.authService=n}ngOnInit(){this.authService.getLogger().verbose("MsalRedirectComponent activated"),this.authService.handleRedirectObservable().subscribe()}}return e.\u0275fac=function(n){return new(n||e)(me(Di))},e.\u0275cmp=Pa({type:e,selectors:[["app-redirect"]],decls:0,vars:0,template:function(n,r){},encapsulation:2}),e})(),OF=(()=>{class e{static forRoot(n,r,o){return{ngModule:e,providers:[{provide:xl,useValue:n},{provide:Yf,useValue:r},{provide:RF,useValue:o},Di]}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Kr({type:e}),e.\u0275inj=wr({providers:[eT,Ll],imports:[IE]}),e})(),NF=(()=>{class e{constructor(n,r,o,i){this.zone=n,this._cdr=r,this.broadcastService=o,this.authService=i,this.title="angular-test-pwa",this.EXTENSION_ID="elfkbddgjdkcgfkdkejlonibnejkmibe",this.serialNumber="",this._destroying$=new Qe}ngOnInit(){this.callExtension({api:"deviceAttributes_getDeviceSerialNumber"}),this.broadcastService.msalSubject$.pipe(tn(n=>n.eventType===zt.t.LOGIN_SUCCESS),qE(this._destroying$)).subscribe(n=>{console.log(n)})}getSerialNumber(){this.callExtension({api:"deviceAttributes_getDeviceSerialNumber"})}callExtension(n){console.log("Sending request: "+JSON.stringify(n)),window.chrome.runtime?window.chrome.runtime.sendMessage(this.EXTENSION_ID,n,r=>{console.log("Response: "+JSON.stringify(r)),this.serialNumber=JSON.stringify(r.output),this._cdr.detectChanges()}):this.serialNumber="unknown"}login(){this.authService.loginRedirect()}ngOnDestroy(){this._destroying$.next(void 0),this._destroying$.complete()}static#e=this.\u0275fac=function(r){return new(r||e)(me(Je),me(Jc),me(Ll),me(Di))};static#t=this.\u0275cmp=Pa({type:e,selectors:[["app-root"]],decls:23,vars:2,consts:[["role","banner",1,"toolbar"],["width","40","alt","Angular Logo","src","data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNTAgMjUwIj4KICAgIDxwYXRoIGZpbGw9IiNERDAwMzEiIGQ9Ik0xMjUgMzBMMzEuOSA2My4ybDE0LjIgMTIzLjFMMTI1IDIzMGw3OC45LTQzLjcgMTQuMi0xMjMuMXoiIC8+CiAgICA8cGF0aCBmaWxsPSIjQzMwMDJGIiBkPSJNMTI1IDMwdjIyLjItLjFWMjMwbDc4LjktNDMuNyAxNC4yLTEyMy4xTDEyNSAzMHoiIC8+CiAgICA8cGF0aCAgZmlsbD0iI0ZGRkZGRiIgZD0iTTEyNSA1Mi4xTDY2LjggMTgyLjZoMjEuN2wxMS43LTI5LjJoNDkuNGwxMS43IDI5LjJIMTgzTDEyNSA1Mi4xem0xNyA4My4zaC0zNGwxNy00MC45IDE3IDQwLjl6IiAvPgogIDwvc3ZnPg=="],[1,"spacer"],["aria-label","Angular on twitter","target","_blank","rel","noopener","href","https://twitter.com/angular","title","Twitter"],["id","twitter-logo","height","24","data-name","Logo","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 400 400"],["width","400","height","400","fill","none"],["d","M153.62,301.59c94.34,0,145.94-78.16,145.94-145.94,0-2.22,0-4.43-.15-6.63A104.36,104.36,0,0,0,325,122.47a102.38,102.38,0,0,1-29.46,8.07,51.47,51.47,0,0,0,22.55-28.37,102.79,102.79,0,0,1-32.57,12.45,51.34,51.34,0,0,0-87.41,46.78A145.62,145.62,0,0,1,92.4,107.81a51.33,51.33,0,0,0,15.88,68.47A50.91,50.91,0,0,1,85,169.86c0,.21,0,.43,0,.65a51.31,51.31,0,0,0,41.15,50.28,51.21,51.21,0,0,1-23.16.88,51.35,51.35,0,0,0,47.92,35.62,102.92,102.92,0,0,1-63.7,22A104.41,104.41,0,0,1,75,278.55a145.21,145.21,0,0,0,78.62,23","fill","#fff"],["aria-label","Angular on YouTube","target","_blank","rel","noopener","href","https://youtube.com/angular","title","YouTube"],["id","youtube-logo","height","24","width","24","data-name","Logo","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","#fff"],["d","M0 0h24v24H0V0z","fill","none"],["d","M21.58 7.19c-.23-.86-.91-1.54-1.77-1.77C18.25 5 12 5 12 5s-6.25 0-7.81.42c-.86.23-1.54.91-1.77 1.77C2 8.75 2 12 2 12s0 3.25.42 4.81c.23.86.91 1.54 1.77 1.77C5.75 19 12 19 12 19s6.25 0 7.81-.42c.86-.23 1.54-.91 1.77-1.77C22 15.25 22 12 22 12s0-3.25-.42-4.81zM10 15V9l5.2 3-5.2 3z"],["role","main",1,"content"],[1,"card","highlight-card","card-small"],[3,"click"]],template:function(r,o){1&r&&(fn(0,"div",0),to(1,"img",1),fn(2,"span"),li(3,"Welcome"),Kn(),to(4,"div",2),fn(5,"a",3),Ou(),fn(6,"svg",4),to(7,"rect",5)(8,"path",6),Kn()(),Nu(),fn(9,"a",7),Ou(),fn(10,"svg",8),to(11,"path",9)(12,"path",10),Kn()()(),Nu(),fn(13,"div",11)(14,"div",12)(15,"span"),li(16),Kn()(),fn(17,"span"),li(18),Kn(),fn(19,"button",13),Is("click",function(){return o.getSerialNumber()}),li(20,"Serial Num"),Kn(),fn(21,"button",13),Is("click",function(){return o.login()}),li(22,"Login"),Kn()()),2&r&&(Bd(16),jc("",o.title," app is running8!"),Bd(2),fh(o.serialNumber))},styles:['[_nghost-%COMP%] {\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n    font-size: 14px;\n    color: #333;\n    box-sizing: border-box;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n\n  h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%] {\n    margin: 8px 0;\n  }\n\n  p[_ngcontent-%COMP%] {\n    margin: 0;\n  }\n\n  .spacer[_ngcontent-%COMP%] {\n    flex: 1;\n  }\n\n  .toolbar[_ngcontent-%COMP%] {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 60px;\n    display: flex;\n    align-items: center;\n    background-color: #1976d2;\n    color: white;\n    font-weight: 600;\n  }\n\n  .toolbar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n    margin: 0 16px;\n  }\n\n  .toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%] {\n    height: 40px;\n    margin: 0 8px;\n  }\n\n  .toolbar[_ngcontent-%COMP%]   #youtube-logo[_ngcontent-%COMP%] {\n    height: 40px;\n    margin: 0 16px;\n  }\n\n  .toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%]:hover, .toolbar[_ngcontent-%COMP%]   #youtube-logo[_ngcontent-%COMP%]:hover {\n    opacity: 0.8;\n  }\n\n  .content[_ngcontent-%COMP%] {\n    display: flex;\n    margin: 82px auto 32px;\n    padding: 0 16px;\n    max-width: 960px;\n    flex-direction: column;\n    align-items: center;\n  }\n\n  svg.material-icons[_ngcontent-%COMP%] {\n    height: 24px;\n    width: auto;\n  }\n\n  svg.material-icons[_ngcontent-%COMP%]:not(:last-child) {\n    margin-right: 8px;\n  }\n\n  .card[_ngcontent-%COMP%]   svg.material-icons[_ngcontent-%COMP%]   path[_ngcontent-%COMP%] {\n    fill: #888;\n  }\n\n  .card-container[_ngcontent-%COMP%] {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n    margin-top: 16px;\n  }\n\n  .card[_ngcontent-%COMP%] {\n    all: unset;\n    border-radius: 4px;\n    border: 1px solid #eee;\n    background-color: #fafafa;\n    height: 40px;\n    width: 200px;\n    margin: 0 8px 16px;\n    padding: 16px;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    transition: all 0.2s ease-in-out;\n    line-height: 24px;\n  }\n\n  .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(:last-child) {\n    margin-right: 0;\n  }\n\n  .card.card-small[_ngcontent-%COMP%] {\n    height: 16px;\n    width: 168px;\n  }\n\n  .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card) {\n    cursor: pointer;\n  }\n\n  .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card):hover {\n    transform: translateY(-3px);\n    box-shadow: 0 4px 17px rgba(0, 0, 0, 0.35);\n  }\n\n  .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card):hover   .material-icons[_ngcontent-%COMP%]   path[_ngcontent-%COMP%] {\n    fill: rgb(105, 103, 103);\n  }\n\n  .card.highlight-card[_ngcontent-%COMP%] {\n    background-color: #1976d2;\n    color: white;\n    font-weight: 600;\n    border: none;\n    width: auto;\n    min-width: 30%;\n    position: relative;\n  }\n\n  .card.card.highlight-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n    margin-left: 60px;\n  }\n\n  svg#rocket[_ngcontent-%COMP%] {\n    width: 80px;\n    position: absolute;\n    left: -10px;\n    top: -24px;\n  }\n\n  svg#rocket-smoke[_ngcontent-%COMP%] {\n    height: calc(100vh - 95px);\n    position: absolute;\n    top: 10px;\n    right: 180px;\n    z-index: -10;\n  }\n\n  a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:visited, a[_ngcontent-%COMP%]:hover {\n    color: #1976d2;\n    text-decoration: none;\n  }\n\n  a[_ngcontent-%COMP%]:hover {\n    color: #125699;\n  }\n\n  .terminal[_ngcontent-%COMP%] {\n    position: relative;\n    width: 80%;\n    max-width: 600px;\n    border-radius: 6px;\n    padding-top: 45px;\n    margin-top: 8px;\n    overflow: hidden;\n    background-color: rgb(15, 15, 16);\n  }\n\n  .terminal[_ngcontent-%COMP%]::before {\n    content: "\\2022 \\2022 \\2022";\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 4px;\n    background: rgb(58, 58, 58);\n    color: #c2c3c4;\n    width: 100%;\n    font-size: 2rem;\n    line-height: 0;\n    padding: 14px 0;\n    text-indent: 4px;\n  }\n\n  .terminal[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%] {\n    font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;\n    color: white;\n    padding: 0 1rem 1rem;\n    margin: 0;\n  }\n\n  .circle-link[_ngcontent-%COMP%] {\n    height: 40px;\n    width: 40px;\n    border-radius: 40px;\n    margin: 8px;\n    background-color: white;\n    border: 1px solid #eeeeee;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n    transition: 1s ease-out;\n  }\n\n  .circle-link[_ngcontent-%COMP%]:hover {\n    transform: translateY(-0.25rem);\n    box-shadow: 0px 3px 15px rgba(0, 0, 0, 0.2);\n  }\n\n  footer[_ngcontent-%COMP%] {\n    margin-top: 8px;\n    display: flex;\n    align-items: center;\n    line-height: 20px;\n  }\n\n  footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\n    display: flex;\n    align-items: center;\n  }\n\n  .github-star-badge[_ngcontent-%COMP%] {\n    color: #24292e;\n    display: flex;\n    align-items: center;\n    font-size: 12px;\n    padding: 3px 10px;\n    border: 1px solid rgba(27,31,35,.2);\n    border-radius: 3px;\n    background-image: linear-gradient(-180deg,#fafbfc,#eff3f6 90%);\n    margin-left: 4px;\n    font-weight: 600;\n  }\n\n  .github-star-badge[_ngcontent-%COMP%]:hover {\n    background-image: linear-gradient(-180deg,#f0f3f6,#e6ebf1 90%);\n    border-color: rgba(27,31,35,.35);\n    background-position: -.5em;\n  }\n\n  .github-star-badge[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%] {\n    height: 16px;\n    width: 16px;\n    margin-right: 4px;\n  }\n\n  svg#clouds[_ngcontent-%COMP%] {\n    position: fixed;\n    bottom: -160px;\n    left: -230px;\n    z-index: -10;\n    width: 1920px;\n  }\n\n  \n\n  @media screen and (max-width: 767px) {\n    .card-container[_ngcontent-%COMP%]    > *[_ngcontent-%COMP%]:not(.circle-link), .terminal[_ngcontent-%COMP%] {\n      width: 100%;\n    }\n\n    .card[_ngcontent-%COMP%]:not(.highlight-card) {\n      height: 16px;\n      margin: 8px 0;\n    }\n\n    .card.highlight-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n      margin-left: 72px;\n    }\n\n    svg#rocket-smoke[_ngcontent-%COMP%] {\n      right: 120px;\n      transform: rotate(-5deg);\n    }\n  }\n\n  @media screen and (max-width: 575px) {\n    svg#rocket-smoke[_ngcontent-%COMP%] {\n      display: none;\n      visibility: hidden;\n    }\n  }'],changeDetection:0})}return e})();const PF=["addListener","removeListener"],xF=["addEventListener","removeEventListener"],LF=["on","off"];function Fl(e,t,n,r){if(_(n)&&(r=n,n=void 0),r)return Fl(e,t,n).pipe(WE(r));const[o,i]=function UF(e){return _(e.addEventListener)&&_(e.removeEventListener)}(e)?xF.map(a=>l=>e[a](t,l,n)):function FF(e){return _(e.addListener)&&_(e.removeListener)}(e)?PF.map(tT(e,t)):function HF(e){return _(e.on)&&_(e.off)}(e)?LF.map(tT(e,t)):[];if(!o&&$r(e))return lt(a=>Fl(a,t,n))(Et(e));if(!o)throw new TypeError("Invalid event target");return new ve(a=>{const l=(...u)=>a.next(1<u.length?u:u[0]);return o(l),()=>i(l)})}function tT(e,t){return n=>r=>e[n](t,r)}const Br=new ve(X),jF={connector:()=>new Qe};function nT(e,t=jF){const{connector:n}=t;return Le((r,o)=>{const i=n();Et(e(function BF(e){return new ve(t=>e.subscribe(t))}(i))).subscribe(o),o.add(r.subscribe(i))})}class zF extends F{constructor(t,n){super()}schedule(t,n=0){return this}}const Hl={setInterval(e,t,...n){const{delegate:r}=Hl;return r?.setInterval?r.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){const{delegate:t}=Hl;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};class na{constructor(t,n=na.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,r){return new this.schedulerActionCtor(this,t).schedule(r,n)}}na.now=If.now;const rT=new class KF extends na{constructor(t,n=na.now){super(t,n),this.actions=[],this._active=!1}flush(t){const{actions:n}=this;if(this._active)return void n.push(t);let r;this._active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}}(class GF extends zF{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var r;if(this.closed)return this;this.state=t;const o=this.id,i=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(i,o,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(i,this.id,n),this}requestAsyncId(t,n,r=0){return Hl.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&Hl.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(t,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let o,r=!1;try{this.work(t)}catch(i){r=!0,o=i||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){const{id:t,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,O(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}}),qF=rT;function oT(e,t){return t?n=>Us(t.pipe(nn(1),function WF(){return Le((e,t)=>{e.subscribe(Ve(t,X))})}()),n.pipe(oT(e))):lt((n,r)=>Et(e(n,r)).pipe(nn(1),JE(n)))}const ra="Service workers are disabled or not supported by this browser";class Ul{constructor(t){if(this.serviceWorker=t,t){const r=Fl(t,"controllerchange").pipe(M(()=>t.controller)),i=Us(vl(()=>ge(t.controller)),r);this.worker=i.pipe(tn(p=>!!p)),this.registration=this.worker.pipe(V(()=>t.getRegistration()));const h=Fl(t,"message").pipe(M(p=>p.data)).pipe(tn(p=>p&&p.type)).pipe(function VF(e){return e?t=>nT(e)(t):t=>function $F(e,t){const n=_(e)?e:()=>e;return _(t)?nT(t,{connector:n}):r=>new wf(r,n)}(new Qe)(t)}());h.connect(),this.events=h}else this.worker=this.events=this.registration=function JF(e){return vl(()=>vi(new Error(e)))}(ra)}postMessage(t,n){return this.worker.pipe(nn(1),At(r=>{r.postMessage({action:t,...n})})).toPromise().then(()=>{})}postMessageWithOperation(t,n,r){const o=this.waitForOperationCompleted(r),i=this.postMessage(t,n);return Promise.all([i,o]).then(([,a])=>a)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(t){let n;return n="string"==typeof t?r=>r.type===t:r=>t.includes(r.type),this.events.pipe(tn(n))}nextEventOfType(t){return this.eventsOfType(t).pipe(nn(1))}waitForOperationCompleted(t){return this.eventsOfType("OPERATION_COMPLETED").pipe(tn(n=>n.nonce===t),nn(1),M(n=>{if(void 0!==n.result)return n.result;throw new Error(n.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let iT=(()=>{class e{get isEnabled(){return this.sw.isEnabled}constructor(n){if(this.sw=n,this.pushManager=null,this.subscriptionChanges=new Qe,!n.isEnabled)return this.messages=Br,this.notificationClicks=Br,void(this.subscription=Br);this.messages=this.sw.eventsOfType("PUSH").pipe(M(o=>o.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(M(o=>o.data)),this.pushManager=this.sw.registration.pipe(M(o=>o.pushManager));const r=this.pushManager.pipe(V(o=>o.getSubscription()));this.subscription=xi(r,this.subscriptionChanges)}requestSubscription(n){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(ra));const r={userVisibleOnly:!0};let o=this.decodeBase64(n.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),i=new Uint8Array(new ArrayBuffer(o.length));for(let a=0;a<o.length;a++)i[a]=o.charCodeAt(a);return r.applicationServerKey=i,this.pushManager.pipe(V(a=>a.subscribe(r)),nn(1)).toPromise().then(a=>(this.subscriptionChanges.next(a),a))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(nn(1),V(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(o=>{if(!o)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(ra))}decodeBase64(n){return atob(n)}static#e=this.\u0275fac=function(r){return new(r||e)(ye(Ul))};static#t=this.\u0275prov=_e({token:e,factory:e.\u0275fac})}return e})(),sT=(()=>{class e{get isEnabled(){return this.sw.isEnabled}constructor(n){if(this.sw=n,!n.isEnabled)return this.versionUpdates=Br,this.available=Br,this.activated=Br,void(this.unrecoverable=Br);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe(tn(r=>"VERSION_READY"===r.type),M(r=>({type:"UPDATE_AVAILABLE",current:r.currentVersion,available:r.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(ra));const n=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:n},n)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(ra));const n=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:n},n)}static#e=this.\u0275fac=function(r){return new(r||e)(ye(Ul))};static#t=this.\u0275prov=_e({token:e,factory:e.\u0275fac})}return e})();const aT=new le("NGSW_REGISTER_SCRIPT");function XF(e,t,n,r){return()=>{if(!wE(r)||!("serviceWorker"in navigator)||!1===n.enabled)return;let o;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof n.registrationStrategy)o=n.registrationStrategy();else{const[a,...l]=(n.registrationStrategy||"registerWhenStable:30000").split(":");switch(a){case"registerImmediately":o=ge(null);break;case"registerWithDelay":o=cT(+l[0]||0);break;case"registerWhenStable":o=l[0]?xi(lT(e),cT(+l[0])):lT(e);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${n.registrationStrategy}`)}}e.get(Je).runOutsideAngular(()=>o.pipe(nn(1)).subscribe(()=>navigator.serviceWorker.register(t,{scope:n.scope}).catch(a=>console.error("Service worker registration failed with:",a))))}}function cT(e){return ge(null).pipe(function QF(e,t=rT){const n=function YF(e=0,t,n=qF){let r=-1;return null!=t&&(sn(t)?n=t:r=t),new ve(o=>{let i=function ZF(e){return e instanceof Date&&!isNaN(e)}(e)?+e-n.now():e;i<0&&(i=0);let a=0;return n.schedule(function(){o.closed||(o.next(a++),0<=r?this.schedule(void 0,r):o.complete())},i)})}(e,t);return oT(()=>n)}(e))}function lT(e){return e.get(pi).isStable.pipe(tn(n=>n))}function e1(e,t){return new Ul(wE(t)&&!1!==e.enabled?navigator.serviceWorker:void 0)}class Qf{}function t1(e,t={}){return function gd(e){return{\u0275providers:e}}([iT,sT,{provide:aT,useValue:e},{provide:Qf,useValue:t},{provide:Ul,useFactory:e1,deps:[Qf,Nr]},{provide:E_,useFactory:XF,deps:[bn,aT,Qf,Nr],multi:!0}])}let n1=(()=>{class e{static register(n,r={}){return{ngModule:e,providers:[t1(n,r)]}}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Kr({type:e});static#n=this.\u0275inj=wr({providers:[iT,sT]})}return e})();var Qn=A(861),Jf=A(630),r1=A(803),Bl=A(580);class uT{constructor(t){this.browserEnvironment=typeof window<"u",this.config=(0,r1._7)(t,this.browserEnvironment),this.logger=new Jf.Y(this.config.system.loggerOptions,Bl.u,Bl.i),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}let o1=(()=>{class e{static initializeNestedAppAuthBridge(){return(0,Qn.Z)(function*(){if(void 0===window)throw new Error("window is undefined");if(void 0===window.nestedAppAuthBridge)throw new Error("window.nestedAppAuthBridge is undefined");if(void 0===window.crypto)throw new Error("window.crypto is undefined");try{return e.crypto=window.crypto,window.nestedAppAuthBridge.addEventListener("message",r=>{const o=JSON.parse(r),i=e.bridgeRequests.find(a=>a.requestId===o.requestId);void 0!==i&&(e.bridgeRequests.splice(e.bridgeRequests.indexOf(i),1),o.success?i.resolve(o.body):i.reject(o.body))}),new Promise((r,o)=>{const i={messageType:"NestedAppAuthRequest",method:"GetInitContext",requestId:e.getRandomId()};e.bridgeRequests.push({requestId:i.requestId,method:i.method,resolve:r,reject:o}),window.nestedAppAuthBridge.postMessage(JSON.stringify(i))})}catch(n){throw window.console.log(n),n}})()}static getRandomId(){return e.crypto.randomUUID()}getTokenInteractive(n){return this.sendRequest("GetTokenPopup",n)}getTokenSilent(n){return this.sendRequest("GetToken",n)}getAccountInfo(n){let r="GetAccountByHomeId";return void 0!==n.homeAccountId&&(r="GetAccountByHomeId"),void 0!==n.localAccountId&&(r="GetAccountByLocalId"),void 0!==n.username&&(r="GetAccountByUsername"),this.sendRequest(r,n)}getActiveAccount(){return this.sendRequest("GetActiveAccount",void 0)}sendRequest(n,r){const o={messageType:"NestedAppAuthRequest",method:n,requestId:e.getRandomId(),body:r};return new Promise((a,l)=>{e.bridgeRequests.push({requestId:o.requestId,method:o.method,resolve:a,reject:l}),window.nestedAppAuthBridge.postMessage(JSON.stringify(o))})}constructor(n,r,o){this.sdkName=n,this.sdkVersion=r,this.capabilities=o}static create(){return(0,Qn.Z)(function*(){const n=yield e.initializeNestedAppAuthBridge();return new e(n.sdkName,n.sdkVersion,n.capabilities)})()}}return e.bridgeRequests=[],e})(),s1=(()=>{class e extends uT{constructor(){super(...arguments),this.bridgeProxy=void 0,this.activeAccount=void 0}getModuleName(){return e.MODULE_NAME}getId(){return e.ID}getBridgeProxy(){return this.bridgeProxy}getActiveAccount(){return this.activeAccount}setActiveAccount(n){this.activeAccount=n}initialize(){var n=this;return(0,Qn.Z)(function*(){try{if(typeof window<"u"){const r=yield o1.create();try{n.activeAccount=yield r.getActiveAccount()}catch{n.activeAccount=void 0}n.bridgeProxy=r,n.available=void 0!==r}else n.available=!1}catch{n.available=!1}finally{return n.available}})()}}return e.MODULE_NAME="",e.ID="TeamsAppOperatingContext",e})(),Xf=(()=>{class e extends uT{getModuleName(){return e.MODULE_NAME}getId(){return e.ID}initialize(){var n=this;return(0,Qn.Z)(function*(){return n.available=typeof window<"u",n.available})()}}return e.MODULE_NAME="",e.ID="StandardOperatingContext",e})();class a1{constructor(t){this.config=t,this.logger=new Jf.Y({loggerCallback:void 0,piiLoggingEnabled:!1,logLevel:void 0,correlationId:void 0},Bl.u,Bl.i)}createV3Controller(){var t=this;return(0,Qn.Z)(function*(){const n=new Xf(t.config);return yield n.initialize(),yield(yield Promise.resolve().then(A.bind(A,291))).StandardController.createController(n)})()}createController(){var t=this;return(0,Qn.Z)(function*(){const n=new Xf(t.config),r=new s1(t.config),o=[n.initialize(),r.initialize()];return yield Promise.all(o),r.isAvailable()&&r.getConfig().auth.supportsNestedAppAuth?yield(yield A.e(250).then(A.bind(A,250))).NestedAppAuthController.createController(r):n.isAvailable()?yield(yield Promise.resolve().then(A.bind(A,291))).StandardController.createController(n):null})()}}var c1=A(291);class ep{static createPublicClientApplication(t){return(0,Qn.Z)(function*(){const r=yield new a1(t).createV3Controller();return new ep(t,r)})()}constructor(t,n){if(n)this.controller=n;else{const r=new Xf(t);this.controller=new c1.StandardController(r)}}initialize(){var t=this;return(0,Qn.Z)(function*(){return t.controller.initialize()})()}acquireTokenPopup(t){var n=this;return(0,Qn.Z)(function*(){return n.controller.acquireTokenPopup(t)})()}acquireTokenRedirect(t){return this.controller.acquireTokenRedirect(t)}acquireTokenSilent(t){return this.controller.acquireTokenSilent(t)}acquireTokenByCode(t){return this.controller.acquireTokenByCode(t)}addEventCallback(t){return this.controller.addEventCallback(t)}removeEventCallback(t){return this.controller.removeEventCallback(t)}addPerformanceCallback(t){return this.controller.addPerformanceCallback(t)}removePerformanceCallback(t){return this.controller.removePerformanceCallback(t)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(t){return this.controller.getAccount(t)}getAccountByHomeId(t){return this.controller.getAccountByHomeId(t)}getAccountByLocalId(t){return this.controller.getAccountByLocalId(t)}getAccountByUsername(t){return this.controller.getAccountByUsername(t)}getAllAccounts(t){return this.controller.getAllAccounts(t)}handleRedirectPromise(t){return this.controller.handleRedirectPromise(t)}loginPopup(t){return this.controller.loginPopup(t)}loginRedirect(t){return this.controller.loginRedirect(t)}logout(t){return this.controller.logout(t)}logoutRedirect(t){return this.controller.logoutRedirect(t)}logoutPopup(t){return this.controller.logoutPopup(t)}ssoSilent(t){return this.controller.ssoSilent(t)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(t){this.controller.setLogger(t)}setActiveAccount(t){this.controller.setActiveAccount(t)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(t,n){return this.controller.initializeWrapperLibrary(t,n)}setNavigationClient(t){this.controller.setNavigationClient(t)}getConfiguration(){return this.controller.getConfiguration()}hydrateCache(t,n){var r=this;return(0,Qn.Z)(function*(){return r.controller.hydrateCache(t,n)})()}clearCache(t){return this.controller.clearCache(t)}}const l1=window.navigator.userAgent.indexOf("MSIE ")>-1||window.navigator.userAgent.indexOf("Trident/")>-1,u1={auth:{clientId:"51f28431-9dce-487b-928e-b261c1ac5004",authority:"https://login.microsoftonline.com/866c7a4c-8a59-4bd3-ad9f-8512a581efc0",redirectUri:"/",postLogoutRedirectUri:"/",navigateToLoginRequestUrl:!0},cache:{cacheLocation:it.Ix.LocalStorage,storeAuthStateInCookie:l1},system:{loggerOptions:{loggerCallback(e,t){console.log(t)},logLevel:Jf.i.Error,piiLoggingEnabled:!1}}},_T=new le("");let F1=(()=>{class e{intercept(n,r){const o=n.clone({headers:n.headers.set("Origin","http://localhost")});return r.handle(o)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=_e({token:e,factory:e.\u0275fac})}return e})();function H1(){return new ep(u1)}function U1(){return{interactionType:it.s_.Redirect}}let B1=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Kr({type:e,bootstrap:[NF,kF]});static#n=this.\u0275inj=wr({providers:[{provide:xl,useFactory:H1},{provide:Yf,useFactory:U1},{provide:_T,useClass:F1,multi:!0},Di,eT,Ll],imports:[WP,n1.register("ngsw-worker.js",{enabled:!0,registrationStrategy:"registerWhenStable:30000"}),OF]})}return e})();KP().bootstrapModule(B1).catch(e=>console.error(e))},475:(Ae,te,A)=>{A.d(te,{k:()=>_});class _{constructor(){this.cache=new Map}getItem(R){return this.cache.get(R)||null}setItem(R,O){this.cache.set(R,O)}removeItem(R){this.cache.delete(R)}getKeys(){const R=[];return this.cache.forEach((O,F)=>{R.push(F)}),R}containsKey(R){return this.cache.has(R)}clear(){this.cache.clear()}}},803:(Ae,te,A)=>{A.d(te,{Is:()=>De,_7:()=>ae});var _=A(500),m=A(132),R=A(286),O=A(630),F=A(703),H=A(140),P=A(841);const y={sendGetRequestAsync:()=>Promise.reject((0,H.zP)(P.M2)),sendPostRequestAsync:()=>Promise.reject((0,H.zP)(P.M2))};var T=A(979);class N{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class B{generateId(){return"callback-id"}startMeasurement($,J){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:T.$L.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:$,startTimeMs:Date.now(),correlationId:J||""},measurement:new N}}startPerformanceMeasurement(){return new N}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}var X=A(680),w=A(299),b=A(593);class z{navigateInternal($,J){return z.defaultNavigateWindow($,J)}navigateExternal($,J){return z.defaultNavigateWindow($,J)}static defaultNavigateWindow($,J){return J.noHistory?window.location.replace($):window.location.assign($),new Promise(oe=>{setTimeout(()=>{oe(!0)},J.timeout)})}}var Q=A(861),S=A(293),ne=A(377);class Z{sendGetRequestAsync($,J){var oe=this;return(0,Q.Z)(function*(){let Ce;try{Ce=yield fetch($,{method:b.EC.GET,headers:oe.getFetchHeaders(J)})}catch{throw window.navigator.onLine?(0,S.Z_)(ne.C8):(0,S.Z_)(ne.Mq)}try{return{headers:oe.getHeaderDict(Ce.headers),body:yield Ce.json(),status:Ce.status}}catch{throw(0,S.Z_)(ne.w6)}})()}sendPostRequestAsync($,J){var oe=this;return(0,Q.Z)(function*(){const Ce=J&&J.body||_.gT.EMPTY_STRING;let pe;try{pe=yield fetch($,{method:b.EC.POST,headers:oe.getFetchHeaders(J),body:Ce})}catch{throw window.navigator.onLine?(0,S.Z_)(ne.Dc):(0,S.Z_)(ne.Mq)}try{return{headers:oe.getHeaderDict(pe.headers),body:yield pe.json(),status:pe.status}}catch{throw(0,S.Z_)(ne.w6)}})()}getFetchHeaders($){const J=new Headers;if(!$||!$.headers)return J;const oe=$.headers;return Object.keys(oe).forEach(Ce=>{J.append(Ce,oe[Ce])}),J}getHeaderDict($){const J={};return $.forEach((oe,Ce)=>{J[Ce]=oe}),J}}const He=6e4,De=6e3,ie=3e4,Ie=2e3;function ae({auth:K,cache:$,system:J,telemetry:oe},Ce){const pe={clientId:_.gT.EMPTY_STRING,authority:`${_.gT.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:_.gT.EMPTY_STRING,authorityMetadata:_.gT.EMPTY_STRING,redirectUri:_.gT.EMPTY_STRING,postLogoutRedirectUri:_.gT.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:m.A.AAD,OIDCOptions:{serverResponseType:_.rg.FRAGMENT,defaultScopes:[_.gT.OPENID_SCOPE,_.gT.PROFILE_SCOPE,_.gT.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:R.z.None,tenant:_.gT.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1},Pe={cacheLocation:b.Ix.SessionStorage,temporaryCacheLocation:b.Ix.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!(!$||$.cacheLocation!==b.Ix.LocalStorage),claimsBasedCachingEnabled:!1},Me={loggerCallback:()=>{},logLevel:O.i.Info,piiLoggingEnabled:!1},qe={...{...F.z,loggerOptions:Me,networkClient:Ce?new Z:y,navigationClient:new z,loadFrameTimeout:0,windowHashTimeout:J?.loadFrameTimeout||He,iframeHashTimeout:J?.loadFrameTimeout||De,navigateFrameWait:0,redirectNavigationTimeout:ie,asyncPopups:!1,allowRedirectInIframe:!1,allowNativeBroker:!1,nativeBrokerHandshakeTimeout:J?.nativeBrokerHandshakeTimeout||Ie,pollIntervalMilliseconds:b.qx.DEFAULT_POLL_INTERVAL_MS},...J,loggerOptions:J?.loggerOptions||Me},at={application:{appName:_.gT.EMPTY_STRING,appVersion:_.gT.EMPTY_STRING},client:new B};if(K?.protocolMode!==m.A.OIDC&&K?.OIDCOptions&&new O.Y(qe.loggerOptions).warning(JSON.stringify((0,X.ei)(w.qz))),K?.protocolMode&&K.protocolMode!==m.A.AAD&&qe?.allowNativeBroker)throw(0,X.ei)(w.Ol);return{auth:{...pe,...K,OIDCOptions:{...pe.OIDCOptions,...K?.OIDCOptions}},cache:{...Pe,...$},system:qe,telemetry:{...at,...oe}}}},291:(Ae,te,A)=>{A.r(te),A.d(te,{StandardController:()=>Vr});var _=A(861),m=A(341),R=A(214),O=A(63),H=A(581),P=A(140),y=A(500),T=A(322),N=A(680),B=A(132),X=A(441);class w{constructor(){this.expiresAt=X.I.nowSeconds()+y.QU.REFRESH_TIME_SECONDS}updateCloudDiscoveryMetadata(s,c){this.aliases=s.aliases,this.preferred_cache=s.preferred_cache,this.preferred_network=s.preferred_network,this.aliasesFromNetwork=c}updateEndpointMetadata(s,c){this.authorization_endpoint=s.authorization_endpoint,this.token_endpoint=s.token_endpoint,this.end_session_endpoint=s.end_session_endpoint,this.issuer=s.issuer,this.endpointsFromNetwork=c,this.jwks_uri=s.jwks_uri}updateCanonicalAuthority(s){this.canonical_authority=s}resetExpiresAt(){this.expiresAt=X.I.nowSeconds()+y.QU.REFRESH_TIME_SECONDS}isExpired(){return this.expiresAt<=X.I.nowSeconds()}static isAuthorityMetadataEntity(s,c){return!!c&&0===s.indexOf(y.QU.CACHE_KEY)&&c.hasOwnProperty("aliases")&&c.hasOwnProperty("preferred_cache")&&c.hasOwnProperty("preferred_network")&&c.hasOwnProperty("canonical_authority")&&c.hasOwnProperty("authorization_endpoint")&&c.hasOwnProperty("token_endpoint")&&c.hasOwnProperty("issuer")&&c.hasOwnProperty("aliasesFromNetwork")&&c.hasOwnProperty("endpointsFromNetwork")&&c.hasOwnProperty("expiresAt")&&c.hasOwnProperty("jwks_uri")}}var b=A(286),S=A(979);const ne=(V,s,c,d,f)=>(...g)=>{c.trace(`Executing function ${s}`);const C=d?.startMeasurement(s,f);try{const I=V(...g);return C?.end({success:!0}),c.trace(`Returning result from ${s}`),I}catch(I){c.trace(`Error occurred in ${s}`);try{c.trace(JSON.stringify(I))}catch{c.trace("Unable to print error message.")}throw C?.end({success:!1}),I}},Z=(V,s,c,d,f)=>(...g)=>{c.trace(`Executing function ${s}`);const C=d?.startMeasurement(s,f);return d?.setPreQueueTime(s,f),V(...g).then(I=>(c.trace(`Returning result from ${s}`),C?.end({success:!0}),I)).catch(I=>{c.trace(`Error occurred in ${s}`);try{c.trace(JSON.stringify(I))}catch{c.trace("Unable to print error message.")}throw C?.end({success:!1}),I})};let He=(()=>{class V{constructor(c,d,f,g){this.networkInterface=c,this.logger=d,this.performanceClient=f,this.correlationId=g}detectRegion(c,d){var f=this;return(0,_.Z)(function*(){f.performanceClient?.addQueueMeasurement(S.Ak.RegionDiscoveryDetectRegion,f.correlationId);let g=c;if(g)d.region_source=y.W.ENVIRONMENT_VARIABLE;else{const C=V.IMDS_OPTIONS;try{const I=yield Z(f.getRegionFromIMDS.bind(f),S.Ak.RegionDiscoveryGetRegionFromIMDS,f.logger,f.performanceClient,f.correlationId)(y.gT.IMDS_VERSION,C);if(I.status===y.YY.httpSuccess&&(g=I.body,d.region_source=y.W.IMDS),I.status===y.YY.httpBadRequest){const L=yield Z(f.getCurrentVersion.bind(f),S.Ak.RegionDiscoveryGetCurrentVersion,f.logger,f.performanceClient,f.correlationId)(C);if(!L)return d.region_source=y.W.FAILED_AUTO_DETECTION,null;const k=yield Z(f.getRegionFromIMDS.bind(f),S.Ak.RegionDiscoveryGetRegionFromIMDS,f.logger,f.performanceClient,f.correlationId)(L,C);k.status===y.YY.httpSuccess&&(g=k.body,d.region_source=y.W.IMDS)}}catch{return d.region_source=y.W.FAILED_AUTO_DETECTION,null}}return g||(d.region_source=y.W.FAILED_AUTO_DETECTION),g||null})()}getRegionFromIMDS(c,d){var f=this;return(0,_.Z)(function*(){return f.performanceClient?.addQueueMeasurement(S.Ak.RegionDiscoveryGetRegionFromIMDS,f.correlationId),f.networkInterface.sendGetRequestAsync(`${y.gT.IMDS_ENDPOINT}?api-version=${c}&format=text`,d,y.gT.IMDS_TIMEOUT)})()}getCurrentVersion(c){var d=this;return(0,_.Z)(function*(){d.performanceClient?.addQueueMeasurement(S.Ak.RegionDiscoveryGetCurrentVersion,d.correlationId);try{const f=yield d.networkInterface.sendGetRequestAsync(`${y.gT.IMDS_ENDPOINT}?format=json`,c);return f.status===y.YY.httpBadRequest&&f.body&&f.body["newest-versions"]&&f.body["newest-versions"].length>0?f.body["newest-versions"][0]:null}catch{return null}})()}}return V.IMDS_OPTIONS={headers:{Metadata:"true"}},V})();var De=A(481),ie=A(841),Ie=A(299);class ae{constructor(s,c,d,f,g,C,I){this.canonicalAuthority=s,this._canonicalAuthority.validateAsUri(),this.networkInterface=c,this.cacheManager=d,this.authorityOptions=f,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=g,this.performanceClient=C,this.correlationId=I,this.regionDiscovery=new He(c,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(s){if(s.HostNameAndPort.endsWith(y.gT.CIAM_AUTH_URL))return O.a.Ciam;const c=s.PathSegments;if(c.length)switch(c[0].toLowerCase()){case y.gT.ADFS:return O.a.Adfs;case y.gT.DSTS:return O.a.Dsts}return O.a.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(s){this._canonicalAuthority=new H.G(s),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw(0,P.zP)(ie.HO)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw(0,P.zP)(ie.HO)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw(0,P.zP)(ie.HO)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw(0,P.zP)(ie.ig);return this.replacePath(this.metadata.end_session_endpoint)}throw(0,P.zP)(ie.HO)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw(0,P.zP)(ie.HO)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw(0,P.zP)(ie.HO)}canReplaceTenant(s){return 1===s.PathSegments.length&&!ae.reservedTenantDomains.has(s.PathSegments[0])&&this.getAuthorityType(s)===O.a.Default&&this.protocolMode===B.A.AAD}replaceTenant(s){return s.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(s){let c=s;const f=new H.G(this.metadata.canonical_authority).getUrlComponents(),g=f.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((I,L)=>{let k=g[L];if(0===L&&this.canReplaceTenant(f)){const G=new H.G(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];k!==G&&(this.logger.verbose(`Replacing tenant domain name ${k} with id ${G}`),k=G)}I!==k&&(c=c.replace(`/${k}/`,`/${I}/`))}),this.replaceTenant(c)}get defaultOpenIdConfigurationEndpoint(){const s=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===O.a.Adfs||this.protocolMode!==B.A.AAD&&!this.isAliasOfKnownMicrosoftAuthority(s)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}resolveEndpointsAsync(){var s=this;return(0,_.Z)(function*(){s.performanceClient?.addQueueMeasurement(S.Ak.AuthorityResolveEndpointsAsync,s.correlationId);const c=s.getCurrentMetadataEntity(),d=yield Z(s.updateCloudDiscoveryMetadata.bind(s),S.Ak.AuthorityUpdateCloudDiscoveryMetadata,s.logger,s.performanceClient,s.correlationId)(c);s.canonicalAuthority=s.canonicalAuthority.replace(s.hostnameAndPort,c.preferred_network);const f=yield Z(s.updateEndpointMetadata.bind(s),S.Ak.AuthorityUpdateEndpointMetadata,s.logger,s.performanceClient,s.correlationId)(c);s.updateCachedMetadata(c,d,{source:f})})()}getCurrentMetadataEntity(){let s=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return s||(s=new w,s.updateCanonicalAuthority(this.canonicalAuthority)),s}updateCachedMetadata(s,c,d){c!==y.pQ.CACHE&&d?.source!==y.pQ.CACHE&&(s.resetExpiresAt(),s.updateCanonicalAuthority(this.canonicalAuthority));const f=this.cacheManager.generateAuthorityMetadataCacheKey(s.preferred_cache);this.cacheManager.setAuthorityMetadata(f,s),this.metadata=s}updateEndpointMetadata(s){var c=this;return(0,_.Z)(function*(){c.performanceClient?.addQueueMeasurement(S.Ak.AuthorityUpdateEndpointMetadata,c.correlationId);const d=c.updateEndpointMetadataFromLocalSources(s);if(d){if(d.source===y.pQ.HARDCODED_VALUES&&c.authorityOptions.azureRegionConfiguration?.azureRegion&&d.metadata){const g=yield Z(c.updateMetadataWithRegionalInformation.bind(c),S.Ak.AuthorityUpdateMetadataWithRegionalInformation,c.logger,c.performanceClient,c.correlationId)(d.metadata);s.updateEndpointMetadata(g,!1)}return d.source}let f=yield Z(c.getEndpointMetadataFromNetwork.bind(c),S.Ak.AuthorityGetEndpointMetadataFromNetwork,c.logger,c.performanceClient,c.correlationId)();if(f)return c.authorityOptions.azureRegionConfiguration?.azureRegion&&(f=yield Z(c.updateMetadataWithRegionalInformation.bind(c),S.Ak.AuthorityUpdateMetadataWithRegionalInformation,c.logger,c.performanceClient,c.correlationId)(f)),s.updateEndpointMetadata(f,!0),y.pQ.NETWORK;throw(0,P.zP)(ie.Ce,c.defaultOpenIdConfigurationEndpoint)})()}updateEndpointMetadataFromLocalSources(s){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const c=this.getEndpointMetadataFromConfig();if(c)return this.logger.verbose("Found endpoint metadata in authority configuration"),s.updateEndpointMetadata(c,!1),{source:y.pQ.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const f=this.getEndpointMetadataFromHardcodedValues();if(f)return s.updateEndpointMetadata(f,!1),{source:y.pQ.HARDCODED_VALUES,metadata:f};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const d=s.isExpired();return this.isAuthoritySameType(s)&&s.endpointsFromNetwork&&!d?(this.logger.verbose("Found endpoint metadata in the cache."),{source:y.pQ.CACHE}):(d&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(s){return new H.G(s.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw(0,N.ei)(Ie.zx)}return null}getEndpointMetadataFromNetwork(){var s=this;return(0,_.Z)(function*(){s.performanceClient?.addQueueMeasurement(S.Ak.AuthorityGetEndpointMetadataFromNetwork,s.correlationId);const c={},d=s.defaultOpenIdConfigurationEndpoint;s.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${d}`);try{const f=yield s.networkInterface.sendGetRequestAsync(d,c);return function F(V){return V.hasOwnProperty("authorization_endpoint")&&V.hasOwnProperty("token_endpoint")&&V.hasOwnProperty("issuer")&&V.hasOwnProperty("jwks_uri")}(f.body)?f.body:(s.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(f){return s.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${f}`),null}})()}getEndpointMetadataFromHardcodedValues(){return this.canonicalAuthority in T.Qh?T.Qh[this.canonicalAuthority]:null}updateMetadataWithRegionalInformation(s){var c=this;return(0,_.Z)(function*(){c.performanceClient?.addQueueMeasurement(S.Ak.AuthorityUpdateMetadataWithRegionalInformation,c.correlationId);const d=c.authorityOptions.azureRegionConfiguration?.azureRegion;if(d){if(d!==y.gT.AZURE_REGION_AUTO_DISCOVER_FLAG)return c.regionDiscoveryMetadata.region_outcome=y.ki.CONFIGURED_NO_AUTO_DETECTION,c.regionDiscoveryMetadata.region_used=d,ae.replaceWithRegionalInformation(s,d);const f=yield Z(c.regionDiscovery.detectRegion.bind(c.regionDiscovery),S.Ak.RegionDiscoveryDetectRegion,c.logger,c.performanceClient,c.correlationId)(c.authorityOptions.azureRegionConfiguration?.environmentRegion,c.regionDiscoveryMetadata);if(f)return c.regionDiscoveryMetadata.region_outcome=y.ki.AUTO_DETECTION_REQUESTED_SUCCESSFUL,c.regionDiscoveryMetadata.region_used=f,ae.replaceWithRegionalInformation(s,f);c.regionDiscoveryMetadata.region_outcome=y.ki.AUTO_DETECTION_REQUESTED_FAILED}return s})()}updateCloudDiscoveryMetadata(s){var c=this;return(0,_.Z)(function*(){c.performanceClient?.addQueueMeasurement(S.Ak.AuthorityUpdateCloudDiscoveryMetadata,c.correlationId);const d=c.updateCloudDiscoveryMetadataFromLocalSources(s);if(d)return d;const f=yield Z(c.getCloudDiscoveryMetadataFromNetwork.bind(c),S.Ak.AuthorityGetCloudDiscoveryMetadataFromNetwork,c.logger,c.performanceClient,c.correlationId)();if(f)return s.updateCloudDiscoveryMetadata(f,!0),y.pQ.NETWORK;throw(0,N.ei)(Ie.o_)})()}updateCloudDiscoveryMetadataFromLocalSources(s){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||y.gT.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||y.gT.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${s.canonical_authority||y.gT.NOT_APPLICABLE}`);const c=this.getCloudDiscoveryMetadataFromConfig();if(c)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),s.updateCloudDiscoveryMetadata(c,!1),y.pQ.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const f=(0,T.ix)(this.canonicalAuthority);if(f)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),s.updateCloudDiscoveryMetadata(f,!1),y.pQ.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const d=s.isExpired();return this.isAuthoritySameType(s)&&s.aliasesFromNetwork&&!d?(this.logger.verbose("Found cloud discovery metadata in the cache."),y.pQ.CACHE):(d&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===O.a.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),ae.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const s=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),c=(0,T.eM)(s.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),c)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),c;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),(0,N.ei)(Ie.E)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),ae.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}getCloudDiscoveryMetadataFromNetwork(){var s=this;return(0,_.Z)(function*(){s.performanceClient?.addQueueMeasurement(S.Ak.AuthorityGetCloudDiscoveryMetadataFromNetwork,s.correlationId);const c=`${y.gT.AAD_INSTANCE_DISCOVERY_ENDPT}${s.canonicalAuthority}oauth2/v2.0/authorize`,d={};let f=null;try{const g=yield s.networkInterface.sendGetRequestAsync(c,d);let C,I;if(function z(V){return V.hasOwnProperty("tenant_discovery_endpoint")&&V.hasOwnProperty("metadata")}(g.body))C=g.body,I=C.metadata,s.logger.verbosePii(`tenant_discovery_endpoint is: ${C.tenant_discovery_endpoint}`);else{if(!function Q(V){return V.hasOwnProperty("error")&&V.hasOwnProperty("error_description")}(g.body))return s.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;if(s.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${g.status}`),C=g.body,C.error===y.gT.INVALID_INSTANCE)return s.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;s.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${C.error}`),s.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${C.error_description}`),s.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),I=[]}s.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),f=(0,T.eM)(I,s.hostnameAndPort)}catch(g){return s.logger.error(g instanceof De.l4?`There was a network error while attempting to get the cloud discovery instance metadata.\nError: ${g.errorCode}\nError Description: ${g.errorMessage}`:`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.\nError: ${g.name}\nError Description: ${g.message}`),null}return f||(s.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),s.logger.verbose("Creating custom Authority for custom domain scenario."),f=ae.createCloudDiscoveryMetadataFromHost(s.hostnameAndPort)),f})()}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(c=>H.G.getDomainFromUrl(c).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(s,c){let d;return c&&c.azureCloudInstance!==b.z.None&&(d=`${c.azureCloudInstance}/${c.tenant?c.tenant:y.gT.DEFAULT_COMMON_TENANT}/`),d||s}static createCloudDiscoveryMetadataFromHost(s){return{preferred_network:s,preferred_cache:s,aliases:[s]}}getPreferredCache(){if(this.discoveryComplete())return this.metadata.preferred_cache;throw(0,P.zP)(ie.HO)}isAlias(s){return this.metadata.aliases.indexOf(s)>-1}isAliasOfKnownMicrosoftAuthority(s){return T.wn.has(s)}static isPublicCloudAuthority(s){return y.gT.KNOWN_PUBLIC_CLOUDS.indexOf(s)>=0}static buildRegionalAuthorityString(s,c,d){const f=new H.G(s);f.validateAsUri();const g=f.getUrlComponents();let C=`${c}.${g.HostNameAndPort}`;this.isPublicCloudAuthority(g.HostNameAndPort)&&(C=`${c}.${y.gT.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const I=H.G.constructAuthorityUriFromObject({...f.getUrlComponents(),HostNameAndPort:C}).urlString;return d?`${I}?${d}`:I}static replaceWithRegionalInformation(s,c){const d={...s};return d.authorization_endpoint=ae.buildRegionalAuthorityString(d.authorization_endpoint,c),d.token_endpoint=ae.buildRegionalAuthorityString(d.token_endpoint,c,y.gT.REGIONAL_AUTH_NON_MSI_QUERY_STRING),d.end_session_endpoint&&(d.end_session_endpoint=ae.buildRegionalAuthorityString(d.end_session_endpoint,c)),d}static transformCIAMAuthority(s){let c=s;const f=new H.G(s).getUrlComponents();return 0===f.PathSegments.length&&f.HostNameAndPort.endsWith(y.gT.CIAM_AUTH_URL)&&(c=`${c}${f.HostNameAndPort.split(".")[0]}${y.gT.AAD_TENANT_DOMAIN_SUFFIX}`),c}}function K(V){return V.endsWith(y.gT.FORWARD_SLASH)?V:`${V}${y.gT.FORWARD_SLASH}`}ae.reservedTenantDomains=new Set(["{tenant}","{tenantid}",y.Nb.COMMON,y.Nb.CONSUMERS,y.Nb.ORGANIZATIONS]);var J=A(544),oe=A(603),Ce=A(498),pe=A(723);class Pe{generateAccountId(){return Pe.generateAccountIdForCacheKey(this.homeAccountId,this.environment)}generateCredentialId(){return Pe.generateCredentialIdForCacheKey(this.credentialType,this.clientId,this.realm,this.familyId)}generateTarget(){return Pe.generateTargetForCacheKey(this.target)}generateCredentialKey(){return Pe.generateCredentialCacheKey(this.homeAccountId,this.environment,this.credentialType,this.clientId,this.realm,this.target,this.familyId,this.tokenType,this.requestedClaimsHash)}generateType(){switch(this.credentialType){case y.d3.ID_TOKEN:return y.LL.ID_TOKEN;case y.d3.ACCESS_TOKEN:case y.d3.ACCESS_TOKEN_WITH_AUTH_SCHEME:return y.LL.ACCESS_TOKEN;case y.d3.REFRESH_TOKEN:return y.LL.REFRESH_TOKEN;default:throw(0,P.zP)(ie.cy)}}static generateCredentialCacheKey(s,c,d,f,g,C,I,L,k){return[this.generateAccountIdForCacheKey(s,c),this.generateCredentialIdForCacheKey(d,f,g,I),this.generateTargetForCacheKey(C),this.generateClaimsHashForCacheKey(k),this.generateSchemeForCacheKey(L)].join(y.Bv.CACHE_KEY_SEPARATOR).toLowerCase()}static generateAccountIdForCacheKey(s,c){return[s,c].join(y.Bv.CACHE_KEY_SEPARATOR).toLowerCase()}static generateCredentialIdForCacheKey(s,c,d,f){return[s,s===y.d3.REFRESH_TOKEN&&f||c,d||y.gT.EMPTY_STRING].join(y.Bv.CACHE_KEY_SEPARATOR).toLowerCase()}static generateTargetForCacheKey(s){return(s||y.gT.EMPTY_STRING).toLowerCase()}static generateClaimsHashForCacheKey(s){return(s||y.gT.EMPTY_STRING).toLowerCase()}static generateSchemeForCacheKey(s){return s&&s.toLowerCase()!==y.hO.BEARER.toLowerCase()?s.toLowerCase():y.gT.EMPTY_STRING}}class Me extends Pe{static createIdTokenEntity(s,c,d,f,g){const C=new Me;return C.credentialType=y.d3.ID_TOKEN,C.homeAccountId=s,C.environment=c,C.clientId=f,C.secret=d,C.realm=g,C}static isIdTokenEntity(s){return!!s&&s.hasOwnProperty("homeAccountId")&&s.hasOwnProperty("environment")&&s.hasOwnProperty("credentialType")&&s.hasOwnProperty("realm")&&s.hasOwnProperty("clientId")&&s.hasOwnProperty("secret")&&s.credentialType===y.d3.ID_TOKEN}}var ve=A(82);class qe extends Pe{static createAccessTokenEntity(s,c,d,f,g,C,I,L,k,G,ce,be,We,Y,ht){const re=new qe;re.homeAccountId=s,re.credentialType=y.d3.ACCESS_TOKEN,re.secret=d;const Oe=X.I.nowSeconds();if(re.cachedAt=Oe.toString(),re.expiresOn=I.toString(),re.extendedExpiresOn=L.toString(),G&&(re.refreshOn=G.toString()),re.environment=c,re.clientId=f,re.realm=g,re.target=C,re.userAssertionHash=be,re.tokenType=ce||y.hO.BEARER,Y&&(re.requestedClaims=Y,re.requestedClaimsHash=ht),re.tokenType?.toLowerCase()!==y.hO.BEARER.toLowerCase())switch(re.credentialType=y.d3.ACCESS_TOKEN_WITH_AUTH_SCHEME,re.tokenType){case y.hO.POP:const an=(0,ve.Z_)(d,k.base64Decode);if(!an?.cnf?.kid)throw(0,P.zP)(ie.P_);re.keyId=an.cnf.kid;break;case y.hO.SSH:re.keyId=We}return re}static isAccessTokenEntity(s){return!!s&&s.hasOwnProperty("homeAccountId")&&s.hasOwnProperty("environment")&&s.hasOwnProperty("credentialType")&&s.hasOwnProperty("realm")&&s.hasOwnProperty("clientId")&&s.hasOwnProperty("secret")&&s.hasOwnProperty("target")&&(s.credentialType===y.d3.ACCESS_TOKEN||s.credentialType===y.d3.ACCESS_TOKEN_WITH_AUTH_SCHEME)}}class at extends Pe{static createRefreshTokenEntity(s,c,d,f,g,C){const I=new at;return I.clientId=f,I.credentialType=y.d3.REFRESH_TOKEN,I.environment=c,I.homeAccountId=s,I.secret=d,I.userAssertionHash=C,g&&(I.familyId=g),I}static isRefreshTokenEntity(s){return!!s&&s.hasOwnProperty("homeAccountId")&&s.hasOwnProperty("environment")&&s.hasOwnProperty("credentialType")&&s.hasOwnProperty("clientId")&&s.hasOwnProperty("secret")&&s.credentialType===y.d3.REFRESH_TOKEN}}class _t{generateAppMetadataKey(){return _t.generateAppMetadataCacheKey(this.environment,this.clientId)}static generateAppMetadataCacheKey(s,c){return[y.dg,s,c].join(y.Bv.CACHE_KEY_SEPARATOR).toLowerCase()}static createAppMetadataEntity(s,c,d){const f=new _t;return f.clientId=s,f.environment=c,d&&(f.familyId=d),f}static isAppMetadataEntity(s,c){return!!c&&0===s.indexOf(y.dg)&&c.hasOwnProperty("clientId")&&c.hasOwnProperty("environment")}}class rn{constructor(){this.failedRequests=[],this.errors=[],this.cacheHits=0}static isServerTelemetryEntity(s,c){const d=0===s.indexOf(y.HN.CACHE_KEY);let f=!0;return c&&(f=c.hasOwnProperty("failedRequests")&&c.hasOwnProperty("errors")&&c.hasOwnProperty("cacheHits")),d&&f}}class Qe{static isThrottlingEntity(s,c){let d=!1;s&&(d=0===s.indexOf(y.bb.THROTTLING_PREFIX));let f=!0;return c&&(f=c.hasOwnProperty("throttleTime")),d&&f}}var Gt=A(92);class mt{static setRequestState(s,c,d){const f=mt.generateLibraryState(s,d);return c?`${f}${y.gT.RESOURCE_DELIM}${c}`:f}static generateLibraryState(s,c){if(!s)throw(0,P.zP)(ie.QL);const d={id:s.createNewGuid()};c&&(d.meta=c);const f=JSON.stringify(d);return s.base64Encode(f)}static parseRequestState(s,c){if(!s)throw(0,P.zP)(ie.QL);if(!c)throw(0,P.zP)(ie.r8);try{const d=c.split(y.gT.RESOURCE_DELIM),f=d[0],g=d.length>1?d.slice(1).join(y.gT.RESOURCE_DELIM):y.gT.EMPTY_STRING,C=s.base64Decode(f),I=JSON.parse(C);return{userRequestState:g||y.gT.EMPTY_STRING,libraryState:I}}catch{throw(0,P.zP)(ie.r8)}}}class Ve{constructor(s,c,d,f,g){this.account=s||null,this.idToken=c||null,this.accessToken=d||null,this.refreshToken=f||null,this.appMetadata=g||null}}var ue=A(293),M=A(593),yr=A(325),ia=A(94);class po{constructor(s){this.validateWindowStorage(s),this.windowStorage=window[s]}validateWindowStorage(s){if(s!==M.Ix.LocalStorage&&s!==M.Ix.SessionStorage||!window[s])throw(0,yr.Z1)(ia.m4)}getItem(s){return this.windowStorage.getItem(s)}setItem(s,c){this.windowStorage.setItem(s,c)}removeItem(s){this.windowStorage.removeItem(s)}getKeys(){return Object.keys(this.windowStorage)}containsKey(s){return this.windowStorage.hasOwnProperty(s)}}var sa=A(475);class aa{static extractBrowserRequestState(s,c){if(!c)return null;try{return mt.parseRequestState(s,c).libraryState.meta}catch{throw(0,P.zP)(ie.r8)}}static parseServerResponseFromHash(s){if(!s)return{};const c=new H.G(s);return H.G.getDeserializedHash(c.getHash())}}var go=A(787),ca=A(173),de=A(377);class la extends pe.L{constructor(s,c,d,f,g){super(s,d,f,g),this.COOKIE_LIFE_MULTIPLIER=864e5,this.cacheConfig=c,this.logger=f,this.internalStorage=new sa.k,this.browserStorage=this.setupBrowserStorage(this.cacheConfig.cacheLocation),this.temporaryCacheStorage=this.setupTemporaryCacheStorage(this.cacheConfig.temporaryCacheLocation,this.cacheConfig.cacheLocation),c.cacheMigrationEnabled&&(this.migrateCacheEntries(),this.createKeyMaps())}setupBrowserStorage(s){switch(s){case M.Ix.LocalStorage:case M.Ix.SessionStorage:try{return new po(s)}catch(c){this.logger.verbose(c);break}}return this.cacheConfig.cacheLocation=M.Ix.MemoryStorage,new sa.k}setupTemporaryCacheStorage(s,c){switch(c){case M.Ix.LocalStorage:case M.Ix.SessionStorage:try{return new po(s||M.Ix.SessionStorage)}catch(d){return this.logger.verbose(d),this.internalStorage}default:return this.internalStorage}}migrateCacheEntries(){const c=`${y.gT.CACHE_PREFIX}.${y.Vi.CLIENT_INFO}`,d=`${y.gT.CACHE_PREFIX}.${y.Vi.ERROR}`,f=`${y.gT.CACHE_PREFIX}.${y.Vi.ERROR_DESC}`,k=[this.browserStorage.getItem(`${y.gT.CACHE_PREFIX}.${y.Vi.ID_TOKEN}`),this.browserStorage.getItem(c),this.browserStorage.getItem(d),this.browserStorage.getItem(f)];[y.Vi.ID_TOKEN,y.Vi.CLIENT_INFO,y.Vi.ERROR,y.Vi.ERROR_DESC].forEach((ce,be)=>this.migrateCacheEntry(ce,k[be]))}migrateCacheEntry(s,c){c&&this.setTemporaryCache(s,c,!0)}createKeyMaps(){this.logger.trace("BrowserCacheManager - createKeyMaps called.");const s=this.getItem(M.Oq.ACCOUNT_KEYS),c=this.getItem(`${M.Oq.TOKEN_KEYS}.${this.clientId}`);s&&c?this.logger.verbose("BrowserCacheManager:createKeyMaps - account and token key maps already exist, skipping migration."):this.browserStorage.getKeys().forEach(f=>{if(this.isCredentialKey(f)){const g=this.getItem(f);if(g){const C=this.validateAndParseJson(g);if(C&&C.hasOwnProperty("credentialType"))switch(C.credentialType){case y.d3.ID_TOKEN:if(Me.isIdTokenEntity(C)){this.logger.trace("BrowserCacheManager:createKeyMaps - idToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - idToken with key: ${f} found, saving key to token key map`);const I=pe.L.toObject(new Me,C),L=this.updateCredentialCacheKey(f,I);return void this.addTokenKey(L,y.d3.ID_TOKEN)}this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching idToken schema with value containing idToken credentialType field but value failed IdTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed idToken validation on key: ${f}`);break;case y.d3.ACCESS_TOKEN:case y.d3.ACCESS_TOKEN_WITH_AUTH_SCHEME:if(qe.isAccessTokenEntity(C)){this.logger.trace("BrowserCacheManager:createKeyMaps - accessToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - accessToken with key: ${f} found, saving key to token key map`);const I=pe.L.toObject(new qe,C),L=this.updateCredentialCacheKey(f,I);return void this.addTokenKey(L,y.d3.ACCESS_TOKEN)}this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching accessToken schema with value containing accessToken credentialType field but value failed AccessTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed accessToken validation on key: ${f}`);break;case y.d3.REFRESH_TOKEN:if(at.isRefreshTokenEntity(C)){this.logger.trace("BrowserCacheManager:createKeyMaps - refreshToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - refreshToken with key: ${f} found, saving key to token key map`);const I=pe.L.toObject(new at,C),L=this.updateCredentialCacheKey(f,I);return void this.addTokenKey(L,y.d3.REFRESH_TOKEN)}this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching refreshToken schema with value containing refreshToken credentialType field but value failed RefreshTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed refreshToken validation on key: ${f}`)}}}if(this.isAccountKey(f)){const g=this.getItem(f);if(g){const C=this.validateAndParseJson(g);C&&oe.r.isAccountEntity(C)&&(this.logger.trace("BrowserCacheManager:createKeyMaps - account found, saving key to account key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - account with key: ${f} found, saving key to account key map`),this.addAccountKeyToMap(f))}}})}validateAndParseJson(s){try{const c=JSON.parse(s);return c&&"object"==typeof c?c:null}catch{return null}}getItem(s){return this.browserStorage.getItem(s)}setItem(s,c){this.browserStorage.setItem(s,c)}getAccount(s){this.logger.trace("BrowserCacheManager.getAccount called");const c=this.getItem(s);if(!c)return this.removeAccountKeyFromMap(s),null;const d=this.validateAndParseJson(c);return d&&oe.r.isAccountEntity(d)?pe.L.toObject(new oe.r,d):(this.removeAccountKeyFromMap(s),null)}setAccount(s){this.logger.trace("BrowserCacheManager.setAccount called");const c=s.generateAccountKey();this.setItem(c,JSON.stringify(s)),this.addAccountKeyToMap(c)}getAccountKeys(){this.logger.trace("BrowserCacheManager.getAccountKeys called");const s=this.getItem(M.Oq.ACCOUNT_KEYS);return s?JSON.parse(s):(this.logger.verbose("BrowserCacheManager.getAccountKeys - No account keys found"),[])}addAccountKeyToMap(s){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${s}`);const c=this.getAccountKeys();-1===c.indexOf(s)?(c.push(s),this.setItem(M.Oq.ACCOUNT_KEYS,JSON.stringify(c)),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added")):this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map")}removeAccountKeyFromMap(s){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${s}`);const c=this.getAccountKeys(),d=c.indexOf(s);d>-1?(c.splice(d,1),this.setItem(M.Oq.ACCOUNT_KEYS,JSON.stringify(c)),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(s){var c=()=>super.removeAccount,d=this;return(0,_.Z)(function*(){c().call(d,s),d.removeAccountKeyFromMap(s)})()}removeIdToken(s){super.removeIdToken(s),this.removeTokenKey(s,y.d3.ID_TOKEN)}removeAccessToken(s){var c=()=>super.removeAccessToken,d=this;return(0,_.Z)(function*(){c().call(d,s),d.removeTokenKey(s,y.d3.ACCESS_TOKEN)})()}removeRefreshToken(s){super.removeRefreshToken(s),this.removeTokenKey(s,y.d3.REFRESH_TOKEN)}getTokenKeys(){this.logger.trace("BrowserCacheManager.getTokenKeys called");const s=this.getItem(`${M.Oq.TOKEN_KEYS}.${this.clientId}`);if(s){const c=this.validateAndParseJson(s);if(c&&c.hasOwnProperty("idToken")&&c.hasOwnProperty("accessToken")&&c.hasOwnProperty("refreshToken"))return c;this.logger.error("BrowserCacheManager.getTokenKeys - Token keys found but in an unknown format. Returning empty key map.")}else this.logger.verbose("BrowserCacheManager.getTokenKeys - No token keys found");return{idToken:[],accessToken:[],refreshToken:[]}}addTokenKey(s,c){this.logger.trace("BrowserCacheManager addTokenKey called");const d=this.getTokenKeys();switch(c){case y.d3.ID_TOKEN:-1===d.idToken.indexOf(s)&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),d.idToken.push(s));break;case y.d3.ACCESS_TOKEN:-1===d.accessToken.indexOf(s)&&(this.logger.info("BrowserCacheManager: addTokenKey - accessToken added to map"),d.accessToken.push(s));break;case y.d3.REFRESH_TOKEN:-1===d.refreshToken.indexOf(s)&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),d.refreshToken.push(s));break;default:throw this.logger.error(`BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ${c}`),(0,P.zP)(ie.cy)}this.setItem(`${M.Oq.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(d))}removeTokenKey(s,c){this.logger.trace("BrowserCacheManager removeTokenKey called");const d=this.getTokenKeys();switch(c){case y.d3.ID_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ${s} from map`);const f=d.idToken.indexOf(s);f>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),d.idToken.splice(f,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case y.d3.ACCESS_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ${s} from map`);const g=d.accessToken.indexOf(s);g>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),d.accessToken.splice(g,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case y.d3.REFRESH_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ${s} from map`);const C=d.refreshToken.indexOf(s);C>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),d.refreshToken.splice(C,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error(`BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ${c}`),(0,P.zP)(ie.cy)}this.setItem(`${M.Oq.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(d))}getIdTokenCredential(s){const c=this.getItem(s);if(!c)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(s,y.d3.ID_TOKEN),null;const d=this.validateAndParseJson(c);return d&&Me.isIdTokenEntity(d)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),pe.L.toObject(new Me,d)):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(s,y.d3.ID_TOKEN),null)}setIdTokenCredential(s){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const c=s.generateCredentialKey();this.setItem(c,JSON.stringify(s)),this.addTokenKey(c,y.d3.ID_TOKEN)}getAccessTokenCredential(s){const c=this.getItem(s);if(!c)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(s,y.d3.ACCESS_TOKEN),null;const d=this.validateAndParseJson(c);return d&&qe.isAccessTokenEntity(d)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),pe.L.toObject(new qe,d)):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(s,y.d3.ACCESS_TOKEN),null)}setAccessTokenCredential(s){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const c=s.generateCredentialKey();this.setItem(c,JSON.stringify(s)),this.addTokenKey(c,y.d3.ACCESS_TOKEN)}getRefreshTokenCredential(s){const c=this.getItem(s);if(!c)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(s,y.d3.REFRESH_TOKEN),null;const d=this.validateAndParseJson(c);return d&&at.isRefreshTokenEntity(d)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),pe.L.toObject(new at,d)):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(s,y.d3.REFRESH_TOKEN),null)}setRefreshTokenCredential(s){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const c=s.generateCredentialKey();this.setItem(c,JSON.stringify(s)),this.addTokenKey(c,y.d3.REFRESH_TOKEN)}getAppMetadata(s){const c=this.getItem(s);if(!c)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const d=this.validateAndParseJson(c);return d&&_t.isAppMetadataEntity(s,d)?(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),pe.L.toObject(new _t,d)):(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null)}setAppMetadata(s){this.logger.trace("BrowserCacheManager.setAppMetadata called");const c=s.generateAppMetadataKey();this.setItem(c,JSON.stringify(s))}getServerTelemetry(s){const c=this.getItem(s);if(!c)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const d=this.validateAndParseJson(c);return d&&rn.isServerTelemetryEntity(s,d)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),pe.L.toObject(new rn,d)):(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null)}setServerTelemetry(s,c){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(s,JSON.stringify(c))}getAuthorityMetadata(s){const c=this.internalStorage.getItem(s);if(!c)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const d=this.validateAndParseJson(c);return d&&w.isAuthorityMetadataEntity(s,d)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),pe.L.toObject(new w,d)):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(c=>this.isAuthorityMetadata(c))}setWrapperMetadata(s,c){this.internalStorage.setItem(M.Bs.WRAPPER_SKU,s),this.internalStorage.setItem(M.Bs.WRAPPER_VER,c)}getWrapperMetadata(){return[this.internalStorage.getItem(M.Bs.WRAPPER_SKU)||y.gT.EMPTY_STRING,this.internalStorage.getItem(M.Bs.WRAPPER_VER)||y.gT.EMPTY_STRING]}setAuthorityMetadata(s,c){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(s,JSON.stringify(c))}getActiveAccount(){const s=this.generateCacheKey(y.Vi.ACTIVE_ACCOUNT_FILTERS),c=this.getItem(s);if(!c){this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters cache schema found, looking for legacy schema");const f=this.generateCacheKey(y.Vi.ACTIVE_ACCOUNT),g=this.getItem(f);if(!g)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null;const C=this.getAccountInfoFilteredBy({localAccountId:g});return C?(this.logger.trace("BrowserCacheManager.getActiveAccount: Legacy active account cache schema found"),this.logger.trace("BrowserCacheManager.getActiveAccount: Adding active account filters cache schema"),this.setActiveAccount(C),C):null}const d=this.validateAndParseJson(c);return d?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:d.homeAccountId,localAccountId:d.localAccountId})):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(s){const c=this.generateCacheKey(y.Vi.ACTIVE_ACCOUNT_FILTERS),d=this.generateCacheKey(y.Vi.ACTIVE_ACCOUNT);s?(this.logger.verbose("setActiveAccount: Active account set"),this.browserStorage.setItem(c,JSON.stringify({homeAccountId:s.homeAccountId,localAccountId:s.localAccountId})),this.browserStorage.setItem(d,s.localAccountId)):(this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(c),this.browserStorage.removeItem(d))}getThrottlingCache(s){const c=this.getItem(s);if(!c)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const d=this.validateAndParseJson(c);return d&&Qe.isThrottlingEntity(s,d)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),pe.L.toObject(new Qe,d)):(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null)}setThrottlingCache(s,c){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(s,JSON.stringify(c))}getTemporaryCache(s,c){const d=c?this.generateCacheKey(s):s;if(this.cacheConfig.storeAuthStateInCookie){const g=this.getItemCookie(d);if(g)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),g}const f=this.temporaryCacheStorage.getItem(d);if(!f){if(this.cacheConfig.cacheLocation===M.Ix.LocalStorage){const g=this.browserStorage.getItem(d);if(g)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),g}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),f}setTemporaryCache(s,c,d){const f=d?this.generateCacheKey(s):s;this.temporaryCacheStorage.setItem(f,c),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.setItemCookie(f,c))}removeItem(s){this.browserStorage.removeItem(s),this.temporaryCacheStorage.removeItem(s),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.clearItemCookie(s))}containsKey(s){return this.browserStorage.containsKey(s)||this.temporaryCacheStorage.containsKey(s)}getKeys(){return[...this.browserStorage.getKeys(),...this.temporaryCacheStorage.getKeys()]}clear(){var s=this;return(0,_.Z)(function*(){yield s.removeAllAccounts(),s.removeAppMetadata(),s.getKeys().forEach(c=>{(s.browserStorage.containsKey(c)||s.temporaryCacheStorage.containsKey(c))&&(-1!==c.indexOf(y.gT.CACHE_PREFIX)||-1!==c.indexOf(s.clientId))&&s.removeItem(c)}),s.internalStorage.clear()})()}clearTokensAndKeysWithClaims(s){var c=this;return(0,_.Z)(function*(){s.addQueueMeasurement(S.Ak.ClearTokensAndKeysWithClaims);const d=c.getTokenKeys(),f=[];d.accessToken.forEach(g=>{const C=c.getAccessTokenCredential(g);C?.requestedClaimsHash&&g.includes(C.requestedClaimsHash.toLowerCase())&&f.push(c.removeAccessToken(g))}),yield Promise.all(f),f.length>0&&c.logger.warning(`${f.length} access tokens with claims in the cache keys have been removed from the cache.`)})()}setItemCookie(s,c,d){let f=`${encodeURIComponent(s)}=${encodeURIComponent(c)};path=/;SameSite=Lax;`;d&&(f+=`expires=${this.getCookieExpirationTime(d)};`),this.cacheConfig.secureCookies&&(f+="Secure;"),document.cookie=f}getItemCookie(s){const c=`${encodeURIComponent(s)}=`,d=document.cookie.split(";");for(let f=0;f<d.length;f++){let g=d[f];for(;" "===g.charAt(0);)g=g.substring(1);if(0===g.indexOf(c))return decodeURIComponent(g.substring(c.length,g.length))}return y.gT.EMPTY_STRING}clearMsalCookies(){const s=`${y.gT.CACHE_PREFIX}.${this.clientId}`;document.cookie.split(";").forEach(d=>{for(;" "===d.charAt(0);)d=d.substring(1);if(0===d.indexOf(s)){const f=d.split("=")[0];this.clearItemCookie(f)}})}clearItemCookie(s){this.setItemCookie(s,y.gT.EMPTY_STRING,-1)}getCookieExpirationTime(s){return new Date((new Date).getTime()+s*this.COOKIE_LIFE_MULTIPLIER).toUTCString()}getCache(){return this.browserStorage}setCache(){}generateCacheKey(s){return this.validateAndParseJson(s)?JSON.stringify(s):Gt.x.startsWith(s,y.gT.CACHE_PREFIX)||Gt.x.startsWith(s,y.Vi.ADAL_ID_TOKEN)?s:`${y.gT.CACHE_PREFIX}.${this.clientId}.${s}`}generateAuthorityKey(s){const{libraryState:{id:c}}=mt.parseRequestState(this.cryptoImpl,s);return this.generateCacheKey(`${M.c4.AUTHORITY}.${c}`)}generateNonceKey(s){const{libraryState:{id:c}}=mt.parseRequestState(this.cryptoImpl,s);return this.generateCacheKey(`${M.c4.NONCE_IDTOKEN}.${c}`)}generateStateKey(s){const{libraryState:{id:c}}=mt.parseRequestState(this.cryptoImpl,s);return this.generateCacheKey(`${M.c4.REQUEST_STATE}.${c}`)}getCachedAuthority(s){const c=this.generateStateKey(s),d=this.getTemporaryCache(c);if(!d)return null;const f=this.generateAuthorityKey(d);return this.getTemporaryCache(f)}updateCacheEntries(s,c,d,f,g){this.logger.trace("BrowserCacheManager.updateCacheEntries called");const C=this.generateStateKey(s);this.setTemporaryCache(C,s,!1);const I=this.generateNonceKey(s);this.setTemporaryCache(I,c,!1);const L=this.generateAuthorityKey(s);this.setTemporaryCache(L,d,!1),g?this.setTemporaryCache(M.c4.CCS_CREDENTIAL,JSON.stringify({credential:g.homeAccountId,type:"home_account_id"}),!0):f&&this.setTemporaryCache(M.c4.CCS_CREDENTIAL,JSON.stringify({credential:f,type:"UPN"}),!0)}resetRequestCache(s){this.logger.trace("BrowserCacheManager.resetRequestCache called"),s&&(this.getKeys().forEach(c=>{-1!==c.indexOf(s)&&this.removeItem(c)}),this.removeItem(this.generateStateKey(s)),this.removeItem(this.generateNonceKey(s)),this.removeItem(this.generateAuthorityKey(s))),this.removeItem(this.generateCacheKey(M.c4.REQUEST_PARAMS)),this.removeItem(this.generateCacheKey(M.c4.ORIGIN_URI)),this.removeItem(this.generateCacheKey(M.c4.URL_HASH)),this.removeItem(this.generateCacheKey(M.c4.CORRELATION_ID)),this.removeItem(this.generateCacheKey(M.c4.CCS_CREDENTIAL)),this.removeItem(this.generateCacheKey(M.c4.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cleanRequestByState(s){if(this.logger.trace("BrowserCacheManager.cleanRequestByState called"),s){const c=this.generateStateKey(s),d=this.temporaryCacheStorage.getItem(c);this.logger.infoPii(`BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: ${d}`),this.resetRequestCache(d||y.gT.EMPTY_STRING)}this.clearMsalCookies()}cleanRequestByInteractionType(s){this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.getKeys().forEach(c=>{if(-1===c.indexOf(M.c4.REQUEST_STATE))return;const d=this.temporaryCacheStorage.getItem(c);if(!d)return;const f=aa.extractBrowserRequestState(this.cryptoImpl,d);f&&f.interactionType===s&&(this.logger.infoPii(`BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: ${d}`),this.resetRequestCache(d))}),this.clearMsalCookies(),this.setInteractionInProgress(!1)}cacheCodeRequest(s){this.logger.trace("BrowserCacheManager.cacheCodeRequest called");const c=(0,ca.h$)(JSON.stringify(s));this.setTemporaryCache(M.c4.REQUEST_PARAMS,c,!0)}getCachedRequest(s){this.logger.trace("BrowserCacheManager.getCachedRequest called");const c=this.getTemporaryCache(M.c4.REQUEST_PARAMS,!0);if(!c)throw(0,ue.Z_)(de.QO);let d;try{d=JSON.parse((0,go.t)(c))}catch(f){throw this.logger.errorPii(`Attempted to parse: ${c}`),this.logger.error(`Parsing cached token request threw with error: ${f}`),(0,ue.Z_)(de.e$)}if(this.removeItem(this.generateCacheKey(M.c4.REQUEST_PARAMS)),!d.authority){const f=this.generateAuthorityKey(s),g=this.getTemporaryCache(f);if(!g)throw(0,ue.Z_)(de.dT);d.authority=g}return d}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const s=this.getTemporaryCache(M.c4.NATIVE_REQUEST,!0);return s?this.validateAndParseJson(s)||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null):(this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null)}isInteractionInProgress(s){const c=this.getInteractionInProgress();return s?c===this.clientId:!!c}getInteractionInProgress(){return this.getTemporaryCache(`${y.gT.CACHE_PREFIX}.${M.c4.INTERACTION_STATUS_KEY}`,!1)}setInteractionInProgress(s){const c=`${y.gT.CACHE_PREFIX}.${M.c4.INTERACTION_STATUS_KEY}`;if(s){if(this.getInteractionInProgress())throw(0,ue.Z_)(de.Ck);this.setTemporaryCache(c,this.clientId,!1)}else!s&&this.getInteractionInProgress()===this.clientId&&this.removeItem(c)}getLegacyLoginHint(){const s=this.getTemporaryCache(y.Vi.ADAL_ID_TOKEN);s&&(this.browserStorage.removeItem(y.Vi.ADAL_ID_TOKEN),this.logger.verbose("Cached ADAL id token retrieved."));const c=this.getTemporaryCache(y.Vi.ID_TOKEN,!0);c&&(this.removeItem(this.generateCacheKey(y.Vi.ID_TOKEN)),this.logger.verbose("Cached MSAL.js v1 id token retrieved"));const d=c||s;if(d){const f=ve.Z_(d,go.t);if(f.preferred_username)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 preferred_username as loginHint"),f.preferred_username;if(f.upn)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 upn as loginHint"),f.upn;this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, however, no account hint claim found. Enable preferred_username or upn id token claim to get SSO.")}return null}updateCredentialCacheKey(s,c){const d=c.generateCredentialKey();if(s!==d){const f=this.getItem(s);if(f)return this.removeItem(s),this.setItem(d,f),this.logger.verbose(`Updated an outdated ${c.credentialType} cache key`),d;this.logger.error(`Attempted to update an outdated ${c.credentialType} cache key but no item matching the outdated key was found in storage`)}return s}getRedirectRequestContext(){return this.getTemporaryCache(M.c4.REDIRECT_CONTEXT,!0)}setRedirectRequestContext(s){this.setTemporaryCache(M.c4.REDIRECT_CONTEXT,s,!0)}hydrateCache(s,c){var d=this;return(0,_.Z)(function*(){const f=Me.createIdTokenEntity(s.account?.homeAccountId,s.account?.environment,s.idToken,d.clientId,s.tenantId);let g;c.claims&&(g=yield d.cryptoImpl.hashString(c.claims));const C=qe.createAccessTokenEntity(s.account?.homeAccountId,s.account.environment,s.accessToken,d.clientId,s.tenantId,s.scopes.join(" "),s.expiresOn?.getTime()||0,s.extExpiresOn?.getTime()||0,d.cryptoImpl,void 0,s.tokenType,void 0,c.sshKid,c.claims,g),I=new Ve(void 0,f,C);return d.saveCacheRecord(I)})()}}var ot=A(484),Te=A(97),Gl=A(76);class Kt{static generateThrottlingStorageKey(s){return`${y.bb.THROTTLING_PREFIX}.${JSON.stringify(s)}`}static preProcess(s,c){const d=Kt.generateThrottlingStorageKey(c),f=s.getThrottlingCache(d);if(f){if(f.throttleTime<Date.now())return void s.removeItem(d);throw new Ce.n(f.errorCodes?.join(" ")||y.gT.EMPTY_STRING,f.errorMessage,f.subError)}}static postProcess(s,c,d){if(Kt.checkResponseStatus(d)||Kt.checkResponseForRetryAfter(d)){const f={throttleTime:Kt.calculateThrottleTime(parseInt(d.headers[y.SZ.RETRY_AFTER])),error:d.body.error,errorCodes:d.body.error_codes,errorMessage:d.body.error_description,subError:d.body.suberror};s.setThrottlingCache(Kt.generateThrottlingStorageKey(c),f)}}static checkResponseStatus(s){return 429===s.status||s.status>=500&&s.status<600}static checkResponseForRetryAfter(s){return!!s.headers&&s.headers.hasOwnProperty(y.SZ.RETRY_AFTER)&&(s.status<200||s.status>=300)}static calculateThrottleTime(s){const c=s<=0?0:s,d=Date.now()/1e3;return Math.floor(1e3*Math.min(d+(c||y.bb.DEFAULT_THROTTLE_TIME_SECONDS),d+y.bb.DEFAULT_MAX_THROTTLE_TIME_SECONDS))}static removeThrottle(s,c,d,f){const C=this.generateThrottlingStorageKey({clientId:c,authority:d.authority,scopes:d.scopes,homeAccountIdentifier:f,claims:d.claims,authenticationScheme:d.authenticationScheme,resourceRequestMethod:d.resourceRequestMethod,resourceRequestUri:d.resourceRequestUri,shrClaims:d.shrClaims,sshKid:d.sshKid});s.removeItem(C)}}var mo=A(703);class bi{constructor(s,c){this.networkClient=s,this.cacheManager=c}sendPostRequest(s,c,d){var f=this;return(0,_.Z)(function*(){let g;Kt.preProcess(f.cacheManager,s);try{g=yield f.networkClient.sendPostRequestAsync(c,d)}catch(C){throw C instanceof De.l4?C:(0,P.zP)(ie.EF)}return Kt.postProcess(f.cacheManager,s,g),g})()}}var ua=A(630),da=A(667),En=A(758),qt=A(795);class bt{static validateRedirectUri(s){if(!s)throw(0,N.ei)(Ie.RV)}static validatePrompt(s){const c=[];for(const d in y.NJ)c.push(y.NJ[d]);if(c.indexOf(s)<0)throw(0,N.ei)(Ie.z_)}static validateClaims(s){try{JSON.parse(s)}catch{throw(0,N.ei)(Ie.nm)}}static validateCodeChallengeParams(s,c){if(!s||!c)throw(0,N.ei)(Ie.TU);this.validateCodeChallengeMethod(c)}static validateCodeChallengeMethod(s){if([y.VX.PLAIN,y.VX.S256].indexOf(s)<0)throw(0,N.ei)(Ie.d6)}static sanitizeEQParams(s,c){return s?(c.forEach((d,f)=>{s[f]&&delete s[f]}),Object.fromEntries(Object.entries(s).filter(d=>""!==d[1]))):{}}}class vr{constructor(){this.parameters=new Map}addResponseTypeCode(){this.parameters.set(y.Fo.RESPONSE_TYPE,encodeURIComponent(y.gT.CODE_RESPONSE_TYPE))}addResponseTypeForTokenAndIdToken(){this.parameters.set(y.Fo.RESPONSE_TYPE,encodeURIComponent(`${y.gT.TOKEN_RESPONSE_TYPE} ${y.gT.ID_TOKEN_RESPONSE_TYPE}`))}addResponseMode(s){this.parameters.set(y.Fo.RESPONSE_MODE,encodeURIComponent(s||y.vw.QUERY))}addNativeBroker(){this.parameters.set(y.Fo.NATIVE_BROKER,encodeURIComponent("1"))}addScopes(s,c=!0,d=y.f_){c&&!d.includes("openid")&&!s.includes("openid")&&d.push("openid");const f=c?[...s||[],...d]:s||[],g=new qt.i(f);this.parameters.set(y.Fo.SCOPE,encodeURIComponent(g.printScopes()))}addClientId(s){this.parameters.set(y.Fo.CLIENT_ID,encodeURIComponent(s))}addRedirectUri(s){bt.validateRedirectUri(s),this.parameters.set(y.Fo.REDIRECT_URI,encodeURIComponent(s))}addPostLogoutRedirectUri(s){bt.validateRedirectUri(s),this.parameters.set(y.Fo.POST_LOGOUT_URI,encodeURIComponent(s))}addIdTokenHint(s){this.parameters.set(y.Fo.ID_TOKEN_HINT,encodeURIComponent(s))}addDomainHint(s){this.parameters.set(y.VO.DOMAIN_HINT,encodeURIComponent(s))}addLoginHint(s){this.parameters.set(y.VO.LOGIN_HINT,encodeURIComponent(s))}addCcsUpn(s){this.parameters.set(y.SZ.CCS_HEADER,encodeURIComponent(`UPN:${s}`))}addCcsOid(s){this.parameters.set(y.SZ.CCS_HEADER,encodeURIComponent(`Oid:${s.uid}@${s.utid}`))}addSid(s){this.parameters.set(y.VO.SID,encodeURIComponent(s))}addClaims(s,c){const d=this.addClientCapabilitiesToClaims(s,c);bt.validateClaims(d),this.parameters.set(y.Fo.CLAIMS,encodeURIComponent(d))}addCorrelationId(s){this.parameters.set(y.Fo.CLIENT_REQUEST_ID,encodeURIComponent(s))}addLibraryInfo(s){this.parameters.set(y.Fo.X_CLIENT_SKU,s.sku),this.parameters.set(y.Fo.X_CLIENT_VER,s.version),s.os&&this.parameters.set(y.Fo.X_CLIENT_OS,s.os),s.cpu&&this.parameters.set(y.Fo.X_CLIENT_CPU,s.cpu)}addApplicationTelemetry(s){s?.appName&&this.parameters.set(y.Fo.X_APP_NAME,s.appName),s?.appVersion&&this.parameters.set(y.Fo.X_APP_VER,s.appVersion)}addPrompt(s){bt.validatePrompt(s),this.parameters.set(`${y.Fo.PROMPT}`,encodeURIComponent(s))}addState(s){s&&this.parameters.set(y.Fo.STATE,encodeURIComponent(s))}addNonce(s){this.parameters.set(y.Fo.NONCE,encodeURIComponent(s))}addCodeChallengeParams(s,c){if(bt.validateCodeChallengeParams(s,c),!s||!c)throw(0,N.ei)(Ie.TU);this.parameters.set(y.Fo.CODE_CHALLENGE,encodeURIComponent(s)),this.parameters.set(y.Fo.CODE_CHALLENGE_METHOD,encodeURIComponent(c))}addAuthorizationCode(s){this.parameters.set(y.Fo.CODE,encodeURIComponent(s))}addDeviceCode(s){this.parameters.set(y.Fo.DEVICE_CODE,encodeURIComponent(s))}addRefreshToken(s){this.parameters.set(y.Fo.REFRESH_TOKEN,encodeURIComponent(s))}addCodeVerifier(s){this.parameters.set(y.Fo.CODE_VERIFIER,encodeURIComponent(s))}addClientSecret(s){this.parameters.set(y.Fo.CLIENT_SECRET,encodeURIComponent(s))}addClientAssertion(s){s&&this.parameters.set(y.Fo.CLIENT_ASSERTION,encodeURIComponent(s))}addClientAssertionType(s){s&&this.parameters.set(y.Fo.CLIENT_ASSERTION_TYPE,encodeURIComponent(s))}addOboAssertion(s){this.parameters.set(y.Fo.OBO_ASSERTION,encodeURIComponent(s))}addRequestTokenUse(s){this.parameters.set(y.Fo.REQUESTED_TOKEN_USE,encodeURIComponent(s))}addGrantType(s){this.parameters.set(y.Fo.GRANT_TYPE,encodeURIComponent(s))}addClientInfo(){this.parameters.set(y.sR,"1")}addExtraQueryParameters(s){const c=bt.sanitizeEQParams(s,this.parameters);Object.keys(c).forEach(d=>{this.parameters.set(d,s[d])})}addClientCapabilitiesToClaims(s,c){let d;if(s)try{d=JSON.parse(s)}catch{throw(0,N.ei)(Ie.nm)}else d={};return c&&c.length>0&&(d.hasOwnProperty(y.As.ACCESS_TOKEN)||(d[y.As.ACCESS_TOKEN]={}),d[y.As.ACCESS_TOKEN][y.As.XMS_CC]={values:c}),JSON.stringify(d)}addUsername(s){this.parameters.set(y.Ge.username,encodeURIComponent(s))}addPassword(s){this.parameters.set(y.Ge.password,encodeURIComponent(s))}addPopToken(s){s&&(this.parameters.set(y.Fo.TOKEN_TYPE,y.hO.POP),this.parameters.set(y.Fo.REQ_CNF,encodeURIComponent(s)))}addSshJwk(s){s&&(this.parameters.set(y.Fo.TOKEN_TYPE,y.hO.SSH),this.parameters.set(y.Fo.REQ_CNF,encodeURIComponent(s)))}addServerTelemetry(s){this.parameters.set(y.Fo.X_CLIENT_CURR_TELEM,s.generateCurrentRequestHeaderValue()),this.parameters.set(y.Fo.X_CLIENT_LAST_TELEM,s.generateLastRequestHeaderValue())}addThrottling(){this.parameters.set(y.Fo.X_MS_LIB_CAPABILITY,y.bb.X_MS_LIB_CAPABILITY_VALUE)}addLogoutHint(s){this.parameters.set(y.Fo.LOGOUT_HINT,encodeURIComponent(s))}createQueryString(){const s=new Array;return this.parameters.forEach((c,d)=>{s.push(`${d}=${c}`)}),s.join("&")}}class Ri{constructor(s,c){this.config=(0,mo.j6)(s),this.logger=new ua.Y(this.config.loggerOptions,da.u,da.i),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.networkManager=new bi(this.networkClient,this.cacheManager),this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=c}createTokenRequestHeaders(s){const c={};if(c[y.SZ.CONTENT_TYPE]=y.gT.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&s)switch(s.type){case"home_account_id":try{const d=(0,En.j)(s.credential);c[y.SZ.CCS_HEADER]=`Oid:${d.uid}@${d.utid}`}catch(d){this.logger.verbose("Could not parse home account ID for CCS Header: "+d)}break;case"UPN":c[y.SZ.CCS_HEADER]=`UPN: ${s.credential}`}return c}executePostToTokenEndpoint(s,c,d,f,g,C){var I=this;return(0,_.Z)(function*(){C&&I.performanceClient?.addQueueMeasurement(C,g);const L=yield I.networkManager.sendPostRequest(f,s,{body:c,headers:d});return I.performanceClient?.addFields({refreshTokenSize:L.body.refresh_token?.length||0,httpVerToken:L.headers?.[y.SZ.X_MS_HTTP_VERSION]||""},g),I.config.serverTelemetryManager&&L.status<500&&429!==L.status&&I.config.serverTelemetryManager.clearTelemetryCache(),L})()}updateAuthority(s){if(!s.discoveryComplete())throw(0,P.zP)(ie.HO);this.authority=s}createTokenQueryParameters(s){const c=new vr;return s.tokenQueryParameters&&c.addExtraQueryParameters(s.tokenQueryParameters),c.createQueryString()}}class Cr{constructor(s,c){this.cryptoUtils=s,this.performanceClient=c}generateCnf(s,c){var d=this;return(0,_.Z)(function*(){d.performanceClient?.addQueueMeasurement(S.Ak.PopTokenGenerateCnf,s.correlationId);const f=yield Z(d.generateKid.bind(d),S.Ak.PopTokenGenerateCnf,c,d.performanceClient,s.correlationId)(s),g=d.cryptoUtils.base64Encode(JSON.stringify(f));return{kid:f.kid,reqCnfString:g,reqCnfHash:yield d.cryptoUtils.hashString(g)}})()}generateKid(s){var c=this;return(0,_.Z)(function*(){return c.performanceClient?.addQueueMeasurement(S.Ak.PopTokenGenerateKid,s.correlationId),{kid:yield c.cryptoUtils.getPublicKeyThumbprint(s),xms_ksl:"sw"}})()}signPopToken(s,c,d){var f=this;return(0,_.Z)(function*(){return f.signPayload(s,c,d)})()}signPayload(s,c,d,f){var g=this;return(0,_.Z)(function*(){const{resourceRequestMethod:C,resourceRequestUri:I,shrClaims:L,shrNonce:k}=d,ce=(I?new H.G(I):void 0)?.getUrlComponents();return yield g.cryptoUtils.signJwt({at:s,ts:X.I.nowSeconds(),m:C?.toUpperCase(),u:ce?.HostNameAndPort,nonce:k||g.cryptoUtils.createNewGuid(),p:ce?.AbsolutePath,q:ce?.QueryString?[[],ce.QueryString]:void 0,client_claims:L||void 0,...f},c,d.correlationId)})()}}class Kl{constructor(s,c){this.cache=s,this.hasChanged=c}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class Xn{constructor(s,c,d,f,g,C,I){this.clientId=s,this.cacheStorage=c,this.cryptoObj=d,this.logger=f,this.serializableCache=g,this.persistencePlugin=C,this.performanceClient=I}validateServerAuthorizationCodeResponse(s,c,d){if(!s.state||!c)throw(0,P.zP)(ie.LV,s.state?"Cached State":"Server State");let f,g;try{f=decodeURIComponent(s.state)}catch{throw(0,P.zP)(ie.r8,s.state)}try{g=decodeURIComponent(c)}catch{throw(0,P.zP)(ie.r8,s.state)}if(f!==g)throw(0,P.zP)(ie.Tu);if(s.error||s.error_description||s.suberror)throw(0,J.Cf)(s.error,s.error_description,s.suberror)?new J.Yo(s.error||y.gT.EMPTY_STRING,s.error_description,s.suberror,s.timestamp||y.gT.EMPTY_STRING,s.trace_id||y.gT.EMPTY_STRING,s.correlation_id||y.gT.EMPTY_STRING,s.claims||y.gT.EMPTY_STRING):new Ce.n(s.error||y.gT.EMPTY_STRING,s.error_description,s.suberror);s.client_info&&(0,En.B)(s.client_info,d)}validateTokenResponse(s,c){if(s.error||s.error_description||s.suberror){const f=new Ce.n(s.error,`${s.error_codes} - [${s.timestamp}]: ${s.error_description} - Correlation ID: ${s.correlation_id} - Trace ID: ${s.trace_id}`,s.suberror);if(c&&s.status&&s.status>=y.oj.SERVER_ERROR_RANGE_START&&s.status<=y.oj.SERVER_ERROR_RANGE_END)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.\n${f}`);if(c&&s.status&&s.status>=y.oj.CLIENT_ERROR_RANGE_START&&s.status<=y.oj.CLIENT_ERROR_RANGE_END)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.\n${f}`);throw(0,J.Cf)(s.error,s.error_description,s.suberror)?new J.Yo(s.error,s.error_description,s.suberror,s.timestamp||y.gT.EMPTY_STRING,s.trace_id||y.gT.EMPTY_STRING,s.correlation_id||y.gT.EMPTY_STRING,s.claims||y.gT.EMPTY_STRING):f}}handleServerTokenResponse(s,c,d,f,g,C,I,L,k){var G=this;return(0,_.Z)(function*(){let ce,be;if(G.performanceClient?.addQueueMeasurement(S.Ak.HandleServerTokenResponse,s.correlation_id),s.id_token){if(ce=(0,ve.Z_)(s.id_token||y.gT.EMPTY_STRING,G.cryptoObj.base64Decode),g&&g.nonce&&ce.nonce!==g.nonce)throw(0,P.zP)(ie.vR);if(f.maxAge||0===f.maxAge){const ht=ce.auth_time;if(!ht)throw(0,P.zP)(ie.w7);(0,ve.ky)(ht,f.maxAge)}}G.homeAccountIdentifier=oe.r.generateHomeAccountId(s.client_info||y.gT.EMPTY_STRING,c.authorityType,G.logger,G.cryptoObj,ce),g&&g.state&&(be=mt.parseRequestState(G.cryptoObj,g.state)),s.key_id=s.key_id||f.sshKid||void 0;const We=G.generateCacheRecord(s,c,d,f,ce,C,g);let Y;try{if(G.persistencePlugin&&G.serializableCache&&(G.logger.verbose("Persistence enabled, calling beforeCacheAccess"),Y=new Kl(G.serializableCache,!0),yield G.persistencePlugin.beforeCacheAccess(Y)),I&&!L&&We.account){const ht=We.account.generateAccountKey();if(!G.cacheStorage.getAccount(ht))return G.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),Xn.generateAuthenticationResult(G.cryptoObj,c,We,!1,f,ce,be,void 0,k)}yield G.cacheStorage.saveCacheRecord(We,f.storeInCache)}finally{G.persistencePlugin&&G.serializableCache&&Y&&(G.logger.verbose("Persistence enabled, calling afterCacheAccess"),yield G.persistencePlugin.afterCacheAccess(Y))}return Xn.generateAuthenticationResult(G.cryptoObj,c,We,!1,f,ce,be,s,k)})()}generateCacheRecord(s,c,d,f,g,C,I){const L=c.getPreferredCache();if(!L)throw(0,P.zP)(ie.Q9);let k,G;s.id_token&&g&&(k=Me.createIdTokenEntity(this.homeAccountIdentifier,L,s.id_token,this.clientId,g.tid||""),G=oe.r.createAccount({homeAccountId:this.homeAccountIdentifier,idTokenClaims:g,clientInfo:s.client_info,cloudGraphHostName:I?.cloud_graph_host_name,msGraphHost:I?.msgraph_host},c));let ce=null;if(s.access_token){const Y=s.scope?qt.i.fromString(s.scope):new qt.i(f.scopes||[]),ht=("string"==typeof s.expires_in?parseInt(s.expires_in,10):s.expires_in)||0,re=("string"==typeof s.ext_expires_in?parseInt(s.ext_expires_in,10):s.ext_expires_in)||0,Oe=("string"==typeof s.refresh_in?parseInt(s.refresh_in,10):s.refresh_in)||void 0,an=d+ht,Li=an+re,zr=Oe&&Oe>0?d+Oe:void 0;ce=qe.createAccessTokenEntity(this.homeAccountIdentifier,L,s.access_token||y.gT.EMPTY_STRING,this.clientId,g?.tid||c.tenant,Y.printScopes(),an,Li,this.cryptoObj,zr,s.token_type,C,s.key_id,f.claims,f.requestedClaimsHash)}let be=null;s.refresh_token&&(be=at.createRefreshTokenEntity(this.homeAccountIdentifier,L,s.refresh_token||y.gT.EMPTY_STRING,this.clientId,s.foci,C));let We=null;return s.foci&&(We=_t.createAppMetadataEntity(this.clientId,L,s.foci)),new Ve(G,k,ce,be,We)}static generateAuthenticationResult(s,c,d,f,g,C,I,L,k){return(0,_.Z)(function*(){let We,Y,G=y.gT.EMPTY_STRING,ce=[],be=null,ht=y.gT.EMPTY_STRING;if(d.accessToken){if(d.accessToken.tokenType===y.hO.POP){const Li=new Cr(s),{secret:zr,keyId:Tr}=d.accessToken;if(!Tr)throw(0,P.zP)(ie.Of);G=yield Li.signPopToken(zr,Tr,g)}else G=d.accessToken.secret;ce=qt.i.fromString(d.accessToken.target).asArray(),be=new Date(1e3*Number(d.accessToken.expiresOn)),We=new Date(1e3*Number(d.accessToken.extendedExpiresOn)),d.accessToken.refreshOn&&(Y=new Date(1e3*Number(d.accessToken.refreshOn)))}d.appMetadata&&(ht=d.appMetadata.familyId===y.ch?y.ch:"");const re=C?.oid||C?.sub||"",Oe=C?.tid||"";L?.spa_accountid&&d.account&&(d.account.nativeAccountId=L?.spa_accountid);const an=d.account?{...d.account.getAccountInfo(),idTokenClaims:C}:null;return{authority:c.canonicalAuthority,uniqueId:re,tenantId:Oe,scopes:ce,account:an,idToken:d?.idToken?.secret||"",idTokenClaims:C||{},accessToken:G,fromCache:f,expiresOn:be,extExpiresOn:We,refreshOn:Y,correlationId:g.correlationId,requestId:k||y.gT.EMPTY_STRING,familyId:ht,tokenType:d.accessToken?.tokenType||y.gT.EMPTY_STRING,state:I?I.userRequestState:y.gT.EMPTY_STRING,cloudGraphHostName:d.account?.cloudGraphHostName||y.gT.EMPTY_STRING,msGraphHost:d.account?.msGraphHost||y.gT.EMPTY_STRING,code:L?.spa_code,fromNativeBroker:!1}})()}}class fa extends Ri{constructor(s,c){super(s,c),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}getAuthCodeUrl(s){var c=this;return(0,_.Z)(function*(){c.performanceClient?.addQueueMeasurement(S.Ak.GetAuthCodeUrl,s.correlationId);const d=yield Z(c.createAuthCodeUrlQueryString.bind(c),S.Ak.AuthClientCreateQueryString,c.logger,c.performanceClient,s.correlationId)(s);return H.G.appendQueryString(c.authority.authorizationEndpoint,d)})()}acquireToken(s,c){var d=this;return(0,_.Z)(function*(){if(d.performanceClient?.addQueueMeasurement(S.Ak.AuthClientAcquireToken,s.correlationId),!s.code)throw(0,P.zP)(ie.FU);const f=X.I.nowSeconds(),g=yield Z(d.executeTokenRequest.bind(d),S.Ak.AuthClientExecuteTokenRequest,d.logger,d.performanceClient,s.correlationId)(d.authority,s),C=g.headers?.[y.SZ.X_MS_REQUEST_ID],I=new Xn(d.config.authOptions.clientId,d.cacheManager,d.cryptoUtils,d.logger,d.config.serializableCache,d.config.persistencePlugin,d.performanceClient);return I.validateTokenResponse(g.body),Z(I.handleServerTokenResponse.bind(I),S.Ak.HandleServerTokenResponse,d.logger,d.performanceClient,s.correlationId)(g.body,d.authority,f,s,c,void 0,void 0,void 0,C)})()}handleFragmentResponse(s,c){const d=new Xn(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null),f=H.G.getDeserializedCodeResponse(this.config.authOptions.authority.options.OIDCOptions?.serverResponseType,s);if(d.validateServerAuthorizationCodeResponse(f,c,this.cryptoUtils),!f.code)throw(0,P.zP)(ie.Zv);return{...f,code:f.code}}getLogoutUri(s){if(!s)throw(0,N.ei)(Ie.$h);const c=this.createLogoutUrlQueryString(s);return H.G.appendQueryString(this.authority.endSessionEndpoint,c)}executeTokenRequest(s,c){var d=this;return(0,_.Z)(function*(){d.performanceClient?.addQueueMeasurement(S.Ak.AuthClientExecuteTokenRequest,c.correlationId);const f=d.createTokenQueryParameters(c),g=H.G.appendQueryString(s.tokenEndpoint,f),C=yield Z(d.createTokenRequestBody.bind(d),S.Ak.AuthClientCreateTokenRequestBody,d.logger,d.performanceClient,c.correlationId)(c);let I;if(c.clientInfo)try{const G=(0,En.B)(c.clientInfo,d.cryptoUtils);I={credential:`${G.uid}${y.Bv.CLIENT_INFO_SEPARATOR}${G.utid}`,type:"home_account_id"}}catch(G){d.logger.verbose("Could not parse client info for CCS Header: "+G)}const L=d.createTokenRequestHeaders(I||c.ccsCredential),k={clientId:c.tokenBodyParameters?.clientId||d.config.authOptions.clientId,authority:s.canonicalAuthority,scopes:c.scopes,claims:c.claims,authenticationScheme:c.authenticationScheme,resourceRequestMethod:c.resourceRequestMethod,resourceRequestUri:c.resourceRequestUri,shrClaims:c.shrClaims,sshKid:c.sshKid};return Z(d.executePostToTokenEndpoint.bind(d),S.Ak.AuthorizationCodeClientExecutePostToTokenEndpoint,d.logger,d.performanceClient,c.correlationId)(g,C,L,k,c.correlationId,S.Ak.AuthorizationCodeClientExecutePostToTokenEndpoint)})()}createTokenRequestBody(s){var c=this;return(0,_.Z)(function*(){c.performanceClient?.addQueueMeasurement(S.Ak.AuthClientCreateTokenRequestBody,s.correlationId);const d=new vr;if(d.addClientId(s.tokenBodyParameters?.[y.Fo.CLIENT_ID]||c.config.authOptions.clientId),c.includeRedirectUri?d.addRedirectUri(s.redirectUri):bt.validateRedirectUri(s.redirectUri),d.addScopes(s.scopes,!0,c.oidcDefaultScopes),d.addAuthorizationCode(s.code),d.addLibraryInfo(c.config.libraryInfo),d.addApplicationTelemetry(c.config.telemetry.application),d.addThrottling(),c.serverTelemetryManager&&!(0,mo.lh)(c.config)&&d.addServerTelemetry(c.serverTelemetryManager),s.codeVerifier&&d.addCodeVerifier(s.codeVerifier),c.config.clientCredentials.clientSecret&&d.addClientSecret(c.config.clientCredentials.clientSecret),c.config.clientCredentials.clientAssertion){const C=c.config.clientCredentials.clientAssertion;d.addClientAssertion(C.assertion),d.addClientAssertionType(C.assertionType)}if(d.addGrantType(y.qJ.AUTHORIZATION_CODE_GRANT),d.addClientInfo(),s.authenticationScheme===y.hO.POP){const C=new Cr(c.cryptoUtils,c.performanceClient),I=yield Z(C.generateCnf.bind(C),S.Ak.PopTokenGenerateCnf,c.logger,c.performanceClient,s.correlationId)(s,c.logger);d.addPopToken(I.reqCnfString)}else if(s.authenticationScheme===y.hO.SSH){if(!s.sshJwk)throw(0,N.ei)(Ie.dK);d.addSshJwk(s.sshJwk)}const f=s.correlationId||c.config.cryptoInterface.createNewGuid();let g;if(d.addCorrelationId(f),(!Gt.x.isEmptyObj(s.claims)||c.config.authOptions.clientCapabilities&&c.config.authOptions.clientCapabilities.length>0)&&d.addClaims(s.claims,c.config.authOptions.clientCapabilities),s.clientInfo)try{const C=(0,En.B)(s.clientInfo,c.cryptoUtils);g={credential:`${C.uid}${y.Bv.CLIENT_INFO_SEPARATOR}${C.utid}`,type:"home_account_id"}}catch(C){c.logger.verbose("Could not parse client info for CCS Header: "+C)}else g=s.ccsCredential;if(c.config.systemOptions.preventCorsPreflight&&g)switch(g.type){case"home_account_id":try{const C=(0,En.j)(g.credential);d.addCcsOid(C)}catch(C){c.logger.verbose("Could not parse home account ID for CCS Header: "+C)}break;case"UPN":d.addCcsUpn(g.credential)}return s.tokenBodyParameters&&d.addExtraQueryParameters(s.tokenBodyParameters),s.enableSpaAuthorizationCode&&(!s.tokenBodyParameters||!s.tokenBodyParameters[y.Fo.RETURN_SPA_CODE])&&d.addExtraQueryParameters({[y.Fo.RETURN_SPA_CODE]:"1"}),d.createQueryString()})()}createAuthCodeUrlQueryString(s){var c=this;return(0,_.Z)(function*(){c.performanceClient?.addQueueMeasurement(S.Ak.AuthClientCreateQueryString,s.correlationId);const d=new vr;d.addClientId(s.extraQueryParameters?.[y.Fo.CLIENT_ID]||c.config.authOptions.clientId);const f=[...s.scopes||[],...s.extraScopesToConsent||[]];d.addScopes(f,!0,c.oidcDefaultScopes),d.addRedirectUri(s.redirectUri);const g=s.correlationId||c.config.cryptoInterface.createNewGuid();if(d.addCorrelationId(g),d.addResponseMode(s.responseMode),d.addResponseTypeCode(),d.addLibraryInfo(c.config.libraryInfo),(0,mo.lh)(c.config)||d.addApplicationTelemetry(c.config.telemetry.application),d.addClientInfo(),s.codeChallenge&&s.codeChallengeMethod&&d.addCodeChallengeParams(s.codeChallenge,s.codeChallengeMethod),s.prompt&&d.addPrompt(s.prompt),s.domainHint&&d.addDomainHint(s.domainHint),s.prompt!==y.NJ.SELECT_ACCOUNT)if(s.sid&&s.prompt===y.NJ.NONE)c.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),d.addSid(s.sid);else if(s.account){const C=c.extractAccountSid(s.account),I=c.extractLoginHint(s.account);if(I){c.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),d.addLoginHint(I);try{const L=(0,En.j)(s.account.homeAccountId);d.addCcsOid(L)}catch{c.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(C&&s.prompt===y.NJ.NONE){c.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),d.addSid(C);try{const L=(0,En.j)(s.account.homeAccountId);d.addCcsOid(L)}catch{c.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(s.loginHint)c.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),d.addLoginHint(s.loginHint),d.addCcsUpn(s.loginHint);else if(s.account.username){c.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),d.addLoginHint(s.account.username);try{const L=(0,En.j)(s.account.homeAccountId);d.addCcsOid(L)}catch{c.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else s.loginHint&&(c.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),d.addLoginHint(s.loginHint),d.addCcsUpn(s.loginHint));else c.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");if(s.nonce&&d.addNonce(s.nonce),s.state&&d.addState(s.state),(s.claims||c.config.authOptions.clientCapabilities&&c.config.authOptions.clientCapabilities.length>0)&&d.addClaims(s.claims,c.config.authOptions.clientCapabilities),s.extraQueryParameters&&d.addExtraQueryParameters(s.extraQueryParameters),s.nativeBroker&&(d.addNativeBroker(),s.authenticationScheme===y.hO.POP)){const C=new Cr(c.cryptoUtils),I=yield Z(C.generateCnf.bind(C),S.Ak.PopTokenGenerateCnf,c.logger,c.performanceClient,s.correlationId)(s,c.logger);d.addPopToken(I.reqCnfHash)}return d.createQueryString()})()}createLogoutUrlQueryString(s){const c=new vr;return s.postLogoutRedirectUri&&c.addPostLogoutRedirectUri(s.postLogoutRedirectUri),s.correlationId&&c.addCorrelationId(s.correlationId),s.idTokenHint&&c.addIdTokenHint(s.idTokenHint),s.state&&c.addState(s.state),s.logoutHint&&c.addLogoutHint(s.logoutHint),s.extraQueryParameters&&c.addExtraQueryParameters(s.extraQueryParameters),c.createQueryString()}extractAccountSid(s){return s.idTokenClaims?.sid||null}extractLoginHint(s){return s.idTokenClaims?.login_hint||null}}class er{static createDiscoveredInstance(s,c,d,f,g,C,I){return(0,_.Z)(function*(){C?.addQueueMeasurement(S.Ak.AuthorityFactoryCreateDiscoveredInstance,I);const L=ae.transformCIAMAuthority(K(s)),k=er.createInstance(L,c,d,f,g,C,I);try{return yield Z(k.resolveEndpointsAsync.bind(k),S.Ak.AuthorityResolveEndpointsAsync,g,C,I)(),k}catch{throw(0,P.zP)(ie.HO)}})()}static createInstance(s,c,d,f,g,C,I){if(!s)throw(0,N.ei)(Ie.To);return new ae(s,c,d,f,g,C,I)}}class yo{constructor(s,c){this.cacheOutcome=y.To.NOT_APPLICABLE,this.cacheManager=c,this.apiId=s.apiId,this.correlationId=s.correlationId,this.wrapperSKU=s.wrapperSKU||y.gT.EMPTY_STRING,this.wrapperVer=s.wrapperVer||y.gT.EMPTY_STRING,this.telemetryCacheKey=y.HN.CACHE_KEY+y.Bv.CACHE_KEY_SEPARATOR+s.clientId}generateCurrentRequestHeaderValue(){const s=`${this.apiId}${y.HN.VALUE_SEPARATOR}${this.cacheOutcome}`,c=[this.wrapperSKU,this.wrapperVer].join(y.HN.VALUE_SEPARATOR),f=[s,this.getRegionDiscoveryFields()].join(y.HN.VALUE_SEPARATOR);return[y.HN.SCHEMA_VERSION,f,c].join(y.HN.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const s=this.getLastRequests(),c=yo.maxErrorsToSend(s),d=s.failedRequests.slice(0,2*c).join(y.HN.VALUE_SEPARATOR),f=s.errors.slice(0,c).join(y.HN.VALUE_SEPARATOR),g=s.errors.length,I=[g,c<g?y.HN.OVERFLOW_TRUE:y.HN.OVERFLOW_FALSE].join(y.HN.VALUE_SEPARATOR);return[y.HN.SCHEMA_VERSION,s.cacheHits,d,f,I].join(y.HN.CATEGORY_SEPARATOR)}cacheFailedRequest(s){const c=this.getLastRequests();c.errors.length>=y.HN.MAX_CACHED_ERRORS&&(c.failedRequests.shift(),c.failedRequests.shift(),c.errors.shift()),c.failedRequests.push(this.apiId,this.correlationId),s instanceof Error&&s&&s.toString()?c.errors.push(s instanceof De.l4?s.subError?s.subError:s.errorCode?s.errorCode:s.toString():s.toString()):c.errors.push(y.HN.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,c)}incrementCacheHits(){const s=this.getLastRequests();return s.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,s),s.cacheHits}getLastRequests(){const s=new rn;return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||s}clearTelemetryCache(){const s=this.getLastRequests(),c=yo.maxErrorsToSend(s);if(c===s.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey);else{const f=new rn;f.failedRequests=s.failedRequests.slice(2*c),f.errors=s.errors.slice(c),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,f)}}static maxErrorsToSend(s){let c,d=0,f=0;const g=s.errors.length;for(c=0;c<g;c++){const I=s.failedRequests[2*c+1]||y.gT.EMPTY_STRING,L=s.errors[c]||y.gT.EMPTY_STRING;if(f+=(s.failedRequests[2*c]||y.gT.EMPTY_STRING).toString().length+I.toString().length+L.length+3,!(f<y.HN.MAX_LAST_HEADER_BYTES))break;d+=1}return d}getRegionDiscoveryFields(){const s=[];return s.push(this.regionUsed||y.gT.EMPTY_STRING),s.push(this.regionSource||y.gT.EMPTY_STRING),s.push(this.regionOutcome||y.gT.EMPTY_STRING),s.join(",")}updateRegionDiscoveryMetadata(s){this.regionUsed=s.region_used,this.regionSource=s.region_source,this.regionOutcome=s.region_outcome}setCacheOutcome(s){this.cacheOutcome=s}}var pa=A(580),Fn=A(690);class ga{constructor(s,c,d,f,g,C,I,L,k){this.config=s,this.browserStorage=c,this.browserCrypto=d,this.networkClient=this.config.system.networkClient,this.eventHandler=g,this.navigationClient=C,this.nativeMessageHandler=L,this.correlationId=k||(0,Fn.nn)(),this.logger=f.clone(M.qx.MSAL_SKU,pa.i,this.correlationId),this.performanceClient=I}clearCacheOnLogout(s){var c=this;return(0,_.Z)(function*(){if(s){oe.r.accountInfoIsEqual(s,c.browserStorage.getActiveAccount(),!1)&&(c.logger.verbose("Setting active account to null"),c.browserStorage.setActiveAccount(null));try{yield c.browserStorage.removeAccount(oe.r.generateAccountCacheKey(s)),c.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{c.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{c.logger.verbose("No account provided in logout request, clearing all cache items.",c.correlationId),yield c.browserStorage.clear(),yield c.browserCrypto.clearKeystore()}catch{c.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}})()}initializeBaseRequest(s,c){var d=this;return(0,_.Z)(function*(){d.performanceClient.addQueueMeasurement(S.Ak.InitializeBaseRequest,s.correlationId);const f=s.authority||d.config.auth.authority;c&&(yield d.validateRequestAuthority(f,c));const g=[...s&&s.scopes||[]],C={...s,correlationId:d.correlationId,authority:f,scopes:g};if(C.authenticationScheme){if(C.authenticationScheme===y.hO.SSH){if(!s.sshJwk)throw(0,N.ei)(Ie.dK);if(!s.sshKid)throw(0,N.ei)(Ie.hI)}d.logger.verbose(`Authentication Scheme set to "${C.authenticationScheme}" as configured in Auth request`)}else C.authenticationScheme=y.hO.BEARER,d.logger.verbose('Authentication Scheme wasn\'t explicitly set in request, defaulting to "Bearer" request');return d.config.cache.claimsBasedCachingEnabled&&s.claims&&!Gt.x.isEmptyObj(s.claims)&&(C.requestedClaimsHash=yield d.browserCrypto.hashString(s.claims)),C})()}getRedirectUri(s){this.logger.verbose("getRedirectUri called");const c=s||this.config.auth.redirectUri||(0,ot.Re)();return H.G.getAbsoluteUrl(c,(0,ot.Re)())}validateRequestAuthority(s,c){var d=this;return(0,_.Z)(function*(){if(!(yield d.getDiscoveredAuthority(s)).isAlias(c.environment))throw(0,N.ei)(Ie.Hv)})()}initializeServerTelemetryManager(s,c){this.logger.verbose("initializeServerTelemetryManager called");const d={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:s,forceRefresh:c||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new yo(d,this.browserStorage)}getDiscoveredAuthority(s){var c=this;return(0,_.Z)(function*(){c.logger.verbose("getDiscoveredAuthority called");const d={protocolMode:c.config.auth.protocolMode,OIDCOptions:c.config.auth.OIDCOptions,knownAuthorities:c.config.auth.knownAuthorities,cloudDiscoveryMetadata:c.config.auth.cloudDiscoveryMetadata,authorityMetadata:c.config.auth.authorityMetadata};return s?(c.logger.verbose("Creating discovered authority with request authority"),yield er.createDiscoveredInstance(s,c.config.system.networkClient,c.browserStorage,d,c.logger)):(c.logger.verbose("Creating discovered authority with configured authority"),yield er.createDiscoveredInstance(c.config.auth.authority,c.config.system.networkClient,c.browserStorage,d,c.logger))})()}}const ql=32;function sp(V,s,c){return $r.apply(this,arguments)}function $r(){return($r=(0,_.Z)(function*(V,s,c){V.addQueueMeasurement(S.Ak.GeneratePkceCodes,c);const d=ne(ma,S.Ak.GenerateCodeVerifier,s,V,c)(V,s,c);return{verifier:d,challenge:yield Z(ya,S.Ak.GenerateCodeChallengeFromVerifier,s,V,c)(d,V,s,c)}})).apply(this,arguments)}function ma(V,s,c){try{const d=new Uint8Array(ql);return ne(Fn.PP,S.Ak.GetRandomValues,s,V,c)(d),(0,ca.Wy)(d)}catch{throw(0,ue.Z_)(de.vD)}}function ya(V,s,c,d){return vo.apply(this,arguments)}function vo(){return(vo=(0,_.Z)(function*(V,s,c,d){s.addQueueMeasurement(S.Ak.GenerateCodeChallengeFromVerifier,d);try{const f=yield Z(Fn.Fv,S.Ak.Sha256Digest,c,s,d)(V,s,d);return(0,ca.Wy)(new Uint8Array(f))}catch{throw(0,ue.Z_)(de.vD)}})).apply(this,arguments)}class tr extends ga{initializeAuthorizationCodeRequest(s){var c=this;return(0,_.Z)(function*(){c.performanceClient.addQueueMeasurement(S.Ak.StandardInteractionClientInitializeAuthorizationCodeRequest,s.correlationId);const d=yield Z(sp,S.Ak.GeneratePkceCodes,c.logger,c.performanceClient,c.correlationId)(c.performanceClient,c.logger,c.correlationId),f={...s,redirectUri:s.redirectUri,code:y.gT.EMPTY_STRING,codeVerifier:d.verifier};return s.codeChallenge=d.challenge,s.codeChallengeMethod=y.gT.S256_CODE_CHALLENGE_METHOD,f})()}initializeLogoutRequest(s){this.logger.verbose("initializeLogoutRequest called",s?.correlationId);const c={correlationId:this.correlationId||(0,Fn.nn)(),...s};if(s)if(s.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(s.account){const d=this.getLogoutHintFromIdTokenClaims(s.account);d&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),c.logoutHint=d)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return s&&null===s.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",c.correlationId):s&&s.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",c.correlationId),c.postLogoutRedirectUri=H.G.getAbsoluteUrl(s.postLogoutRedirectUri,(0,ot.Re)())):null===this.config.auth.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",c.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",c.correlationId),c.postLogoutRedirectUri=H.G.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,(0,ot.Re)())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",c.correlationId),c.postLogoutRedirectUri=H.G.getAbsoluteUrl((0,ot.Re)(),(0,ot.Re)())),c}getLogoutHintFromIdTokenClaims(s){const c=s.idTokenClaims;if(c){if(c.login_hint)return c.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}createAuthCodeClient(s,c,d){var f=this;return(0,_.Z)(function*(){f.performanceClient.addQueueMeasurement(S.Ak.StandardInteractionClientCreateAuthCodeClient,f.correlationId);const g=yield Z(f.getClientConfiguration.bind(f),S.Ak.StandardInteractionClientGetClientConfiguration,f.logger,f.performanceClient,f.correlationId)(s,c,d);return new fa(g,f.performanceClient)})()}getClientConfiguration(s,c,d){var f=this;return(0,_.Z)(function*(){f.performanceClient.addQueueMeasurement(S.Ak.StandardInteractionClientGetClientConfiguration,f.correlationId);const g=yield Z(f.getDiscoveredAuthority.bind(f),S.Ak.StandardInteractionClientGetDiscoveredAuthority,f.logger,f.performanceClient,f.correlationId)(c,d),C=f.config.system.loggerOptions;return{authOptions:{clientId:f.config.auth.clientId,authority:g,clientCapabilities:f.config.auth.clientCapabilities},systemOptions:{tokenRenewalOffsetSeconds:f.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:C.loggerCallback,piiLoggingEnabled:C.piiLoggingEnabled,logLevel:C.logLevel,correlationId:f.correlationId},cacheOptions:{claimsBasedCachingEnabled:f.config.cache.claimsBasedCachingEnabled},cryptoInterface:f.browserCrypto,networkInterface:f.networkClient,storageInterface:f.browserStorage,serverTelemetryManager:s,libraryInfo:{sku:M.qx.MSAL_SKU,version:pa.i,cpu:y.gT.EMPTY_STRING,os:y.gT.EMPTY_STRING},telemetry:f.config.telemetry}})()}validateAndExtractStateFromHash(s,c,d){if(this.logger.verbose("validateAndExtractStateFromHash called",d),!s.state)throw(0,ue.Z_)(de.Xk);const f=aa.extractBrowserRequestState(this.browserCrypto,s.state);if(!f)throw(0,ue.Z_)(de.$P);if(f.interactionType!==c)throw(0,ue.Z_)(de.yK);return this.logger.verbose("Returning state from hash",d),s.state}getDiscoveredAuthority(s,c){var d=this;return(0,_.Z)(function*(){d.performanceClient.addQueueMeasurement(S.Ak.StandardInteractionClientGetDiscoveredAuthority,d.correlationId);const f={protocolMode:d.config.auth.protocolMode,OIDCOptions:d.config.auth.OIDCOptions,knownAuthorities:d.config.auth.knownAuthorities,cloudDiscoveryMetadata:d.config.auth.cloudDiscoveryMetadata,authorityMetadata:d.config.auth.authorityMetadata,skipAuthorityMetadataCache:d.config.auth.skipAuthorityMetadataCache},C=ae.generateAuthority(s||d.config.auth.authority,c||d.config.auth.azureCloudOptions);return yield Z(er.createDiscoveredInstance.bind(er),S.Ak.AuthorityFactoryCreateDiscoveredInstance,d.logger,d.performanceClient,d.correlationId)(C,d.config.system.networkClient,d.browserStorage,f,d.logger,d.performanceClient,d.correlationId)})()}initializeAuthorizationRequest(s,c){var d=this;return(0,_.Z)(function*(){d.performanceClient.addQueueMeasurement(S.Ak.StandardInteractionClientInitializeAuthorizationRequest,d.correlationId);const f=d.getRedirectUri(s.redirectUri),C=mt.setRequestState(d.browserCrypto,s&&s.state||y.gT.EMPTY_STRING,{interactionType:c}),L={...yield Z(d.initializeBaseRequest.bind(d),S.Ak.InitializeBaseRequest,d.logger,d.performanceClient,d.correlationId)(s),redirectUri:f,state:C,nonce:s.nonce||(0,Fn.nn)(),responseMode:d.config.auth.OIDCOptions.serverResponseType},k=s.account||d.browserStorage.getActiveAccount();if(k&&(d.logger.verbose("Setting validated request account",d.correlationId),d.logger.verbosePii(`Setting validated request account: ${k.homeAccountId}`,d.correlationId),L.account=k),!L.loginHint&&!k){const G=d.browserStorage.getLegacyLoginHint();G&&(L.loginHint=G)}return L})()}}var va=A(12),Co=A(490);const Mi="user_switch",Jl={[Mi]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class In extends De.l4{constructor(s,c,d){super(s,c),Object.setPrototypeOf(this,In.prototype),this.name="NativeAuthError",this.ext=d}}function Rt(V){return!!(V.ext&&V.ext.status&&("PERSISTENT_ERROR"===V.ext.status||"DISABLED"===V.ext.status)||V.ext&&V.ext.error&&-2147186943===V.ext.error)||"ContentError"===V.errorCode}function ki(V,s,c){if(c&&c.status)switch(c.status){case"ACCOUNT_UNAVAILABLE":return(0,J.ip)(Co.QP);case"USER_INTERACTION_REQUIRED":return new J.Yo(V,s);case"USER_CANCEL":return(0,ue.Z_)(de.h7);case"NO_NETWORK":return(0,ue.Z_)(de.Mq)}return new In(V,Jl[V]||s,c)}class lt extends Ri{constructor(s,c){super(s,c)}acquireToken(s){var c=this;return(0,_.Z)(function*(){c.performanceClient?.addQueueMeasurement(S.Ak.RefreshTokenClientAcquireToken,s.correlationId);const d=X.I.nowSeconds(),f=yield Z(c.executeTokenRequest.bind(c),S.Ak.RefreshTokenClientExecuteTokenRequest,c.logger,c.performanceClient,s.correlationId)(s,c.authority),g=f.headers?.[y.SZ.X_MS_REQUEST_ID],C=new Xn(c.config.authOptions.clientId,c.cacheManager,c.cryptoUtils,c.logger,c.config.serializableCache,c.config.persistencePlugin);return C.validateTokenResponse(f.body),Z(C.handleServerTokenResponse.bind(C),S.Ak.HandleServerTokenResponse,c.logger,c.performanceClient,s.correlationId)(f.body,c.authority,d,s,void 0,void 0,!0,s.forceCache,g)})()}acquireTokenByRefreshToken(s){var c=this;return(0,_.Z)(function*(){if(!s)throw(0,N.ei)(Ie.dL);if(c.performanceClient?.addQueueMeasurement(S.Ak.RefreshTokenClientAcquireTokenByRefreshToken,s.correlationId),!s.account)throw(0,P.zP)(ie.D7);if(c.cacheManager.isAppMetadataFOCI(s.account.environment))try{return Z(c.acquireTokenWithCachedRefreshToken.bind(c),S.Ak.RefreshTokenClientAcquireTokenWithCachedRefreshToken,c.logger,c.performanceClient,s.correlationId)(s,!0)}catch(f){if(f instanceof J.Yo&&f.errorCode===Co.I2||f instanceof Ce.n&&f.errorCode===y.D1.INVALID_GRANT_ERROR&&f.subError===y.D1.CLIENT_MISMATCH_ERROR)return Z(c.acquireTokenWithCachedRefreshToken.bind(c),S.Ak.RefreshTokenClientAcquireTokenWithCachedRefreshToken,c.logger,c.performanceClient,s.correlationId)(s,!1);throw f}return Z(c.acquireTokenWithCachedRefreshToken.bind(c),S.Ak.RefreshTokenClientAcquireTokenWithCachedRefreshToken,c.logger,c.performanceClient,s.correlationId)(s,!1)})()}acquireTokenWithCachedRefreshToken(s,c){var d=this;return(0,_.Z)(function*(){d.performanceClient?.addQueueMeasurement(S.Ak.RefreshTokenClientAcquireTokenWithCachedRefreshToken,s.correlationId);const f=ne(d.cacheManager.getRefreshToken.bind(d.cacheManager),S.Ak.CacheManagerGetRefreshToken,d.logger,d.performanceClient,s.correlationId)(s.account,c);if(!f)throw(0,J.ip)(Co.I2);const g={...s,refreshToken:f.secret,authenticationScheme:s.authenticationScheme||y.hO.BEARER,ccsCredential:{credential:s.account.homeAccountId,type:"home_account_id"}};return Z(d.acquireToken.bind(d),S.Ak.RefreshTokenClientAcquireToken,d.logger,d.performanceClient,s.correlationId)(g)})()}executeTokenRequest(s,c){var d=this;return(0,_.Z)(function*(){d.performanceClient?.addQueueMeasurement(S.Ak.RefreshTokenClientExecuteTokenRequest,s.correlationId);const f=d.createTokenQueryParameters(s),g=H.G.appendQueryString(c.tokenEndpoint,f),C=yield Z(d.createTokenRequestBody.bind(d),S.Ak.RefreshTokenClientCreateTokenRequestBody,d.logger,d.performanceClient,s.correlationId)(s),I=d.createTokenRequestHeaders(s.ccsCredential),L={clientId:s.tokenBodyParameters?.clientId||d.config.authOptions.clientId,authority:c.canonicalAuthority,scopes:s.scopes,claims:s.claims,authenticationScheme:s.authenticationScheme,resourceRequestMethod:s.resourceRequestMethod,resourceRequestUri:s.resourceRequestUri,shrClaims:s.shrClaims,sshKid:s.sshKid};return Z(d.executePostToTokenEndpoint.bind(d),S.Ak.RefreshTokenClientExecutePostToTokenEndpoint,d.logger,d.performanceClient,s.correlationId)(g,C,I,L,s.correlationId,S.Ak.RefreshTokenClientExecutePostToTokenEndpoint)})()}createTokenRequestBody(s){var c=this;return(0,_.Z)(function*(){c.performanceClient?.addQueueMeasurement(S.Ak.RefreshTokenClientCreateTokenRequestBody,s.correlationId);const d=s.correlationId,f=new vr;if(f.addClientId(s.tokenBodyParameters?.[y.Fo.CLIENT_ID]||c.config.authOptions.clientId),s.redirectUri&&f.addRedirectUri(s.redirectUri),f.addScopes(s.scopes,!0,c.config.authOptions.authority.options.OIDCOptions?.defaultScopes),f.addGrantType(y.qJ.REFRESH_TOKEN_GRANT),f.addClientInfo(),f.addLibraryInfo(c.config.libraryInfo),f.addApplicationTelemetry(c.config.telemetry.application),f.addThrottling(),c.serverTelemetryManager&&!(0,mo.lh)(c.config)&&f.addServerTelemetry(c.serverTelemetryManager),f.addCorrelationId(d),f.addRefreshToken(s.refreshToken),c.config.clientCredentials.clientSecret&&f.addClientSecret(c.config.clientCredentials.clientSecret),c.config.clientCredentials.clientAssertion){const g=c.config.clientCredentials.clientAssertion;f.addClientAssertion(g.assertion),f.addClientAssertionType(g.assertionType)}if(s.authenticationScheme===y.hO.POP){const g=new Cr(c.cryptoUtils,c.performanceClient),C=yield Z(g.generateCnf.bind(g),S.Ak.PopTokenGenerateCnf,c.logger,c.performanceClient,s.correlationId)(s,c.logger);f.addPopToken(C.reqCnfString)}else if(s.authenticationScheme===y.hO.SSH){if(!s.sshJwk)throw(0,N.ei)(Ie.dK);f.addSshJwk(s.sshJwk)}if((!Gt.x.isEmptyObj(s.claims)||c.config.authOptions.clientCapabilities&&c.config.authOptions.clientCapabilities.length>0)&&f.addClaims(s.claims,c.config.authOptions.clientCapabilities),c.config.systemOptions.preventCorsPreflight&&s.ccsCredential)switch(s.ccsCredential.type){case"home_account_id":try{const g=(0,En.j)(s.ccsCredential.credential);f.addCcsOid(g)}catch(g){c.logger.verbose("Could not parse home account ID for CCS Header: "+g)}break;case"UPN":f.addCcsUpn(s.ccsCredential.credential)}return s.tokenBodyParameters&&f.addExtraQueryParameters(s.tokenBodyParameters),f.createQueryString()})()}}class _o extends Ri{constructor(s,c){super(s,c)}acquireToken(s){var c=this;return(0,_.Z)(function*(){try{const[d,f]=yield c.acquireCachedToken(s);return f===y.To.PROACTIVELY_REFRESHED&&(c.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),new lt(c.config,c.performanceClient).acquireTokenByRefreshToken(s).catch(()=>{})),d}catch(d){if(d instanceof P.er&&d.errorCode===ie.s$)return new lt(c.config,c.performanceClient).acquireTokenByRefreshToken(s);throw d}})()}acquireCachedToken(s){var c=this;return(0,_.Z)(function*(){c.performanceClient?.addQueueMeasurement(S.Ak.SilentFlowClientAcquireCachedToken,s.correlationId);let d=y.To.NOT_APPLICABLE;if(s.forceRefresh||!c.config.cacheOptions.claimsBasedCachingEnabled&&!Gt.x.isEmptyObj(s.claims))throw c.setCacheOutcome(y.To.FORCE_REFRESH_OR_CLAIMS,s.correlationId),(0,P.zP)(ie.s$);if(!s.account)throw(0,P.zP)(ie.D7);const f=s.authority||c.authority.getPreferredCache(),g=c.cacheManager.readCacheRecord(s.account,s,f);if(!g.accessToken)throw c.setCacheOutcome(y.To.NO_CACHED_ACCESS_TOKEN,s.correlationId),(0,P.zP)(ie.s$);if(X.I.wasClockTurnedBack(g.accessToken.cachedAt)||X.I.isTokenExpired(g.accessToken.expiresOn,c.config.systemOptions.tokenRenewalOffsetSeconds))throw c.setCacheOutcome(y.To.CACHED_ACCESS_TOKEN_EXPIRED,s.correlationId),(0,P.zP)(ie.s$);return g.accessToken.refreshOn&&X.I.isTokenExpired(g.accessToken.refreshOn,0)&&(d=y.To.PROACTIVELY_REFRESHED),c.setCacheOutcome(d,s.correlationId),c.config.serverTelemetryManager&&c.config.serverTelemetryManager.incrementCacheHits(),[yield Z(c.generateResultFromCacheRecord.bind(c),S.Ak.SilentFlowClientGenerateResultFromCacheRecord,c.logger,c.performanceClient,s.correlationId)(g,s),d]})()}setCacheOutcome(s,c){this.serverTelemetryManager?.setCacheOutcome(s),this.performanceClient?.addFields({cacheOutcome:s},c),this.logger.info(`Token refresh is required due to cache outcome: ${s}`)}generateResultFromCacheRecord(s,c){var d=this;return(0,_.Z)(function*(){let f;if(d.performanceClient?.addQueueMeasurement(S.Ak.SilentFlowClientGenerateResultFromCacheRecord,c.correlationId),s.idToken&&(f=(0,ve.Z_)(s.idToken.secret,d.config.cryptoInterface.base64Decode)),c.maxAge||0===c.maxAge){const g=f?.auth_time;if(!g)throw(0,P.zP)(ie.w7);(0,ve.ky)(g,c.maxAge)}return yield Xn.generateAuthenticationResult(d.cryptoUtils,d.authority,s,!0,c,f)})()}}class on extends tr{acquireToken(s){var c=this;return(0,_.Z)(function*(){c.performanceClient.addQueueMeasurement(S.Ak.SilentCacheClientAcquireToken,s.correlationId);const d=c.initializeServerTelemetryManager(M.WN.acquireTokenSilent_silentFlow),f=yield c.createSilentFlowClient(d,s.authority,s.azureCloudOptions);c.logger.verbose("Silent auth client created");try{const C=(yield Z(f.acquireCachedToken.bind(f),S.Ak.SilentFlowClientAcquireCachedToken,c.logger,c.performanceClient,s.correlationId)(s))[0];return c.performanceClient.addFields({fromCache:!0},s.correlationId),C}catch(g){throw g instanceof ue.Ut&&g.errorCode===de.XM&&c.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),g}})()}logout(s){this.logger.verbose("logoutRedirect called");const c=this.initializeLogoutRequest(s);return this.clearCacheOnLogout(c?.account)}createSilentFlowClient(s,c,d){var f=this;return(0,_.Z)(function*(){const g=yield Z(f.getClientConfiguration.bind(f),S.Ak.StandardInteractionClientGetClientConfiguration,f.logger,f.performanceClient,f.correlationId)(s,c,d);return new _o(g,f.performanceClient)})()}initializeSilentRequest(s,c){var d=this;return(0,_.Z)(function*(){d.performanceClient.addQueueMeasurement(S.Ak.InitializeSilentRequest,d.correlationId);const f=yield Z(d.initializeBaseRequest.bind(d),S.Ak.InitializeBaseRequest,d.logger,d.performanceClient,d.correlationId)(s,c);return{...s,...f,account:c,forceRefresh:s.forceRefresh||!1}})()}}class _r extends ga{constructor(s,c,d,f,g,C,I,L,k,G,ce,be){super(s,c,d,f,g,C,L,k,be),this.apiId=I,this.accountId=G,this.nativeMessageHandler=k,this.nativeStorageManager=ce,this.silentCacheClient=new on(s,this.nativeStorageManager,d,f,g,C,L,k,be)}acquireToken(s){var c=this;return(0,_.Z)(function*(){c.performanceClient.addQueueMeasurement(S.Ak.NativeInteractionClientAcquireToken,s.correlationId),c.logger.trace("NativeInteractionClient - acquireToken called.");const d=c.performanceClient.startMeasurement(S.Ak.NativeInteractionClientAcquireToken,s.correlationId),f=X.I.nowSeconds(),g=yield c.initializeNativeRequest(s);try{const k=yield c.acquireTokensFromCache(c.accountId,g);return d.end({success:!0,isNativeBroker:!1,fromCache:!0}),k}catch{c.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const C={method:M.Ky.GetToken,request:g},I=yield c.nativeMessageHandler.sendMessage(C),L=c.validateNativeResponse(I);return c.handleNativeResponse(L,g,f).then(k=>(d.end({success:!0,isNativeBroker:!0,requestId:k.requestId}),k)).catch(k=>{throw d.end({success:!1,errorCode:k.errorCode,subErrorCode:k.subError,isNativeBroker:!0}),k})})()}createSilentCacheRequest(s,c){return{authority:s.authority,correlationId:this.correlationId,scopes:qt.i.fromString(s.scope).asArray(),account:c,forceRefresh:!1}}acquireTokensFromCache(s,c){var d=this;return(0,_.Z)(function*(){if(!s)throw d.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),(0,P.zP)(ie.cX);const f=d.browserStorage.getBaseAccountInfo({nativeAccountId:s});if(!f)throw(0,P.zP)(ie.cX);try{const g=d.createSilentCacheRequest(c,f),C=yield d.silentCacheClient.acquireToken(g),I={...f,idTokenClaims:C?.idTokenClaims};return{...C,account:I}}catch(g){throw g}})()}acquireTokenRedirect(s){var c=this;return(0,_.Z)(function*(){c.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const d=yield c.initializeNativeRequest(s),f={method:M.Ky.GetToken,request:d};try{const I=yield c.nativeMessageHandler.sendMessage(f);c.validateNativeResponse(I)}catch(I){if(I instanceof In&&Rt(I))throw I}c.browserStorage.setTemporaryCache(M.c4.NATIVE_REQUEST,JSON.stringify(d),!0);const g={apiId:M.WN.acquireTokenRedirect,timeout:c.config.system.redirectNavigationTimeout,noHistory:!1},C=c.config.auth.navigateToLoginRequestUrl?window.location.href:c.getRedirectUri(s.redirectUri);yield c.navigationClient.navigateExternal(C,g)})()}handleRedirectPromise(){var s=this;return(0,_.Z)(function*(){if(s.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!s.browserStorage.isInteractionInProgress(!0))return s.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const c=s.browserStorage.getCachedNativeRequest();if(!c)return s.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),null;const{prompt:d,...f}=c;d&&s.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),s.browserStorage.removeItem(s.browserStorage.generateCacheKey(M.c4.NATIVE_REQUEST));const g={method:M.Ky.GetToken,request:f},C=X.I.nowSeconds();try{s.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const I=yield s.nativeMessageHandler.sendMessage(g);s.validateNativeResponse(I);const L=s.handleNativeResponse(I,f,C);return s.browserStorage.setInteractionInProgress(!1),L}catch(I){throw s.browserStorage.setInteractionInProgress(!1),I}})()}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}handleNativeResponse(s,c,d){var f=this;return(0,_.Z)(function*(){if(f.logger.trace("NativeInteractionClient - handleNativeResponse called."),s.account.id!==c.accountId)throw ki(Mi);const g=yield f.getDiscoveredAuthority(c.authority),C=ve.Z_(s.id_token,go.t),I=f.createHomeAccountIdentifier(s,C),L=oe.r.createAccount({homeAccountId:I,idTokenClaims:C,clientInfo:s.client_info,nativeAccountId:s.account.id},g),k=yield f.generateAuthenticationResult(s,c,C,L,g.canonicalAuthority,d);return f.cacheAccount(L),f.cacheNativeTokens(s,c,I,C,k.accessToken,k.tenantId,d),k})()}createHomeAccountIdentifier(s,c){return oe.r.generateHomeAccountId(s.client_info||y.gT.EMPTY_STRING,O.a.Default,this.logger,this.browserCrypto,c)}generateScopes(s,c){return qt.i.fromString(s.scope?s.scope:c.scope)}generatePopAccessToken(s,c){var d=this;return(0,_.Z)(function*(){if(c.tokenType===y.hO.POP){if(s.shr)return d.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),s.shr;const f=new Cr(d.browserCrypto),g={resourceRequestMethod:c.resourceRequestMethod,resourceRequestUri:c.resourceRequestUri,shrClaims:c.shrClaims,shrNonce:c.shrNonce};if(!c.keyId)throw(0,P.zP)(ie.Of);return yield f.signPopToken(s.access_token,c.keyId,g)}return s.access_token})()}generateAuthenticationResult(s,c,d,f,g,C){var I=this;return(0,_.Z)(function*(){const L=I.addTelemetryFromNativeResponse(s),k=qt.i.fromString(s.scope?s.scope:c.scope),G=s.account.properties||{},ce=G.UID||d.oid||d.sub||y.gT.EMPTY_STRING,be=G.TenantId||d.tid||y.gT.EMPTY_STRING,Y=(d?Object.assign(new oe.r,{...f,idTokenClaims:d}):f).getAccountInfo(),ht=yield I.generatePopAccessToken(s,c),re=c.tokenType===y.hO.POP?y.hO.POP:y.hO.BEARER;return{authority:g,uniqueId:ce,tenantId:be,scopes:k.asArray(),account:Y,idToken:s.id_token,idTokenClaims:d,accessToken:ht,fromCache:!!L&&I.isResponseFromCache(L),expiresOn:new Date(1e3*Number(C+s.expires_in)),tokenType:re,correlationId:I.correlationId,state:s.state,fromNativeBroker:!0}})()}cacheAccount(s){this.browserStorage.setAccount(s),this.browserStorage.removeAccountContext(s).catch(c=>{this.logger.error(`Error occurred while removing account context from browser storage. ${c}`)})}cacheNativeTokens(s,c,d,f,g,C,I){const L=Me.createIdTokenEntity(d,c.authority,s.id_token||"",c.clientId,f.tid||""),G=I+(c.tokenType===y.hO.POP?y.gT.SHR_NONCE_VALIDITY:("string"==typeof s.expires_in?parseInt(s.expires_in,10):s.expires_in)||0),ce=this.generateScopes(s,c),be=qe.createAccessTokenEntity(d,c.authority,g,c.clientId,f.tid||C,ce.printScopes(),G,0,this.browserCrypto),We=new Ve(void 0,L,be);this.nativeStorageManager.saveCacheRecord(We,c.storeInCache)}addTelemetryFromNativeResponse(s){const c=this.getMATSFromResponse(s);return c?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:c.broker_version,matsAccountJoinOnStart:c.account_join_on_start,matsAccountJoinOnEnd:c.account_join_on_end,matsDeviceJoin:c.device_join,matsPromptBehavior:c.prompt_behavior,matsApiErrorCode:c.api_error_code,matsUiVisible:c.ui_visible,matsSilentCode:c.silent_code,matsSilentBiSubCode:c.silent_bi_sub_code,matsSilentMessage:c.silent_message,matsSilentStatus:c.silent_status,matsHttpStatus:c.http_status,matsHttpEventCount:c.http_event_count},this.correlationId),c):null}validateNativeResponse(s){if(s.hasOwnProperty("access_token")&&s.hasOwnProperty("id_token")&&s.hasOwnProperty("client_info")&&s.hasOwnProperty("account")&&s.hasOwnProperty("scope")&&s.hasOwnProperty("expires_in"))return s;throw(0,De.MD)(va.g,"Response missing expected properties.")}getMATSFromResponse(s){if(s.properties.MATS)try{return JSON.parse(s.properties.MATS)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(s){return typeof s.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!s.is_cached}initializeNativeRequest(s){var c=this;return(0,_.Z)(function*(){c.logger.trace("NativeInteractionClient - initializeNativeRequest called");const d=s.authority||c.config.auth.authority;s.account&&(yield c.validateRequestAuthority(d,s.account));const f=new H.G(d);f.validateAsUri();const{scopes:g,...C}=s,I=new qt.i(g||[]);I.appendScopes(y.f_);const k={...C,accountId:c.accountId,clientId:c.config.auth.clientId,authority:f.urlString,scope:I.printScopes(),redirectUri:c.getRedirectUri(s.redirectUri),prompt:(()=>{switch(c.apiId){case M.WN.ssoSilent:case M.WN.acquireTokenSilent_silentFlow:return c.logger.trace("initializeNativeRequest: silent request sets prompt to none"),y.NJ.NONE}if(s.prompt)switch(s.prompt){case y.NJ.NONE:case y.NJ.CONSENT:case y.NJ.LOGIN:return c.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),s.prompt;default:throw c.logger.trace(`initializeNativeRequest: prompt = ${s.prompt} is not compatible with native flow`),(0,ue.Z_)(de.o9)}else c.logger.trace("initializeNativeRequest: prompt was not provided")})(),correlationId:c.correlationId,tokenType:s.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...s.extraQueryParameters,...s.tokenQueryParameters},extendedExpiryToken:!1};if(c.handleExtraBrokerParams(k),k.extraParameters=k.extraParameters||{},k.extraParameters.telemetry=M.BD.MATS_TELEMETRY,s.authenticationScheme===y.hO.POP){const G={resourceRequestUri:s.resourceRequestUri,resourceRequestMethod:s.resourceRequestMethod,shrClaims:s.shrClaims,shrNonce:s.shrNonce},ce=new Cr(c.browserCrypto),be=yield Z(ce.generateCnf.bind(ce),S.Ak.PopTokenGenerateCnf,c.logger,c.performanceClient,c.correlationId)(G,c.logger);k.reqCnf=be.reqCnfHash,k.keyId=be.kid}return k})()}handleExtraBrokerParams(s){if(s.extraParameters&&s.extraParameters.hasOwnProperty("brk_client_id")&&s.extraParameters.hasOwnProperty("brk_redirect_uri")&&s.extraParameters.hasOwnProperty(y.Fo.CLIENT_ID)){const f=s.extraParameters.brk_redirect_uri;s.extraParameters={child_client_id:s.extraParameters[y.Fo.CLIENT_ID],child_redirect_uri:s.redirectUri},s.redirectUri=f}}}class sn{constructor(s,c,d,f){this.logger=s,this.handshakeTimeoutMs=c,this.extensionId=f,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=d,this.handshakeEvent=d.startMeasurement(S.Ak.NativeMessageHandlerHandshake)}sendMessage(s){var c=this;return(0,_.Z)(function*(){c.logger.trace("NativeMessageHandler - sendMessage called.");const d={channel:M.BD.CHANNEL_ID,extensionId:c.extensionId,responseId:(0,Fn.nn)(),body:s};return c.logger.trace("NativeMessageHandler - Sending request to browser extension"),c.logger.tracePii(`NativeMessageHandler - Sending request to browser extension: ${JSON.stringify(d)}`),c.messageChannel.port1.postMessage(d),new Promise((f,g)=>{c.resolvers.set(d.responseId,{resolve:f,reject:g})})})()}static createProvider(s,c,d){return(0,_.Z)(function*(){s.trace("NativeMessageHandler - createProvider called.");try{const f=new sn(s,c,d,M.BD.PREFERRED_EXTENSION_ID);return yield f.sendHandshakeRequest(),f}catch{const g=new sn(s,c,d);return yield g.sendHandshakeRequest(),g}})()}sendHandshakeRequest(){var s=this;return(0,_.Z)(function*(){s.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",s.windowListener,!1);const c={channel:M.BD.CHANNEL_ID,extensionId:s.extensionId,responseId:(0,Fn.nn)(),body:{method:M.Ky.HandshakeRequest}};return s.handshakeEvent.add({extensionId:s.extensionId,extensionHandshakeTimeoutMs:s.handshakeTimeoutMs}),s.messageChannel.port1.onmessage=d=>{s.onChannelMessage(d)},window.postMessage(c,window.origin,[s.messageChannel.port2]),new Promise((d,f)=>{s.handshakeResolvers.set(c.responseId,{resolve:d,reject:f}),s.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",s.windowListener,!1),s.messageChannel.port1.close(),s.messageChannel.port2.close(),s.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),f((0,ue.Z_)(de.hR)),s.handshakeResolvers.delete(c.responseId)},s.handshakeTimeoutMs)})})()}onWindowMessage(s){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),s.source!==window)return;const c=s.data;if(c.channel&&c.channel===M.BD.CHANNEL_ID&&(!c.extensionId||c.extensionId===this.extensionId)&&c.body.method===M.Ky.HandshakeRequest){const d=this.handshakeResolvers.get(c.responseId);if(!d)return void this.logger.trace(`NativeMessageHandler.onWindowMessage - resolver can't be found for request ${c.responseId}`);this.logger.verbose(c.extensionId?`Extension with id: ${c.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),d.reject((0,ue.Z_)(de.Wb))}}onChannelMessage(s){this.logger.trace("NativeMessageHandler - onChannelMessage called.");const c=s.data,d=this.resolvers.get(c.responseId),f=this.handshakeResolvers.get(c.responseId);try{const g=c.body.method;if(g===M.Ky.Response){if(!d)return;const C=c.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii(`NativeMessageHandler - Received response from browser extension: ${JSON.stringify(C)}`),"Success"!==C.status)d.reject(ki(C.code,C.description,C.ext));else{if(!C.result)throw(0,De.MD)(va.g,"Event does not contain result.");C.result.code&&C.result.description?d.reject(ki(C.result.code,C.result.description,C.result.ext)):d.resolve(C.result)}this.resolvers.delete(c.responseId)}else if(g===M.Ky.HandshakeResponse){if(!f)return void this.logger.trace(`NativeMessageHandler.onChannelMessage - resolver can't be found for request ${c.responseId}`);clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=c.extensionId,this.extensionVersion=c.body.version,this.logger.verbose(`NativeMessageHandler - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),f.resolve(),this.handshakeResolvers.delete(c.responseId)}}catch(g){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${g}`),this.logger.errorPii(`Unable to parse ${s}`),d?d.reject(g):f&&f.reject(g)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isNativeAvailable(s,c,d,f){if(c.trace("isNativeAvailable called"),!s.system.allowNativeBroker)return c.trace("isNativeAvailable: allowNativeBroker is not enabled, returning false"),!1;if(!d)return c.trace("isNativeAvailable: WAM extension provider is not initialized, returning false"),!1;if(f)switch(f){case y.hO.BEARER:case y.hO.POP:return c.trace("isNativeAvailable: authenticationScheme is supported, returning true"),!0;default:return c.trace("isNativeAvailable: authenticationScheme is not supported, returning false"),!1}return!0}}class Er{constructor(s,c,d,f,g){this.authModule=s,this.browserStorage=c,this.authCodeRequest=d,this.logger=f,this.performanceClient=g}handleCodeResponseFromHash(s,c,d,f){var g=this;return(0,_.Z)(function*(){if(g.performanceClient.addQueueMeasurement(S.Ak.HandleCodeResponseFromHash,g.authCodeRequest.correlationId),!s)throw(0,ue.Z_)(de.nF);const C=g.browserStorage.generateStateKey(c),I=g.browserStorage.getTemporaryCache(C);if(!I)throw(0,P.zP)(ie.LV,"Cached State");let L;try{L=g.authModule.handleFragmentResponse(s,I)}catch(k){throw k instanceof Ce.n&&k.subError===de.h7?(0,ue.Z_)(de.h7):k}return Z(g.handleCodeResponseFromServer.bind(g),S.Ak.HandleCodeResponseFromServer,g.logger,g.performanceClient,g.authCodeRequest.correlationId)(L,c,d,f)})()}handleCodeResponseFromServer(s,c,d,f,g=!0){var C=this;return(0,_.Z)(function*(){C.performanceClient.addQueueMeasurement(S.Ak.HandleCodeResponseFromServer,C.authCodeRequest.correlationId),C.logger.trace("InteractionHandler.handleCodeResponseFromServer called");const I=C.browserStorage.generateStateKey(c),L=C.browserStorage.getTemporaryCache(I);if(!L)throw(0,P.zP)(ie.LV,"Cached State");const k=C.browserStorage.generateNonceKey(L),G=C.browserStorage.getTemporaryCache(k);if(C.authCodeRequest.code=s.code,s.cloud_instance_host_name&&(yield Z(C.updateTokenEndpointAuthority.bind(C),S.Ak.UpdateTokenEndpointAuthority,C.logger,C.performanceClient,C.authCodeRequest.correlationId)(s.cloud_instance_host_name,d,f)),g&&(s.nonce=G||void 0),s.state=L,s.client_info)C.authCodeRequest.clientInfo=s.client_info;else{const be=C.checkCcsCredentials();be&&(C.authCodeRequest.ccsCredential=be)}const ce=yield Z(C.authModule.acquireToken.bind(C.authModule),S.Ak.AuthClientAcquireToken,C.logger,C.performanceClient,C.authCodeRequest.correlationId)(C.authCodeRequest,s);return C.browserStorage.cleanRequestByState(c),ce})()}updateTokenEndpointAuthority(s,c,d){var f=this;return(0,_.Z)(function*(){f.performanceClient.addQueueMeasurement(S.Ak.UpdateTokenEndpointAuthority,f.authCodeRequest.correlationId);const g=`https://${s}/${c.tenant}/`,C=yield er.createDiscoveredInstance(g,d,f.browserStorage,c.options,f.logger,f.performanceClient,f.authCodeRequest.correlationId);f.authModule.updateAuthority(C)})()}checkCcsCredentials(){const s=this.browserStorage.getTemporaryCache(M.c4.CCS_CREDENTIAL,!0);if(s)try{return JSON.parse(s)}catch{this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii(`Cache credential could not be parsed: ${s}`)}return null}}class Xl extends tr{constructor(s,c,d,f,g,C,I,L,k,G){super(s,c,d,f,g,C,I,k,G),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=L}acquireToken(s){try{const c=this.generatePopupName(s.scopes||y.f_,s.authority||this.config.auth.authority),d=s.popupWindowAttributes||{};if(this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(s,c,d);{this.logger.verbose("asyncPopup set to false, opening popup before acquiring token");const f=this.openSizedPopup("about:blank",c,d);return this.acquireTokenPopupAsync(s,c,d,f)}}catch(c){return Promise.reject(c)}}logout(s){try{this.logger.verbose("logoutPopup called");const c=this.initializeLogoutRequest(s),d=this.generateLogoutPopupName(c),f=s&&s.authority,g=s&&s.mainWindowRedirectUri,C=s?.popupWindowAttributes||{};if(this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(c,d,C,f,void 0,g);{this.logger.verbose("asyncPopup set to false, opening popup");const I=this.openSizedPopup("about:blank",d,C);return this.logoutPopupAsync(c,d,C,f,I,g)}}catch(c){return Promise.reject(c)}}acquireTokenPopupAsync(s,c,d,f){var g=this;return(0,_.Z)(function*(){g.logger.verbose("acquireTokenPopupAsync called");const C=g.initializeServerTelemetryManager(M.WN.acquireTokenPopup);g.performanceClient.setPreQueueTime(S.Ak.StandardInteractionClientInitializeAuthorizationRequest,s.correlationId);const I=yield g.initializeAuthorizationRequest(s,M.s_.Popup);(0,ot.$P)(I.authority),g.browserStorage.updateCacheEntries(I.state,I.nonce,I.authority,I.loginHint||y.gT.EMPTY_STRING,I.account||null);try{g.performanceClient.setPreQueueTime(S.Ak.StandardInteractionClientInitializeAuthorizationCodeRequest,s.correlationId);const L=yield g.initializeAuthorizationCodeRequest(I);g.performanceClient.setPreQueueTime(S.Ak.StandardInteractionClientCreateAuthCodeClient,s.correlationId);const k=yield g.createAuthCodeClient(C,I.authority,I.azureCloudOptions);g.logger.verbose("Auth code client created");const G=sn.isNativeAvailable(g.config,g.logger,g.nativeMessageHandler,s.authenticationScheme);let ce;G&&(ce=g.performanceClient.startMeasurement(S.Ak.FetchAccountIdWithNativeBroker,s.correlationId));const be=yield k.getAuthCodeUrl({...I,nativeBroker:G}),We=new Er(k,g.browserStorage,L,g.logger,g.performanceClient),ht=g.initiateAuthRequest(be,{popup:f,popupName:c,popupWindowAttributes:d});g.eventHandler.emitEvent(Te.t.POPUP_OPENED,M.s_.Popup,{popupWindow:ht},null);const re=yield g.monitorPopupForHash(ht),Oe=H.G.getDeserializedHash(re),an=g.validateAndExtractStateFromHash(Oe,M.s_.Popup,I.correlationId);if(Kt.removeThrottle(g.browserStorage,g.config.auth.clientId,L),Oe.accountId){if(g.logger.verbose("Account id found in hash, calling WAM for token"),ce&&ce.end({success:!0,isNativeBroker:!0}),!g.nativeMessageHandler)throw(0,ue.Z_)(de.V7);const zr=new _r(g.config,g.browserStorage,g.browserCrypto,g.logger,g.eventHandler,g.navigationClient,M.WN.acquireTokenPopup,g.performanceClient,g.nativeMessageHandler,Oe.accountId,g.nativeStorage,I.correlationId),{userRequestState:Tr}=mt.parseRequestState(g.browserCrypto,an);return zr.acquireToken({...I,state:Tr,prompt:void 0}).finally(()=>{g.browserStorage.cleanRequestByState(an)})}return yield We.handleCodeResponseFromHash(re,an,k.authority,g.networkClient)}catch(L){throw f&&f.close(),L instanceof De.l4&&(L.setCorrelationId(g.correlationId),C.cacheFailedRequest(L)),g.browserStorage.cleanRequestByState(I.state),L}})()}logoutPopupAsync(s,c,d,f,g,C){var I=this;return(0,_.Z)(function*(){I.logger.verbose("logoutPopupAsync called"),I.eventHandler.emitEvent(Te.t.LOGOUT_START,M.s_.Popup,s);const L=I.initializeServerTelemetryManager(M.WN.logoutPopup);try{yield I.clearCacheOnLogout(s.account),I.performanceClient.setPreQueueTime(S.Ak.StandardInteractionClientCreateAuthCodeClient,s.correlationId);const k=yield I.createAuthCodeClient(L,f);I.logger.verbose("Auth code client created");const G=k.getLogoutUri(s);I.eventHandler.emitEvent(Te.t.LOGOUT_SUCCESS,M.s_.Popup,s);const ce=I.openPopup(G,{popupName:c,popupWindowAttributes:d,popup:g});if(I.eventHandler.emitEvent(Te.t.POPUP_OPENED,M.s_.Popup,{popupWindow:ce},null),yield I.waitForLogoutPopup(ce),C){const be={apiId:M.WN.logoutPopup,timeout:I.config.system.redirectNavigationTimeout,noHistory:!1},We=H.G.getAbsoluteUrl(C,(0,ot.Re)());I.logger.verbose("Redirecting main window to url specified in the request"),I.logger.verbosePii(`Redirecting main window to: ${We}`),yield I.navigationClient.navigateInternal(We,be)}else I.logger.verbose("No main window navigation requested")}catch(k){throw g&&g.close(),k instanceof De.l4&&(k.setCorrelationId(I.correlationId),L.cacheFailedRequest(k)),I.browserStorage.setInteractionInProgress(!1),I.eventHandler.emitEvent(Te.t.LOGOUT_FAILURE,M.s_.Popup,null,k),I.eventHandler.emitEvent(Te.t.LOGOUT_END,M.s_.Popup),k}I.eventHandler.emitEvent(Te.t.LOGOUT_END,M.s_.Popup)})()}initiateAuthRequest(s,c){if(s)return this.logger.infoPii(`Navigate to: ${s}`),this.openPopup(s,c);throw this.logger.error("Navigate url is empty"),(0,ue.Z_)(de._c)}monitorPopupForHash(s){return new Promise((c,d)=>{const f=this.config.system.windowHashTimeout/this.config.system.pollIntervalMilliseconds;let g=0;this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const C=setInterval(()=>{if(s.closed)return this.logger.error("PopupHandler.monitorPopupForHash - window closed"),this.cleanPopup(),clearInterval(C),void d((0,ue.Z_)(de.h7));let I=y.gT.EMPTY_STRING,L=y.gT.EMPTY_STRING;try{I=s.location.href,L=this.extractServerResponseStringFromPopup(s,I)}catch{}!I||"about:blank"===I||(this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),g++,L?(this.logger.verbose("PopupHandler.monitorPopupForHash - found hash in url"),clearInterval(C),this.cleanPopup(s),H.G.hashContainsKnownProperties(L)?(this.logger.verbose("PopupHandler.monitorPopupForHash - hash contains known properties, returning."),c(L)):(this.logger.error("PopupHandler.monitorPopupForHash - found hash in url but it does not contain known properties. Check that your router is not changing the hash prematurely."),this.logger.errorPii(`PopupHandler.monitorPopupForHash - hash found: ${L}`),d((0,ue.Z_)(de.S_)))):g>f&&(this.logger.error("PopupHandler.monitorPopupForHash - unable to find hash in url, timing out"),clearInterval(C),d((0,ue.Z_)(de.ZT))))},this.config.system.pollIntervalMilliseconds)})}waitForLogoutPopup(s){return new Promise(c=>{this.logger.verbose("PopupHandler.waitForLogoutPopup - polling started");const d=setInterval(()=>{s.closed&&(this.logger.error("PopupHandler.waitForLogoutPopup - window closed"),this.cleanPopup(),clearInterval(d),c());let f=y.gT.EMPTY_STRING;try{f=s.location.href}catch{}!f||"about:blank"===f||(this.logger.verbose("PopupHandler.waitForLogoutPopup - popup window is on same origin as caller, closing."),clearInterval(d),this.cleanPopup(s),c())},this.config.system.pollIntervalMilliseconds)})}openPopup(s,c){try{let d;if(c.popup?(d=c.popup,this.logger.verbosePii(`Navigating popup window to: ${s}`),d.location.assign(s)):typeof c.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${s}`),d=this.openSizedPopup(s,c.popupName,c.popupWindowAttributes)),!d)throw(0,ue.Z_)(de.H);return d.focus&&d.focus(),this.currentWindow=d,window.addEventListener("beforeunload",this.unloadWindow),d}catch(d){throw this.logger.error("error opening popup "+d.message),this.browserStorage.setInteractionInProgress(!1),(0,ue.Z_)(de.E)}}openSizedPopup(s,c,d){const f=window.screenLeft?window.screenLeft:window.screenX,g=window.screenTop?window.screenTop:window.screenY,C=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,I=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let L=d.popupSize?.width,k=d.popupSize?.height,G=d.popupPosition?.top,ce=d.popupPosition?.left;return(!L||L<0||L>C)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),L=M.qx.POPUP_WIDTH),(!k||k<0||k>I)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),k=M.qx.POPUP_HEIGHT),(!G||G<0||G>I)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),G=Math.max(0,I/2-M.qx.POPUP_HEIGHT/2+g)),(!ce||ce<0||ce>C)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),ce=Math.max(0,C/2-M.qx.POPUP_WIDTH/2+f)),window.open(s,c,`width=${L}, height=${k}, top=${G}, left=${ce}, scrollbars=yes`)}unloadWindow(s){this.browserStorage.cleanRequestByInteractionType(M.s_.Popup),this.currentWindow&&this.currentWindow.close(),s.preventDefault()}cleanPopup(s){s&&s.close(),window.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)}generatePopupName(s,c){return`${M.qx.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${s.join("-")}.${c}.${this.correlationId}`}generateLogoutPopupName(s){return`${M.qx.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${s.account&&s.account.homeAccountId}.${this.correlationId}`}extractServerResponseStringFromPopup(s,c){let d;return d=this.config.auth.OIDCOptions?.serverResponseType===y.rg.QUERY?H.G.parseQueryServerResponse(c):s.location.hash,d}}class Ir extends Er{constructor(s,c,d,f,g,C){super(s,c,d,f,C),this.browserCrypto=g}initiateAuthRequest(s,c){var d=this;return(0,_.Z)(function*(){if(d.logger.verbose("RedirectHandler.initiateAuthRequest called"),s){c.redirectStartPage&&(d.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),d.browserStorage.setTemporaryCache(M.c4.ORIGIN_URI,c.redirectStartPage,!0)),d.browserStorage.setTemporaryCache(M.c4.CORRELATION_ID,d.authCodeRequest.correlationId,!0),d.browserStorage.cacheCodeRequest(d.authCodeRequest),d.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${s}`);const f={apiId:M.WN.acquireTokenRedirect,timeout:c.redirectTimeout,noHistory:!1};return"function"==typeof c.onRedirectNavigate?(d.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),!1!==c.onRedirectNavigate(s)?(d.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),void(yield c.navigationClient.navigateExternal(s,f))):void d.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation")):(d.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),void(yield c.navigationClient.navigateExternal(s,f)))}throw d.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),(0,ue.Z_)(de._c)})()}handleCodeResponseFromHash(s,c,d,f){var g=this;return(0,_.Z)(function*(){if(g.logger.verbose("RedirectHandler.handleCodeResponse called"),!s)throw(0,ue.Z_)(de.nF);g.browserStorage.setInteractionInProgress(!1);const C=g.browserStorage.generateStateKey(c),I=g.browserStorage.getTemporaryCache(C);if(!I)throw(0,P.zP)(ie.LV,"Cached State");let L;try{L=g.authModule.handleFragmentResponse(s,I)}catch(be){throw be instanceof Ce.n&&be.subError===de.h7?(0,ue.Z_)(de.h7):be}const k=g.browserStorage.generateNonceKey(I),G=g.browserStorage.getTemporaryCache(k);if(g.authCodeRequest.code=L.code,L.cloud_instance_host_name&&(yield g.updateTokenEndpointAuthority(L.cloud_instance_host_name,d,f)),L.nonce=G||void 0,L.state=I,L.client_info)g.authCodeRequest.clientInfo=L.client_info;else{const be=g.checkCcsCredentials();be&&(g.authCodeRequest.ccsCredential=be)}const ce=yield g.authModule.acquireToken(g.authCodeRequest,L);return g.browserStorage.cleanRequestByState(c),ce})()}}class eu extends tr{constructor(s,c,d,f,g,C,I,L,k,G){super(s,c,d,f,g,C,I,k,G),this.nativeStorage=L}acquireToken(s){var c=this;return(0,_.Z)(function*(){c.performanceClient.setPreQueueTime(S.Ak.StandardInteractionClientInitializeAuthorizationRequest,s.correlationId);const d=yield c.initializeAuthorizationRequest(s,M.s_.Redirect);c.browserStorage.updateCacheEntries(d.state,d.nonce,d.authority,d.loginHint||y.gT.EMPTY_STRING,d.account||null);const f=c.initializeServerTelemetryManager(M.WN.acquireTokenRedirect),g=C=>{C.persisted&&(c.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),c.browserStorage.cleanRequestByState(d.state),c.eventHandler.emitEvent(Te.t.RESTORE_FROM_BFCACHE,M.s_.Redirect))};try{c.performanceClient.setPreQueueTime(S.Ak.StandardInteractionClientInitializeAuthorizationCodeRequest,s.correlationId);const C=yield c.initializeAuthorizationCodeRequest(d);c.performanceClient.setPreQueueTime(S.Ak.StandardInteractionClientCreateAuthCodeClient,s.correlationId);const I=yield c.createAuthCodeClient(f,d.authority,d.azureCloudOptions);c.logger.verbose("Auth code client created");const L=new Ir(I,c.browserStorage,C,c.logger,c.browserCrypto,c.performanceClient),k=yield I.getAuthCodeUrl({...d,nativeBroker:sn.isNativeAvailable(c.config,c.logger,c.nativeMessageHandler,s.authenticationScheme)}),G=c.getRedirectStartPage(s.redirectStartPage);return c.logger.verbosePii(`Redirect start page: ${G}`),window.addEventListener("pageshow",g),yield L.initiateAuthRequest(k,{navigationClient:c.navigationClient,redirectTimeout:c.config.system.redirectNavigationTimeout,redirectStartPage:G,onRedirectNavigate:s.onRedirectNavigate})}catch(C){throw C instanceof De.l4&&(C.setCorrelationId(c.correlationId),f.cacheFailedRequest(C)),window.removeEventListener("pageshow",g),c.browserStorage.cleanRequestByState(d.state),C}})()}handleRedirectPromise(s){var c=this;return(0,_.Z)(function*(){const d=c.initializeServerTelemetryManager(M.WN.handleRedirectPromise);try{if(!c.browserStorage.isInteractionInProgress(!0))return c.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const f=c.getRedirectResponseHash(s||window.location.hash);if(!f)return c.logger.info("handleRedirectPromise did not detect a response hash as a result of a redirect. Cleaning temporary cache."),c.browserStorage.cleanRequestByInteractionType(M.s_.Redirect),null;let g;try{const k=H.G.getDeserializedHash(f);g=c.validateAndExtractStateFromHash(k,M.s_.Redirect),c.logger.verbose("State extracted from hash")}catch(k){return c.logger.info(`handleRedirectPromise was unable to extract state due to: ${k}`),c.browserStorage.cleanRequestByInteractionType(M.s_.Redirect),null}const C=c.browserStorage.getTemporaryCache(M.c4.ORIGIN_URI,!0)||y.gT.EMPTY_STRING;if(H.G.removeHashFromUrl(C)===H.G.removeHashFromUrl(window.location.href)&&c.config.auth.navigateToLoginRequestUrl){c.logger.verbose("Current page is loginRequestUrl, handling hash");const k=yield c.handleHash(f,g,d);return C.indexOf("#")>-1&&(0,ot.tT)(C),k}if(!c.config.auth.navigateToLoginRequestUrl)return c.logger.verbose("NavigateToLoginRequestUrl set to false, handling hash"),c.handleHash(f,g,d);if(!(0,ot.zd)()||c.config.system.allowRedirectInIframe){c.browserStorage.setTemporaryCache(M.c4.URL_HASH,f,!0);const k={apiId:M.WN.handleRedirectPromise,timeout:c.config.system.redirectNavigationTimeout,noHistory:!0};let G=!0;if(C&&"null"!==C)c.logger.verbose(`Navigating to loginRequestUrl: ${C}`),G=yield c.navigationClient.navigateInternal(C,k);else{const ce=(0,ot.fl)();c.browserStorage.setTemporaryCache(M.c4.ORIGIN_URI,ce,!0),c.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),G=yield c.navigationClient.navigateInternal(ce,k)}if(!G)return c.handleHash(f,g,d)}return null}catch(f){throw f instanceof De.l4&&(f.setCorrelationId(c.correlationId),d.cacheFailedRequest(f)),c.browserStorage.cleanRequestByInteractionType(M.s_.Redirect),f}})()}getRedirectResponseHash(s){if(this.logger.verbose("getRedirectResponseHash called"),H.G.hashContainsKnownProperties(s))return(0,ot.hH)(window),this.logger.verbose("Hash contains known properties, returning response hash"),s;const d=this.browserStorage.getTemporaryCache(M.c4.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(M.c4.URL_HASH)),this.logger.verbose("Hash does not contain known properties, returning cached hash"),d}handleHash(s,c,d){var f=this;return(0,_.Z)(function*(){const g=f.browserStorage.getCachedRequest(c);f.logger.verbose("handleHash called, retrieved cached request");const C=H.G.getDeserializedHash(s);if(C.accountId){if(f.logger.verbose("Account id found in hash, calling WAM for token"),!f.nativeMessageHandler)throw(0,ue.Z_)(de.V7);const G=new _r(f.config,f.browserStorage,f.browserCrypto,f.logger,f.eventHandler,f.navigationClient,M.WN.acquireTokenPopup,f.performanceClient,f.nativeMessageHandler,C.accountId,f.nativeStorage,g.correlationId),{userRequestState:ce}=mt.parseRequestState(f.browserCrypto,c);return G.acquireToken({...g,state:ce,prompt:void 0}).finally(()=>{f.browserStorage.cleanRequestByState(c)})}const I=f.browserStorage.getCachedAuthority(c);if(!I)throw(0,ue.Z_)(de.dT);f.performanceClient.setPreQueueTime(S.Ak.StandardInteractionClientCreateAuthCodeClient,g.correlationId);const L=yield f.createAuthCodeClient(d,I);return f.logger.verbose("Auth code client created"),Kt.removeThrottle(f.browserStorage,f.config.auth.clientId,g),yield new Ir(L,f.browserStorage,g,f.logger,f.browserCrypto,f.performanceClient).handleCodeResponseFromHash(s,c,L.authority,f.networkClient)})()}logout(s){var c=this;return(0,_.Z)(function*(){c.logger.verbose("logoutRedirect called");const d=c.initializeLogoutRequest(s),f=c.initializeServerTelemetryManager(M.WN.logout);try{c.eventHandler.emitEvent(Te.t.LOGOUT_START,M.s_.Redirect,s),yield c.clearCacheOnLogout(d.account);const g={apiId:M.WN.logout,timeout:c.config.system.redirectNavigationTimeout,noHistory:!1};c.performanceClient.setPreQueueTime(S.Ak.StandardInteractionClientCreateAuthCodeClient,d.correlationId);const C=yield c.createAuthCodeClient(f,s&&s.authority);c.logger.verbose("Auth code client created");const I=C.getLogoutUri(d);if(c.eventHandler.emitEvent(Te.t.LOGOUT_SUCCESS,M.s_.Redirect,d),!s||"function"!=typeof s.onRedirectNavigate)return c.browserStorage.getInteractionInProgress()||c.browserStorage.setInteractionInProgress(!0),void(yield c.navigationClient.navigateExternal(I,g));if(!1!==s.onRedirectNavigate(I))return c.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),c.browserStorage.getInteractionInProgress()||c.browserStorage.setInteractionInProgress(!0),void(yield c.navigationClient.navigateExternal(I,g));c.browserStorage.setInteractionInProgress(!1),c.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation")}catch(g){throw g instanceof De.l4&&(g.setCorrelationId(c.correlationId),f.cacheFailedRequest(g)),c.eventHandler.emitEvent(Te.t.LOGOUT_FAILURE,M.s_.Redirect,null,g),c.eventHandler.emitEvent(Te.t.LOGOUT_END,M.s_.Redirect),g}c.eventHandler.emitEvent(Te.t.LOGOUT_END,M.s_.Redirect)})()}getRedirectStartPage(s){const c=s||window.location.href;return H.G.getAbsoluteUrl(c,(0,ot.Re)())}}var Oi=A(803);function Ta(V,s,c,d,f){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,_.Z)(function*(V,s,c,d,f){if(s.addQueueMeasurement(S.Ak.SilentHandlerInitiateAuthRequest,d),!V)throw c.info("Navigate url is empty"),(0,ue.Z_)(de._c);return f?yield Z(nu,S.Ak.SilentHandlerLoadFrame,c,s,d)(V,f,s,d):ne(wa,S.Ak.SilentHandlerLoadFrameSync,c,s,d)(V)})).apply(this,arguments)}function tu(V,s,c,d,f,g){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,_.Z)(function*(V,s,c,d,f,g){return d.addQueueMeasurement(S.Ak.SilentHandlerMonitorIframeForHash,g),new Promise((C,I)=>{s<Oi.Is&&f.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${s}ms) than the default (${Oi.Is}ms). This may result in timeouts.`);const L=window.setTimeout(()=>{window.clearInterval(k),I((0,ue.Z_)(de.JA))},s),k=window.setInterval(()=>{let G="";const ce=V.contentWindow;try{G=ce?ce.location.href:""}catch{}if(!G||"about:blank"===G)return;const be=ce?ce.location.hash:"";window.clearTimeout(L),window.clearInterval(k),C(be)},c)}).finally(()=>{ne(ru,S.Ak.RemoveHiddenIframe,f,d,g)(V)})})).apply(this,arguments)}function nu(V,s,c,d){return c.addQueueMeasurement(S.Ak.SilentHandlerLoadFrame,d),new Promise((f,g)=>{const C=Sa();window.setTimeout(()=>{C?(C.src=V,f(C)):g("Unable to load iframe")},s)})}function wa(V){const s=Sa();return s.src=V,s}function Sa(){const V=document.createElement("iframe");return V.style.visibility="hidden",V.style.position="absolute",V.style.width=V.style.height="0",V.style.border="0",V.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.getElementsByTagName("body")[0].appendChild(V),V}function ru(V){document.body===V.parentNode&&document.body.removeChild(V)}class Ye extends tr{constructor(s,c,d,f,g,C,I,L,k,G,ce){super(s,c,d,f,g,C,L,G,ce),this.apiId=I,this.nativeStorage=k}acquireToken(s){var c=this;return(0,_.Z)(function*(){if(c.performanceClient.addQueueMeasurement(S.Ak.SilentIframeClientAcquireToken,s.correlationId),!s.loginHint&&!s.sid&&(!s.account||!s.account.username)&&c.logger.warning("No user hint provided. The authorization server may need more information to complete this request."),s.prompt&&s.prompt!==y.NJ.NONE&&s.prompt!==y.NJ.NO_SESSION)throw(0,ue.Z_)(de.WQ);const d=yield Z(c.initializeAuthorizationRequest.bind(c),S.Ak.StandardInteractionClientInitializeAuthorizationRequest,c.logger,c.performanceClient,s.correlationId)({...s,prompt:s.prompt||y.NJ.NONE},M.s_.Silent);(0,ot.$P)(d.authority),c.browserStorage.updateCacheEntries(d.state,d.nonce,d.authority,d.loginHint||y.gT.EMPTY_STRING,d.account||null);const f=c.initializeServerTelemetryManager(c.apiId);try{const g=yield Z(c.createAuthCodeClient.bind(c),S.Ak.StandardInteractionClientCreateAuthCodeClient,c.logger,c.performanceClient,s.correlationId)(f,d.authority,d.azureCloudOptions);return yield Z(c.silentTokenHelper.bind(c),S.Ak.SilentIframeClientTokenHelper,c.logger,c.performanceClient,s.correlationId)(g,d)}catch(g){throw g instanceof De.l4&&(g.setCorrelationId(c.correlationId),f.cacheFailedRequest(g)),c.browserStorage.cleanRequestByState(d.state),g}})()}logout(){return Promise.reject((0,ue.Z_)(de.I9))}silentTokenHelper(s,c){var d=this;return(0,_.Z)(function*(){const f=c.correlationId;d.performanceClient.addQueueMeasurement(S.Ak.SilentIframeClientTokenHelper,f);const g=yield Z(d.initializeAuthorizationCodeRequest.bind(d),S.Ak.StandardInteractionClientInitializeAuthorizationCodeRequest,d.logger,d.performanceClient,f)(c),C=yield Z(s.getAuthCodeUrl.bind(s),S.Ak.GetAuthCodeUrl,d.logger,d.performanceClient,f)({...c,nativeBroker:sn.isNativeAvailable(d.config,d.logger,d.nativeMessageHandler,c.authenticationScheme)}),I=new Er(s,d.browserStorage,g,d.logger,d.performanceClient),L=yield Z(Ta,S.Ak.SilentHandlerInitiateAuthRequest,d.logger,d.performanceClient,f)(C,d.performanceClient,d.logger,f,d.config.system.navigateFrameWait),k=yield Z(tu,S.Ak.SilentHandlerMonitorIframeForHash,d.logger,d.performanceClient,f)(L,d.config.system.iframeHashTimeout,d.config.system.pollIntervalMilliseconds,d.performanceClient,d.logger,f);if(!k)throw d.logger.error("The request has returned to the redirectUri but a hash is not present in the iframe. It's likely that the hash has been removed or the page has been redirected by code running on the redirectUri page."),(0,ue.Z_)(de.nF);if(!H.G.hashContainsKnownProperties(k))throw d.logger.error("A hash is present in the iframe but it does not contain known properties. It's likely that the hash has been replaced by code running on the redirectUri page."),d.logger.errorPii(`The hash detected in the iframe is: ${k}`),(0,ue.Z_)(de.S_);const G=H.G.getDeserializedHash(k),ce=d.validateAndExtractStateFromHash(G,M.s_.Silent,f);if(G.accountId){if(d.logger.verbose("Account id found in hash, calling WAM for token"),!d.nativeMessageHandler)throw(0,ue.Z_)(de.V7);const be=new _r(d.config,d.browserStorage,d.browserCrypto,d.logger,d.eventHandler,d.navigationClient,d.apiId,d.performanceClient,d.nativeMessageHandler,G.accountId,d.browserStorage,f),{userRequestState:We}=mt.parseRequestState(d.browserCrypto,ce);return Z(be.acquireToken.bind(be),S.Ak.NativeInteractionClientAcquireToken,d.logger,d.performanceClient,f)({...c,state:We,prompt:c.prompt||y.NJ.NONE}).finally(()=>{d.browserStorage.cleanRequestByState(ce)})}return Z(I.handleCodeResponseFromHash.bind(I),S.Ak.HandleCodeResponseFromHash,d.logger,d.performanceClient,f)(k,ce,s.authority,d.networkClient)})()}}class xi extends tr{acquireToken(s){var c=this;return(0,_.Z)(function*(){c.performanceClient.addQueueMeasurement(S.Ak.SilentRefreshClientAcquireToken,s.correlationId);const d=yield Z(c.initializeBaseRequest.bind(c),S.Ak.InitializeBaseRequest,c.logger,c.performanceClient,s.correlationId)(s,s.account),f={...s,...d},g=c.initializeServerTelemetryManager(M.WN.acquireTokenSilent_silentFlow),C=yield c.createRefreshTokenClient(g,f.authority,f.azureCloudOptions);return c.logger.verbose("Refresh token client created"),Z(C.acquireTokenByRefreshToken.bind(C),S.Ak.RefreshTokenClientAcquireTokenByRefreshToken,c.logger,c.performanceClient,s.correlationId)(f).then(I=>I).then(I=>(c.performanceClient.addFields({fromCache:I.fromCache,requestId:I.requestId},s.correlationId),I)).catch(I=>{throw I.setCorrelationId(c.correlationId),g.cacheFailedRequest(I),I})})()}logout(){return Promise.reject((0,ue.Z_)(de.I9))}createRefreshTokenClient(s,c,d){var f=this;return(0,_.Z)(function*(){const g=yield Z(f.getClientConfiguration.bind(f),S.Ak.StandardInteractionClientGetClientConfiguration,f.logger,f.performanceClient,f.correlationId)(s,c,d);return new lt(g,f.performanceClient)})()}}class Nt{constructor(s,c,d,f){this.isBrowserEnvironment=typeof window<"u",this.config=s,this.storage=c,this.logger=d,this.cryptoObj=f}loadExternalTokens(s,c,d){if(this.logger.info("TokenCache - loadExternalTokens called"),!c.id_token)throw(0,ue.Z_)(de.Jd);const f=ve.Z_(c.id_token,go.t);let g,C,I;if(s.account)I=oe.r.createFromAccountInfo(s.account),g=new Ve(I,this.loadIdToken(c.id_token,I.homeAccountId,s.account.environment,s.account.tenantId),this.loadAccessToken(s,c,I.homeAccountId,s.account.environment,s.account.tenantId,d),this.loadRefreshToken(s,c,I.homeAccountId,s.account.environment));else{if(!s.authority)throw(0,ue.Z_)(de.Jd);{const L=ae.generateAuthority(s.authority,s.azureCloudOptions);if(C=new ae(L,this.config.system.networkClient,this.storage,{protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},this.logger),d.clientInfo)this.logger.trace("TokenCache - homeAccountId from options"),I=this.loadAccount(f,C,d.clientInfo),g=new Ve(I,this.loadIdToken(c.id_token,I.homeAccountId,C.hostnameAndPort,C.tenant),this.loadAccessToken(s,c,I.homeAccountId,C.hostnameAndPort,C.tenant,d),this.loadRefreshToken(s,c,I.homeAccountId,C.hostnameAndPort));else{if(!c.client_info)throw(0,ue.Z_)(de.Jd);this.logger.trace("TokenCache - homeAccountId from response"),I=this.loadAccount(f,C,c.client_info),g=new Ve(I,this.loadIdToken(c.id_token,I.homeAccountId,C.hostnameAndPort,C.tenant),this.loadAccessToken(s,c,I.homeAccountId,C.hostnameAndPort,C.tenant,d),this.loadRefreshToken(s,c,I.homeAccountId,C.hostnameAndPort))}}}return this.generateAuthenticationResult(s,f,g,I,C)}loadAccount(s,c,d,f){let g;if(f?g=f:void 0!==c.authorityType&&d&&(g=oe.r.generateHomeAccountId(d,c.authorityType,this.logger,this.cryptoObj,s)),!g)throw(0,ue.Z_)(de.Jd);const C=oe.r.createAccount({homeAccountId:g,idTokenClaims:s,clientInfo:d,environment:c.hostnameAndPort},c);if(this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading account"),this.storage.setAccount(C),C;throw(0,ue.Z_)(de.Jd)}loadIdToken(s,c,d,f){const g=Me.createIdTokenEntity(c,d,s,this.config.auth.clientId,f);if(this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading id token"),this.storage.setIdTokenCredential(g),g;throw(0,ue.Z_)(de.Jd)}loadAccessToken(s,c,d,f,g,C){if(!c.access_token)return this.logger.verbose("TokenCache - No access token provided for caching"),null;if(!c.expires_in||!C.extendedExpiresOn)throw(0,ue.Z_)(de.Jd);const I=new qt.i(s.scopes).printScopes(),L=C.expiresOn||c.expires_in+(new Date).getTime()/1e3,G=qe.createAccessTokenEntity(d,f,c.access_token,this.config.auth.clientId,g,I,L,C.extendedExpiresOn,this.cryptoObj);if(this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading access token"),this.storage.setAccessTokenCredential(G),G;throw(0,ue.Z_)(de.Jd)}loadRefreshToken(s,c,d,f){if(!c.refresh_token)return this.logger.verbose("TokenCache - No refresh token provided for caching"),null;const g=at.createRefreshTokenEntity(d,f,c.refresh_token,this.config.auth.clientId);if(this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading refresh token"),this.storage.setRefreshTokenCredential(g),g;throw(0,ue.Z_)(de.Jd)}generateAuthenticationResult(s,c,d,f,g){let k,C=y.gT.EMPTY_STRING,I=[],L=null;return d?.accessToken&&(C=d.accessToken.secret,I=qt.i.fromString(d.accessToken.target).asArray(),L=new Date(1e3*Number(d.accessToken.expiresOn)),k=new Date(1e3*Number(d.accessToken.extendedExpiresOn))),{authority:g?g.canonicalAuthority:y.gT.EMPTY_STRING,uniqueId:c.oid||c.sub||y.gT.EMPTY_STRING,tenantId:c.tid||y.gT.EMPTY_STRING,scopes:I,account:f.getAccountInfo(),idToken:d.idToken?.secret||"",idTokenClaims:c||{},accessToken:C,fromCache:!0,expiresOn:L,correlationId:s.correlationId||y.gT.EMPTY_STRING,requestId:y.gT.EMPTY_STRING,extExpiresOn:k,familyId:y.gT.EMPTY_STRING,tokenType:d?.accessToken?.tokenType||y.gT.EMPTY_STRING,state:y.gT.EMPTY_STRING,cloudGraphHostName:f.cloudGraphHostName||y.gT.EMPTY_STRING,msGraphHost:f.msGraphHost||y.gT.EMPTY_STRING,code:void 0,fromNativeBroker:!1}}}class ge extends fa{constructor(s){super(s),this.includeRedirectUri=!1}}class Aa extends tr{constructor(s,c,d,f,g,C,I,L,k,G){super(s,c,d,f,g,C,L,k,G),this.apiId=I}acquireToken(s){var c=this;return(0,_.Z)(function*(){if(!s.code)throw(0,ue.Z_)(de.Aj);const d=yield Z(c.initializeAuthorizationRequest.bind(c),S.Ak.StandardInteractionClientInitializeAuthorizationRequest,c.logger,c.performanceClient,s.correlationId)(s,M.s_.Silent);c.browserStorage.updateCacheEntries(d.state,d.nonce,d.authority,d.loginHint||y.gT.EMPTY_STRING,d.account||null);const f=c.initializeServerTelemetryManager(c.apiId);try{const g={...d,code:s.code},C=yield Z(c.getClientConfiguration.bind(c),S.Ak.StandardInteractionClientGetClientConfiguration,c.logger,c.performanceClient,s.correlationId)(f,d.authority),I=new ge(C);c.logger.verbose("Auth code client created");const L=new Er(I,c.browserStorage,g,c.logger,c.performanceClient);return Z(L.handleCodeResponseFromServer.bind(L),S.Ak.HandleCodeResponseFromServer,c.logger,c.performanceClient,s.correlationId)({code:s.code,msgraph_host:s.msGraphHost,cloud_graph_host_name:s.cloudGraphHostName,cloud_instance_host_name:s.cloudInstanceHostName},d.state,I.authority,c.networkClient,!1)}catch(g){throw g instanceof De.l4&&(g.setCorrelationId(c.correlationId),f.cacheFailedRequest(g)),c.browserStorage.cleanRequestByState(d.state),g}})()}logout(){return Promise.reject((0,ue.Z_)(de.I9))}}class Vr{constructor(s){this.atsAsyncMeasurement=void 0,this.operatingContext=s,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=s.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new m.Q(this.logger,this.performanceClient):R.d,this.eventHandler=new Gl.b(this.logger,this.browserCrypto),this.browserStorage=this.isBrowserEnvironment?new la(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,function $(V){const s=V.cloudDiscoveryMetadata;let c;if(s)try{c=JSON.parse(s).metadata}catch{throw(0,N.ei)(Ie.E)}return{canonicalAuthority:V.authority?K(V.authority):void 0,knownAuthorities:V.knownAuthorities,cloudDiscoveryMetadata:c}}(this.config.auth)):((V,s)=>new la(this.config.auth.clientId,{cacheLocation:M.Ix.MemoryStorage,temporaryCacheLocation:M.Ix.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1},R.d,this.logger))(),this.nativeInternalStorage=new la(this.config.auth.clientId,{cacheLocation:M.Ix.MemoryStorage,temporaryCacheLocation:M.Ix.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1},this.browserCrypto,this.logger),this.tokenCache=new Nt(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static createController(s){return(0,_.Z)(function*(){const c=new Vr(s);return yield c.initialize(),c})()}trackPageVisibility(){this.atsAsyncMeasurement&&(this.logger.info("Perf: Visibility change detected"),this.atsAsyncMeasurement.increment({visibilityChangeCount:1}))}initialize(){var s=this;return(0,_.Z)(function*(){if(s.logger.trace("initialize called"),s.initialized)return void s.logger.info("initialize has already been called, exiting early.");const c=s.config.system.allowNativeBroker,d=s.performanceClient.startMeasurement(S.Ak.InitializeClientApplication);if(s.eventHandler.emitEvent(Te.t.INITIALIZE_START),c)try{s.nativeExtensionProvider=yield sn.createProvider(s.logger,s.config.system.nativeBrokerHandshakeTimeout,s.performanceClient)}catch(f){s.logger.verbose(f)}s.config.cache.claimsBasedCachingEnabled||(s.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),yield Z(s.browserStorage.clearTokensAndKeysWithClaims.bind(s.browserStorage),S.Ak.ClearTokensAndKeysWithClaims,s.logger,s.performanceClient)(s.performanceClient)),s.initialized=!0,s.eventHandler.emitEvent(Te.t.INITIALIZE_END),d.end({allowNativeBroker:c,success:!0})})()}handleRedirectPromise(s){var c=this;return(0,_.Z)(function*(){c.logger.verbose("handleRedirectPromise called"),(0,ot.eQ)(c.initialized);let d=s;if(c.config.auth.OIDCOptions?.serverResponseType===y.rg.QUERY){const g=window.location.href;d=H.G.parseQueryServerResponse(g)}const f=c.getAllAccounts();if(c.isBrowserEnvironment){const g=d||y.gT.EMPTY_STRING;let C=c.redirectResponse.get(g);if(typeof C>"u"){c.eventHandler.emitEvent(Te.t.HANDLE_REDIRECT_START,M.s_.Redirect),c.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise");const I=c.browserStorage.getCachedNativeRequest();let L;if(I&&sn.isNativeAvailable(c.config,c.logger,c.nativeExtensionProvider)&&c.nativeExtensionProvider&&!d)c.logger.trace("handleRedirectPromise - acquiring token from native platform"),L=new _r(c.config,c.browserStorage,c.browserCrypto,c.logger,c.eventHandler,c.navigationClient,M.WN.handleRedirectPromise,c.performanceClient,c.nativeExtensionProvider,I.accountId,c.nativeInternalStorage,I.correlationId).handleRedirectPromise();else{c.logger.trace("handleRedirectPromise - acquiring token from web flow");const k=c.browserStorage.getTemporaryCache(M.c4.CORRELATION_ID,!0)||y.gT.EMPTY_STRING;L=c.createRedirectClient(k).handleRedirectPromise(d)}C=L.then(k=>(k&&(f.length<c.getAllAccounts().length?(c.eventHandler.emitEvent(Te.t.LOGIN_SUCCESS,M.s_.Redirect,k),c.logger.verbose("handleRedirectResponse returned result, login success")):(c.eventHandler.emitEvent(Te.t.ACQUIRE_TOKEN_SUCCESS,M.s_.Redirect,k),c.logger.verbose("handleRedirectResponse returned result, acquire token success"))),c.eventHandler.emitEvent(Te.t.HANDLE_REDIRECT_END,M.s_.Redirect),k)).catch(k=>{throw c.eventHandler.emitEvent(f.length>0?Te.t.ACQUIRE_TOKEN_FAILURE:Te.t.LOGIN_FAILURE,M.s_.Redirect,null,k),c.eventHandler.emitEvent(Te.t.HANDLE_REDIRECT_END,M.s_.Redirect),k}),c.redirectResponse.set(g,C)}else c.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call");return C}return c.logger.verbose("handleRedirectPromise returns null, not browser environment"),null})()}acquireTokenRedirect(s){var c=this;return(0,_.Z)(function*(){const d=c.getRequestCorrelationId(s);c.logger.verbose("acquireTokenRedirect called",d),c.preflightBrowserEnvironmentCheck(M.s_.Redirect);const f=c.getAllAccounts().length>0;let g;return c.eventHandler.emitEvent(f?Te.t.ACQUIRE_TOKEN_START:Te.t.LOGIN_START,M.s_.Redirect,s),g=c.nativeExtensionProvider&&c.canUseNative(s)?new _r(c.config,c.browserStorage,c.browserCrypto,c.logger,c.eventHandler,c.navigationClient,M.WN.acquireTokenRedirect,c.performanceClient,c.nativeExtensionProvider,c.getNativeAccountId(s),c.nativeInternalStorage,s.correlationId).acquireTokenRedirect(s).catch(I=>{if(I instanceof In&&Rt(I))return c.nativeExtensionProvider=void 0,c.createRedirectClient(s.correlationId).acquireToken(s);if(I instanceof J.Yo)return c.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),c.createRedirectClient(s.correlationId).acquireToken(s);throw c.getBrowserStorage().setInteractionInProgress(!1),I}):c.createRedirectClient(s.correlationId).acquireToken(s),g.catch(C=>{throw c.eventHandler.emitEvent(f?Te.t.ACQUIRE_TOKEN_FAILURE:Te.t.LOGIN_FAILURE,M.s_.Redirect,null,C),C})})()}acquireTokenPopup(s){const c=this.getRequestCorrelationId(s),d=this.performanceClient.startMeasurement(S.Ak.AcquireTokenPopup,c);try{this.logger.verbose("acquireTokenPopup called",c),this.preflightBrowserEnvironmentCheck(M.s_.Popup)}catch(C){return Promise.reject(C)}const f=this.getAllAccounts();let g;return this.eventHandler.emitEvent(f.length>0?Te.t.ACQUIRE_TOKEN_START:Te.t.LOGIN_START,M.s_.Popup,s),g=this.canUseNative(s)?this.acquireTokenNative(s,M.WN.acquireTokenPopup).then(C=>(this.getBrowserStorage().setInteractionInProgress(!1),d.end({success:!0,isNativeBroker:!0,requestId:C.requestId}),C)).catch(C=>{if(C instanceof In&&Rt(C))return this.nativeExtensionProvider=void 0,this.createPopupClient(s.correlationId).acquireToken(s);if(C instanceof J.Yo)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(s.correlationId).acquireToken(s);throw this.getBrowserStorage().setInteractionInProgress(!1),C}):this.createPopupClient(s.correlationId).acquireToken(s),g.then(C=>(f.length<this.getAllAccounts().length?this.eventHandler.emitEvent(Te.t.LOGIN_SUCCESS,M.s_.Popup,C):this.eventHandler.emitEvent(Te.t.ACQUIRE_TOKEN_SUCCESS,M.s_.Popup,C),d.add({accessTokenSize:C.accessToken.length,idTokenSize:C.idToken.length}),d.end({success:!0,requestId:C.requestId}),C)).catch(C=>(this.eventHandler.emitEvent(f.length>0?Te.t.ACQUIRE_TOKEN_FAILURE:Te.t.LOGIN_FAILURE,M.s_.Popup,null,C),d.end({errorCode:C.errorCode,subErrorCode:C.subError,success:!1}),Promise.reject(C)))}trackPageVisibilityWithMeasurement(){const s=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;s&&(this.logger.info("Perf: Visibility change detected in ",s.event.name),s.increment({visibilityChangeCount:1}))}ssoSilent(s){var c=this;return(0,_.Z)(function*(){const d=c.getRequestCorrelationId(s),f={...s,prompt:s.prompt,correlationId:d};let g;return c.preflightBrowserEnvironmentCheck(M.s_.Silent),c.ssoSilentMeasurement=c.performanceClient.startMeasurement(S.Ak.SsoSilent,d),c.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",c.trackPageVisibilityWithMeasurement),c.logger.verbose("ssoSilent called",d),c.eventHandler.emitEvent(Te.t.SSO_SILENT_START,M.s_.Silent,f),g=c.canUseNative(f)?c.acquireTokenNative(f,M.WN.ssoSilent).catch(C=>{if(C instanceof In&&Rt(C))return c.nativeExtensionProvider=void 0,c.createSilentIframeClient(f.correlationId).acquireToken(f);throw C}):c.createSilentIframeClient(f.correlationId).acquireToken(f),g.then(C=>(c.eventHandler.emitEvent(Te.t.SSO_SILENT_SUCCESS,M.s_.Silent,C),c.ssoSilentMeasurement?.add({accessTokenSize:C.accessToken.length,idTokenSize:C.idToken.length}),c.ssoSilentMeasurement?.end({success:!0,isNativeBroker:C.fromNativeBroker,requestId:C.requestId}),C)).catch(C=>{throw c.eventHandler.emitEvent(Te.t.SSO_SILENT_FAILURE,M.s_.Silent,null,C),c.ssoSilentMeasurement?.end({errorCode:C.errorCode,subErrorCode:C.subError,success:!1}),C}).finally(()=>{document.removeEventListener("visibilitychange",c.trackPageVisibilityWithMeasurement)})})()}acquireTokenByCode(s){var c=this;return(0,_.Z)(function*(){const d=c.getRequestCorrelationId(s);c.preflightBrowserEnvironmentCheck(M.s_.Silent),c.logger.trace("acquireTokenByCode called",d),c.eventHandler.emitEvent(Te.t.ACQUIRE_TOKEN_BY_CODE_START,M.s_.Silent,s);const f=c.performanceClient.startMeasurement(S.Ak.AcquireTokenByCode,s.correlationId);try{if(s.code&&s.nativeAccountId)throw(0,ue.Z_)(de.LL);if(s.code){const g=s.code;let C=c.hybridAuthCodeResponses.get(g);return C?(c.logger.verbose("Existing acquireTokenByCode request found",s.correlationId),f.discard()):(c.logger.verbose("Initiating new acquireTokenByCode request",d),C=c.acquireTokenByCodeAsync({...s,correlationId:d}).then(I=>(c.eventHandler.emitEvent(Te.t.ACQUIRE_TOKEN_BY_CODE_SUCCESS,M.s_.Silent,I),c.hybridAuthCodeResponses.delete(g),f.add({accessTokenSize:I.accessToken.length,idTokenSize:I.idToken.length}),f.end({success:!0,isNativeBroker:I.fromNativeBroker,requestId:I.requestId}),I)).catch(I=>{throw c.hybridAuthCodeResponses.delete(g),c.eventHandler.emitEvent(Te.t.ACQUIRE_TOKEN_BY_CODE_FAILURE,M.s_.Silent,null,I),f.end({errorCode:I.errorCode,subErrorCode:I.subError,success:!1}),I}),c.hybridAuthCodeResponses.set(g,C)),C}if(s.nativeAccountId){if(c.canUseNative(s,s.nativeAccountId))return c.acquireTokenNative(s,M.WN.acquireTokenByCode,s.nativeAccountId).catch(g=>{throw g instanceof In&&Rt(g)&&(c.nativeExtensionProvider=void 0),g});throw(0,ue.Z_)(de.KA)}throw(0,ue.Z_)(de.Dy)}catch(g){throw c.eventHandler.emitEvent(Te.t.ACQUIRE_TOKEN_BY_CODE_FAILURE,M.s_.Silent,null,g),f.end({errorCode:g instanceof De.l4&&g.errorCode||void 0,subErrorCode:g instanceof De.l4&&g.subError||void 0,success:!1}),g}})()}acquireTokenByCodeAsync(s){var c=this;return(0,_.Z)(function*(){return c.logger.trace("acquireTokenByCodeAsync called",s.correlationId),c.acquireTokenByCodeAsyncMeasurement=c.performanceClient.startMeasurement(S.Ak.AcquireTokenByCodeAsync,s.correlationId),c.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",c.trackPageVisibilityWithMeasurement),yield c.createSilentAuthCodeClient(s.correlationId).acquireToken(s).then(g=>(c.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:g.fromCache,isNativeBroker:g.fromNativeBroker,requestId:g.requestId}),g)).catch(g=>{throw c.acquireTokenByCodeAsyncMeasurement?.end({errorCode:g.errorCode,subErrorCode:g.subError,success:!1}),g}).finally(()=>{document.removeEventListener("visibilitychange",c.trackPageVisibilityWithMeasurement)})})()}acquireTokenFromCache(s,c,d){var f=this;return(0,_.Z)(function*(){switch(f.performanceClient.addQueueMeasurement(S.Ak.AcquireTokenFromCache,c.correlationId),d.cacheLookupPolicy){case M.lu.Default:case M.lu.AccessToken:case M.lu.AccessTokenAndRefreshToken:return Z(s.acquireToken.bind(s),S.Ak.SilentCacheClientAcquireToken,f.logger,f.performanceClient,c.correlationId)(c);default:throw(0,P.zP)(ie.s$)}})()}acquireTokenByRefreshToken(s,c){var d=this;return(0,_.Z)(function*(){switch(d.performanceClient.addQueueMeasurement(S.Ak.AcquireTokenByRefreshToken,s.correlationId),c.cacheLookupPolicy){case M.lu.Default:case M.lu.AccessTokenAndRefreshToken:case M.lu.RefreshToken:case M.lu.RefreshTokenAndNetwork:const f=d.createSilentRefreshClient(s.correlationId);return Z(f.acquireToken.bind(f),S.Ak.SilentRefreshClientAcquireToken,d.logger,d.performanceClient,s.correlationId)(s);default:throw(0,P.zP)(ie.s$)}})()}acquireTokenBySilentIframe(s){var c=this;return(0,_.Z)(function*(){c.performanceClient.addQueueMeasurement(S.Ak.AcquireTokenBySilentIframe,s.correlationId);const d=c.createSilentIframeClient(s.correlationId);return Z(d.acquireToken.bind(d),S.Ak.SilentIframeClientAcquireToken,c.logger,c.performanceClient,s.correlationId)(s)})()}logout(s){var c=this;return(0,_.Z)(function*(){const d=c.getRequestCorrelationId(s);return c.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",d),c.logoutRedirect({correlationId:d,...s})})()}logoutRedirect(s){var c=this;return(0,_.Z)(function*(){const d=c.getRequestCorrelationId(s);return c.preflightBrowserEnvironmentCheck(M.s_.Redirect),c.createRedirectClient(d).logout(s)})()}logoutPopup(s){try{const c=this.getRequestCorrelationId(s);return this.preflightBrowserEnvironmentCheck(M.s_.Popup),this.createPopupClient(c).logout(s)}catch(c){return Promise.reject(c)}}clearCache(s){var c=this;return(0,_.Z)(function*(){const d=c.getRequestCorrelationId(s);return c.createSilentCacheClient(d).logout(s)})()}getAllAccounts(s){return this.logger.verbose("getAllAccounts called"),this.isBrowserEnvironment?this.browserStorage.getAllAccounts(s):[]}getAccount(s){if(this.logger.trace("getAccount called"),0===Object.keys(s).length)return this.logger.warning("getAccount: No accountFilter provided"),null;const c=this.browserStorage.getAccountInfoFilteredBy(s);return c?(this.logger.verbose("getAccount: Account matching provided filter found, returning"),c):(this.logger.verbose("getAccount: No matching account found, returning null"),null)}getAccountByUsername(s){if(this.logger.trace("getAccountByUsername called"),!s)return this.logger.warning("getAccountByUsername: No username provided"),null;const c=this.browserStorage.getAccountInfoFilteredBy({username:s});return c?(this.logger.verbose("getAccountByUsername: Account matching username found, returning"),this.logger.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${s}`),c):(this.logger.verbose("getAccountByUsername: No matching account found, returning null"),null)}getAccountByHomeId(s){if(this.logger.trace("getAccountByHomeId called"),!s)return this.logger.warning("getAccountByHomeId: No homeAccountId provided"),null;const c=this.browserStorage.getAccountInfoFilteredBy({homeAccountId:s});return c?(this.logger.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),this.logger.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${s}`),c):(this.logger.verbose("getAccountByHomeId: No matching account found, returning null"),null)}getAccountByLocalId(s){if(this.logger.trace("getAccountByLocalId called"),!s)return this.logger.warning("getAccountByLocalId: No localAccountId provided"),null;const c=this.browserStorage.getAccountInfoFilteredBy({localAccountId:s});return c?(this.logger.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),this.logger.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${s}`),c):(this.logger.verbose("getAccountByLocalId: No matching account found, returning null"),null)}setActiveAccount(s){this.browserStorage.setActiveAccount(s)}getActiveAccount(){return this.browserStorage.getActiveAccount()}hydrateCache(s,c){var d=this;return(0,_.Z)(function*(){d.logger.verbose("hydrateCache called");const f=oe.r.createFromAccountInfo(s.account,s.cloudGraphHostName,s.msGraphHost);return d.browserStorage.setAccount(f),s.fromNativeBroker?(d.logger.verbose("Response was from native broker, storing in-memory"),d.nativeInternalStorage.hydrateCache(s,c)):d.browserStorage.hydrateCache(s,c)})()}preflightBrowserEnvironmentCheck(s,c=!1){if(this.logger.verbose("preflightBrowserEnvironmentCheck started"),(0,ot.$S)(this.isBrowserEnvironment),(0,ot.$V)(s,this.config.system.allowRedirectInIframe),(0,ot.ET)(),(0,ot.L7)(),(0,ot.eQ)(this.initialized),s===M.s_.Redirect&&this.config.cache.cacheLocation===M.Ix.MemoryStorage&&!this.config.cache.storeAuthStateInCookie)throw(0,yr.Z1)(ia.xC);(s===M.s_.Redirect||s===M.s_.Popup)&&this.preflightInteractiveRequest(!c)}preflightInteractiveRequest(s){this.logger.verbose("preflightInteractiveRequest called, validating app environment"),(0,ot.ET)(),s&&this.getBrowserStorage().setInteractionInProgress(!0)}acquireTokenNative(s,c,d){var f=this;return(0,_.Z)(function*(){if(f.logger.trace("acquireTokenNative called"),!f.nativeExtensionProvider)throw(0,ue.Z_)(de.V7);return new _r(f.config,f.browserStorage,f.browserCrypto,f.logger,f.eventHandler,f.navigationClient,c,f.performanceClient,f.nativeExtensionProvider,d||f.getNativeAccountId(s),f.nativeInternalStorage,s.correlationId).acquireToken(s)})()}canUseNative(s,c){if(this.logger.trace("canUseNative called"),!sn.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,s.authenticationScheme))return this.logger.trace("canUseNative: isNativeAvailable returned false, returning false"),!1;if(s.prompt)switch(s.prompt){case y.NJ.NONE:case y.NJ.CONSENT:case y.NJ.LOGIN:this.logger.trace("canUseNative: prompt is compatible with native flow");break;default:return this.logger.trace(`canUseNative: prompt = ${s.prompt} is not compatible with native flow, returning false`),!1}return!(!c&&!this.getNativeAccountId(s)&&(this.logger.trace("canUseNative: nativeAccountId is not available, returning false"),1))}getNativeAccountId(s){const c=s.account||this.browserStorage.getAccountInfoFilteredBy({loginHint:s.loginHint,sid:s.sid})||this.getActiveAccount();return c&&c.nativeAccountId||""}createPopupClient(s){return new Xl(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,s)}createRedirectClient(s){return new eu(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,s)}createSilentIframeClient(s){return new Ye(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,M.WN.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,s)}createSilentCacheClient(s){return new on(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,s)}createSilentRefreshClient(s){return new xi(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,s)}createSilentAuthCodeClient(s){return new Aa(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,M.WN.acquireTokenByCode,this.performanceClient,this.nativeExtensionProvider,s)}addEventCallback(s){return this.eventHandler.addEventCallback(s)}removeEventCallback(s){this.eventHandler.removeEventCallback(s)}addPerformanceCallback(s){return this.performanceClient.addPerformanceCallback(s)}removePerformanceCallback(s){return this.performanceClient.removePerformanceCallback(s)}enableAccountStorageEvents(){this.eventHandler.enableAccountStorageEvents()}disableAccountStorageEvents(){this.eventHandler.disableAccountStorageEvents()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(s){this.logger=s}initializeWrapperLibrary(s,c){this.browserStorage.setWrapperMetadata(s,c)}setNavigationClient(s){this.navigationClient=s}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}getBrowserStorage(){return this.browserStorage}isBrowserEnv(){return this.isBrowserEnvironment}getEventHandler(){return this.eventHandler}getRequestCorrelationId(s){return s?.correlationId?s.correlationId:this.isBrowserEnvironment?(0,Fn.nn)():y.gT.EMPTY_STRING}loginRedirect(s){var c=this;return(0,_.Z)(function*(){const d=c.getRequestCorrelationId(s);return c.logger.verbose("loginRedirect called",d),c.acquireTokenRedirect({correlationId:d,...s||M.yo})})()}loginPopup(s){const c=this.getRequestCorrelationId(s);return this.logger.verbose("loginPopup called",c),this.acquireTokenPopup({correlationId:c,...s||M.yo})}acquireTokenSilent(s){var c=this;return(0,_.Z)(function*(){const d=c.getRequestCorrelationId(s),f=c.performanceClient.startMeasurement(S.Ak.AcquireTokenSilent,d);f.add({cacheLookupPolicy:s.cacheLookupPolicy}),c.preflightBrowserEnvironmentCheck(M.s_.Silent),c.logger.verbose("acquireTokenSilent called",d);const g=s.account||c.getActiveAccount();if(!g)throw(0,ue.Z_)(de.wH);const I=JSON.stringify({clientId:c.config.auth.clientId,authority:s.authority||y.gT.EMPTY_STRING,scopes:s.scopes,homeAccountIdentifier:g.homeAccountId,claims:s.claims,authenticationScheme:s.authenticationScheme,resourceRequestMethod:s.resourceRequestMethod,resourceRequestUri:s.resourceRequestUri,shrClaims:s.shrClaims,sshKid:s.sshKid}),L=c.activeSilentTokenRequests.get(I);if(typeof L>"u"){c.logger.verbose("acquireTokenSilent called for the first time, storing active request",d);const k=Z(c.acquireTokenSilentAsync.bind(c),S.Ak.AcquireTokenSilentAsync,c.logger,c.performanceClient,d)({...s,correlationId:d},g).then(G=>(c.activeSilentTokenRequests.delete(I),f.add({accessTokenSize:G.accessToken.length,idTokenSize:G.idToken.length}),f.end({success:!0,fromCache:G.fromCache,isNativeBroker:G.fromNativeBroker,cacheLookupPolicy:s.cacheLookupPolicy,requestId:G.requestId}),G)).catch(G=>{throw c.activeSilentTokenRequests.delete(I),f.end({errorCode:G.errorCode,subErrorCode:G.subError,success:!1}),G});return c.activeSilentTokenRequests.set(I,k),k}return c.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",d),f.discard(),L})()}acquireTokenSilentAsync(s,c){var d=this;return(0,_.Z)(function*(){let f;if(d.performanceClient.addQueueMeasurement(S.Ak.AcquireTokenSilentAsync,s.correlationId),d.eventHandler.emitEvent(Te.t.ACQUIRE_TOKEN_START,M.s_.Silent,s),d.atsAsyncMeasurement=d.performanceClient.startMeasurement(S.Ak.AcquireTokenSilentAsync,s.correlationId),d.atsAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",d.trackPageVisibility),sn.isNativeAvailable(d.config,d.logger,d.nativeExtensionProvider,s.authenticationScheme)&&c.nativeAccountId){d.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform");const g={...s,account:c};f=d.acquireTokenNative(g,M.WN.acquireTokenSilent_silentFlow).catch(function(){var C=(0,_.Z)(function*(I){if(I instanceof In&&Rt(I))return d.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),d.nativeExtensionProvider=void 0,d.createSilentIframeClient(s.correlationId).acquireToken(s);throw I});return function(I){return C.apply(this,arguments)}}())}else{d.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow");const g=d.createSilentCacheClient(s.correlationId),C=yield Z(g.initializeSilentRequest.bind(g),S.Ak.InitializeSilentRequest,d.logger,d.performanceClient,s.correlationId)(s,c),I={...s,cacheLookupPolicy:s.cacheLookupPolicy||M.lu.Default};f=Z(d.acquireTokenFromCache.bind(d),S.Ak.AcquireTokenFromCache,d.logger,d.performanceClient,C.correlationId)(g,C,I).catch(L=>{if(I.cacheLookupPolicy===M.lu.AccessToken)throw L;return(0,ot.ET)(),d.eventHandler.emitEvent(Te.t.ACQUIRE_TOKEN_NETWORK_START,M.s_.Silent,C),Z(d.acquireTokenByRefreshToken.bind(d),S.Ak.AcquireTokenByRefreshToken,d.logger,d.performanceClient,C.correlationId)(C,I).catch(k=>{if((!(k instanceof Ce.n)||k.errorCode!==M.qx.INVALID_GRANT_ERROR||k instanceof J.Yo||I.cacheLookupPolicy===M.lu.AccessTokenAndRefreshToken||I.cacheLookupPolicy===M.lu.RefreshToken)&&I.cacheLookupPolicy!==M.lu.Skip)throw k;return d.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",s.correlationId),Z(d.acquireTokenBySilentIframe.bind(d),S.Ak.AcquireTokenBySilentIframe,d.logger,d.performanceClient,C.correlationId)(C)})})}return f.then(g=>(d.eventHandler.emitEvent(Te.t.ACQUIRE_TOKEN_SUCCESS,M.s_.Silent,g),d.atsAsyncMeasurement?.end({success:!0,fromCache:g.fromCache,isNativeBroker:g.fromNativeBroker,requestId:g.requestId}),g)).catch(g=>{throw d.eventHandler.emitEvent(Te.t.ACQUIRE_TOKEN_FAILURE,M.s_.Silent,null,g),d.atsAsyncMeasurement?.end({errorCode:g.errorCode,subErrorCode:g.subError,success:!1}),g}).finally(()=>{document.removeEventListener("visibilitychange",d.trackPageVisibility)})})()}}},690:(Ae,te,A)=>{A.d(te,{$5:()=>He,Au:()=>Q,Fv:()=>X,Mg:()=>ne,PP:()=>b,Xx:()=>ie,nn:()=>z,qz:()=>B});var _=A(861),m=A(293),R=A(979),O=A(593),F=A(377);const P="SHA-256",T=new Uint8Array([1,0,1]),N={name:"RSASSA-PKCS1-v1_5",hash:P,modulusLength:2048,publicExponent:T};function B(ae){if(!("crypto"in window))throw ae.error("BrowserCrypto: crypto interface is unavailable"),(0,m.Z_)(F.TR);ae.verbose("BrowserCrypto: modern crypto interface available")}function X(ae,K,$){return w.apply(this,arguments)}function w(){return(w=(0,_.Z)(function*(ae,K,$){K?.addQueueMeasurement(R.Ak.Sha256Digest,$);const oe=(new TextEncoder).encode(ae);return window.crypto.subtle.digest(P,oe)})).apply(this,arguments)}function b(ae){return window.crypto.getRandomValues(ae)}function z(){return window.crypto.randomUUID()}function Q(ae,K){return S.apply(this,arguments)}function S(){return(S=(0,_.Z)(function*(ae,K){return window.crypto.subtle.generateKey(N,ae,K)})).apply(this,arguments)}function ne(ae){return Z.apply(this,arguments)}function Z(){return(Z=(0,_.Z)(function*(ae){return window.crypto.subtle.exportKey(O.Mm,ae)})).apply(this,arguments)}function He(ae,K,$){return De.apply(this,arguments)}function De(){return(De=(0,_.Z)(function*(ae,K,$){return window.crypto.subtle.importKey(O.Mm,ae,N,K,$)})).apply(this,arguments)}function ie(ae,K){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,_.Z)(function*(ae,K){return window.crypto.subtle.sign(N,ae,K)})).apply(this,arguments)}},341:(Ae,te,A)=>{A.d(te,{Q:()=>ie});var _=A(861),m=A(979),R=A(481);const O="missing_kid_error",F="missing_alg_error",H={[O]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[F]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class P extends R.l4{constructor(K,$){super(K,$),this.name="JoseHeaderError",Object.setPrototypeOf(this,P.prototype)}}function y(ae){return new P(ae,H[ae])}var T=A(500);class N{constructor(K){this.typ=K.typ,this.alg=K.alg,this.kid=K.kid}static getShrHeaderString(K){if(!K.kid)throw y(O);if(!K.alg)throw y(F);const $=new N({typ:K.typ||T.L.Pop,kid:K.kid,alg:K.alg});return JSON.stringify($)}}var B=A(173),X=A(787),w=A(690),b=A(293),z=A(593),Q=A(377);class S{constructor(){this.dbName=z.H4,this.version=z.kd,this.tableName=z.Gv,this.dbOpen=!1}open(){var K=this;return(0,_.Z)(function*(){return new Promise(($,J)=>{const oe=window.indexedDB.open(K.dbName,K.version);oe.addEventListener("upgradeneeded",Ce=>{Ce.target.result.createObjectStore(K.tableName)}),oe.addEventListener("success",Ce=>{K.db=Ce.target.result,K.dbOpen=!0,$()}),oe.addEventListener("error",()=>J((0,b.Z_)(Q.Pi)))})})()}closeConnection(){const K=this.db;K&&this.dbOpen&&(K.close(),this.dbOpen=!1)}validateDbIsOpen(){var K=this;return(0,_.Z)(function*(){if(!K.dbOpen)return yield K.open()})()}getItem(K){var $=this;return(0,_.Z)(function*(){return yield $.validateDbIsOpen(),new Promise((J,oe)=>{if(!$.db)return oe((0,b.Z_)(Q.IL));const Pe=$.db.transaction([$.tableName],"readonly").objectStore($.tableName).get(K);Pe.addEventListener("success",Me=>{const ve=Me;$.closeConnection(),J(ve.target.result)}),Pe.addEventListener("error",Me=>{$.closeConnection(),oe(Me)})})})()}setItem(K,$){var J=this;return(0,_.Z)(function*(){return yield J.validateDbIsOpen(),new Promise((oe,Ce)=>{if(!J.db)return Ce((0,b.Z_)(Q.IL));const Me=J.db.transaction([J.tableName],"readwrite").objectStore(J.tableName).put($,K);Me.addEventListener("success",()=>{J.closeConnection(),oe()}),Me.addEventListener("error",ve=>{J.closeConnection(),Ce(ve)})})})()}removeItem(K){var $=this;return(0,_.Z)(function*(){return yield $.validateDbIsOpen(),new Promise((J,oe)=>{if(!$.db)return oe((0,b.Z_)(Q.IL));const Pe=$.db.transaction([$.tableName],"readwrite").objectStore($.tableName).delete(K);Pe.addEventListener("success",()=>{$.closeConnection(),J()}),Pe.addEventListener("error",Me=>{$.closeConnection(),oe(Me)})})})()}getKeys(){var K=this;return(0,_.Z)(function*(){return yield K.validateDbIsOpen(),new Promise(($,J)=>{if(!K.db)return J((0,b.Z_)(Q.IL));const pe=K.db.transaction([K.tableName],"readonly").objectStore(K.tableName).getAllKeys();pe.addEventListener("success",Pe=>{const Me=Pe;K.closeConnection(),$(Me.target.result)}),pe.addEventListener("error",Pe=>{K.closeConnection(),J(Pe)})})})()}containsKey(K){var $=this;return(0,_.Z)(function*(){return yield $.validateDbIsOpen(),new Promise((J,oe)=>{if(!$.db)return oe((0,b.Z_)(Q.IL));const Pe=$.db.transaction([$.tableName],"readonly").objectStore($.tableName).count(K);Pe.addEventListener("success",Me=>{const ve=Me;$.closeConnection(),J(1===ve.target.result)}),Pe.addEventListener("error",Me=>{$.closeConnection(),oe(Me)})})})()}deleteDatabase(){var K=this;return(0,_.Z)(function*(){return K.db&&K.dbOpen&&K.closeConnection(),new Promise(($,J)=>{const oe=window.indexedDB.deleteDatabase(z.H4);oe.addEventListener("success",()=>$(!0)),oe.addEventListener("blocked",()=>$(!0)),oe.addEventListener("error",()=>J(!1))})})()}}var ne=A(475);class Z{constructor(K,$){this.inMemoryCache=new ne.k,this.indexedDBCache=new S,this.logger=K,this.storeName=$}handleDatabaseAccessError(K){if(!(K instanceof b.Ut&&K.errorCode===Q.Pi))throw K;this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.")}getItem(K){var $=this;return(0,_.Z)(function*(){const J=$.inMemoryCache.getItem(K);if(!J)try{return $.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),yield $.indexedDBCache.getItem(K)}catch(oe){$.handleDatabaseAccessError(oe)}return J})()}setItem(K,$){var J=this;return(0,_.Z)(function*(){J.inMemoryCache.setItem(K,$);try{yield J.indexedDBCache.setItem(K,$)}catch(oe){J.handleDatabaseAccessError(oe)}})()}removeItem(K){var $=this;return(0,_.Z)(function*(){$.inMemoryCache.removeItem(K);try{yield $.indexedDBCache.removeItem(K)}catch(J){$.handleDatabaseAccessError(J)}})()}getKeys(){var K=this;return(0,_.Z)(function*(){const $=K.inMemoryCache.getKeys();if(0===$.length)try{return K.logger.verbose("In-memory cache is empty, now querying persistent storage."),yield K.indexedDBCache.getKeys()}catch(J){K.handleDatabaseAccessError(J)}return $})()}containsKey(K){var $=this;return(0,_.Z)(function*(){const J=$.inMemoryCache.containsKey(K);if(!J)try{return $.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),yield $.indexedDBCache.containsKey(K)}catch(oe){$.handleDatabaseAccessError(oe)}return J})()}clearInMemory(){this.logger.verbose(`Deleting in-memory keystore ${this.storeName}`),this.inMemoryCache.clear(),this.logger.verbose(`In-memory keystore ${this.storeName} deleted`)}clearPersistent(){var K=this;return(0,_.Z)(function*(){try{K.logger.verbose("Deleting persistent keystore");const $=yield K.indexedDBCache.deleteDatabase();return $&&K.logger.verbose("Persistent keystore deleted"),$}catch($){return K.handleDatabaseAccessError($),!1}})()}}class De{constructor(K){this.logger=K,this.asymmetricKeys=new Z(this.logger,"asymmetricKeys"),this.symmetricKeys=new Z(this.logger,"symmetricKeys")}clear(){var K=this;return(0,_.Z)(function*(){K.asymmetricKeys.clearInMemory(),K.symmetricKeys.clearInMemory();try{return yield K.asymmetricKeys.clearPersistent(),!0}catch($){return $ instanceof Error?K.logger.error(`Clearing keystore failed with error: ${$.message}`):K.logger.error("Clearing keystore failed with unknown error"),!1}})()}}let ie=(()=>{class ae{constructor($,J){this.logger=$,(0,w.qz)($),this.cache=new De(this.logger),this.performanceClient=J}createNewGuid(){return(0,w.nn)()}base64Encode($){return(0,B.h$)($)}base64Decode($){return(0,X.t)($)}getPublicKeyThumbprint($){var J=this;return(0,_.Z)(function*(){const oe=J.performanceClient?.startMeasurement(m.Ak.CryptoOptsGetPublicKeyThumbprint,$.correlationId),Ce=yield(0,w.Au)(ae.EXTRACTABLE,ae.POP_KEY_USAGES),pe=yield(0,w.Mg)(Ce.publicKey),Me=Ie({e:pe.e,kty:pe.kty,n:pe.n}),ve=yield J.hashString(Me),qe=yield(0,w.Mg)(Ce.privateKey),at=yield(0,w.$5)(qe,!1,["sign"]);return yield J.cache.asymmetricKeys.setItem(ve,{privateKey:at,publicKey:Ce.publicKey,requestMethod:$.resourceRequestMethod,requestUri:$.resourceRequestUri}),oe&&oe.end({success:!0}),ve})()}removeTokenBindingKey($){var J=this;return(0,_.Z)(function*(){return yield J.cache.asymmetricKeys.removeItem($),!(yield J.cache.asymmetricKeys.containsKey($))})()}clearKeystore(){var $=this;return(0,_.Z)(function*(){return yield $.cache.clear()})()}signJwt($,J,oe){var Ce=this;return(0,_.Z)(function*(){const pe=Ce.performanceClient?.startMeasurement(m.Ak.CryptoOptsSignJwt,oe),Pe=yield Ce.cache.asymmetricKeys.getItem(J);if(!Pe)throw(0,b.Z_)(Q.XM);const Me=yield(0,w.Mg)(Pe.publicKey),ve=Ie(Me),qe=(0,B._j)(JSON.stringify({kid:J})),at=N.getShrHeaderString({kid:qe,alg:Me.alg}),_t=(0,B._j)(at);$.cnf={jwk:JSON.parse(ve)};const Qe=`${_t}.${(0,B._j)(JSON.stringify($))}`,mt=(new TextEncoder).encode(Qe),Le=yield(0,w.Xx)(Pe.privateKey,mt),ue=`${Qe}.${(0,B.Wy)(new Uint8Array(Le))}`;return pe&&pe.end({success:!0}),ue})()}hashString($){return(0,_.Z)(function*(){const J=yield(0,w.Fv)($),oe=new Uint8Array(J);return(0,B.Wy)(oe)})()}}return ae.POP_KEY_USAGES=["sign","verify"],ae.EXTRACTABLE=!0,ae})();function Ie(ae){return JSON.stringify(ae,Object.keys(ae).sort())}},787:(Ae,te,A)=>{A.d(te,{t:()=>R});var _=A(293),m=A(377);function R(F){return(new TextDecoder).decode(function O(F){let H=F.replace(/-/g,"+").replace(/_/g,"/");switch(H.length%4){case 0:break;case 2:H+="==";break;case 3:H+="=";break;default:throw(0,_.Z_)(m.lZ)}const P=atob(H);return Uint8Array.from(P,y=>y.codePointAt(0)||0)}(F))}},173:(Ae,te,A)=>{function _(F){return encodeURIComponent(R(F).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function m(F){return O(F).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function R(F){return O((new TextEncoder).encode(F))}function O(F){const H=Array.from(F,P=>String.fromCodePoint(P)).join("");return btoa(H)}A.d(te,{Wy:()=>m,_j:()=>_,h$:()=>R})},293:(Ae,te,A)=>{A.d(te,{Ut:()=>H,Z_:()=>P});var _=A(481),m=A(377);const R="For more visit: aka.ms/msaljs/browser-errors",O={[m.vD]:"The PKCE code challenge and verifier could not be generated.",[m.TR]:"The crypto object or function is not available.",[m._c]:"Navigation URI is empty. Please check stack trace for more info.",[m.nF]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${R}`,[m.Xk]:"Hash does not contain state. Please verify that the request originated from msal.",[m.S_]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${R}`,[m.$P]:"Unable to parse state. Please verify that the request originated from msal.",[m.yK]:"Hash contains state but the interaction type does not match the caller.",[m.Ck]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${R}`,[m.E]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[m.H]:"window.open returned null or undefined window object.",[m.h7]:"User cancelled the flow.",[m.ZT]:`Token acquisition in popup failed due to timeout.  ${R}`,[m.JA]:`Token acquisition in iframe failed due to timeout.  ${R}`,[m.b_]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[m.xO]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${R}`,[m.bj]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[m.h8]:"The iframe being monitored was closed prematurely.",[m.I9]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[m.wH]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[m.WQ]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[m.QO]:"No token request found in cache.",[m.e$]:"The cached token request could not be parsed.",[m.dT]:"No cached authority found.",[m.BO]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[m.Ut]:"Invalid cache type",[m.Dx]:"Login and token requests are not supported in non-browser environments.",[m.IL]:"Database is not open!",[m.Mq]:"No network connectivity. Check your internet connection.",[m.Dc]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[m.C8]:"Network request failed. Please check the network trace to determine root cause.",[m.w6]:"Failed to parse network response. Check network trace.",[m.Jd]:"Error loading token to cache.",[m.XM]:"Cryptographic Key or Keypair not found in browser storage.",[m.Aj]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[m.Dy]:"An authorization code or nativeAccountId must be provided to this flow.",[m.LL]:"Request cannot contain both spa code and native account id.",[m.Pi]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[m.KA]:`Unable to acquire token from native platform.  ${R}`,[m.hR]:"Timed out while attempting to establish connection to browser extension",[m.Wb]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[m.V7]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${R}`,[m.al]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${R}`,[m.o9]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[m.lZ]:"Invalid base64 encoded string."};class H extends _.l4{constructor(T){super(T,O[T]),Object.setPrototypeOf(this,H.prototype),this.name="BrowserAuthError"}}function P(y){return new H(y)}},377:(Ae,te,A)=>{A.d(te,{$P:()=>P,Aj:()=>at,BO:()=>K,C8:()=>Pe,Ck:()=>T,Dc:()=>pe,Dx:()=>J,Dy:()=>_t,E:()=>N,H:()=>B,I9:()=>Z,IL:()=>oe,JA:()=>b,Jd:()=>ve,KA:()=>Gt,LL:()=>rn,Mq:()=>Ce,Pi:()=>Qe,QO:()=>ie,S_:()=>H,TR:()=>m,Ut:()=>$,V7:()=>Ve,WQ:()=>De,Wb:()=>Le,XM:()=>qe,Xk:()=>F,ZT:()=>w,_c:()=>R,al:()=>ue,b_:()=>z,bj:()=>S,dT:()=>ae,e$:()=>Ie,h7:()=>X,h8:()=>ne,hR:()=>mt,lZ:()=>yr,nF:()=>O,o9:()=>M,vD:()=>_,w6:()=>Me,wH:()=>He,xO:()=>Q,yK:()=>y});const _="pkce_not_created",m="crypto_nonexistent",R="empty_navigate_uri",O="hash_empty_error",F="no_state_in_hash",H="hash_does_not_contain_known_properties",P="unable_to_parse_state",y="state_interaction_type_mismatch",T="interaction_in_progress",N="popup_window_error",B="empty_window_error",X="user_cancelled",w="monitor_popup_timeout",b="monitor_window_timeout",z="redirect_in_iframe",Q="block_iframe_reload",S="block_nested_popups",ne="iframe_closed_prematurely",Z="silent_logout_unsupported",He="no_account_error",De="silent_prompt_value_error",ie="no_token_request_cache_error",Ie="unable_to_parse_token_request_cache_error",ae="no_cached_authority_error",K="auth_request_not_set_error",$="invalid_cache_type",J="non_browser_environment",oe="database_not_open",Ce="no_network_connectivity",pe="post_request_failed",Pe="get_request_failed",Me="failed_to_parse_response",ve="unable_to_load_token",qe="crypto_key_not_found",at="auth_code_required",_t="auth_code_or_nativeAccountId_required",rn="spa_code_and_nativeAccountId_present",Qe="database_unavailable",Gt="unable_to_acquire_token_from_native_platform",mt="native_handshake_timeout",Le="native_extension_not_installed",Ve="native_connection_not_established",ue="uninitialized_public_client_application",M="native_prompt_not_supported",yr="invalid_base64_string"},325:(Ae,te,A)=>{A.d(te,{WK:()=>F,Z1:()=>H});var _=A(481),m=A(94);const R={[m.m4]:"Given storage configuration option was not supported.",[m.hJ]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[m.xC]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};class F extends _.l4{constructor(y,T){super(y,T),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,F.prototype)}}function H(P){return new F(P,R[P])}},94:(Ae,te,A)=>{A.d(te,{hJ:()=>m,m4:()=>_,xC:()=>R});const _="storage_not_supported",m="stubbed_public_client_application_called",R="in_mem_redirect_unavailable"},76:(Ae,te,A)=>{A.d(te,{b:()=>F});var _=A(603),m=A(723),R=A(97),O=A(690);class F{constructor(P,y){this.eventCallbacks=new Map,this.logger=P,this.browserCrypto=y,this.listeningToStorageEvents=!1,this.handleAccountCacheChange=this.handleAccountCacheChange.bind(this)}addEventCallback(P){if(typeof window<"u"){const y=(0,O.nn)();return this.eventCallbacks.set(y,P),this.logger.verbose(`Event callback registered with id: ${y}`),y}return null}removeEventCallback(P){this.eventCallbacks.delete(P),this.logger.verbose(`Event callback ${P} removed.`)}enableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?this.logger.verbose("Account storage listener already registered."):(this.logger.verbose("Adding account storage listener."),this.listeningToStorageEvents=!0,window.addEventListener("storage",this.handleAccountCacheChange)))}disableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?(this.logger.verbose("Removing account storage listener."),window.removeEventListener("storage",this.handleAccountCacheChange),this.listeningToStorageEvents=!1):this.logger.verbose("No account storage listener registered."))}emitEvent(P,y,T,N){if(typeof window<"u"){const B={eventType:P,interactionType:y||null,payload:T||null,error:N||null,timestamp:Date.now()};this.logger.info(`Emitting event: ${P}`),this.eventCallbacks.forEach((X,w)=>{this.logger.verbose(`Emitting event to callback ${w}: ${P}`),X.apply(null,[B])})}}handleAccountCacheChange(P){try{const y=P.newValue||P.oldValue;if(!y)return;const T=JSON.parse(y);if("object"!=typeof T||!_.r.isAccountEntity(T))return;const B=m.L.toObject(new _.r,T).getAccountInfo();!P.oldValue&&P.newValue?(this.logger.info("Account was added to cache in a different window"),this.emitEvent(R.t.ACCOUNT_ADDED,void 0,B)):!P.newValue&&P.oldValue&&(this.logger.info("Account was removed from cache in a different window"),this.emitEvent(R.t.ACCOUNT_REMOVED,void 0,B))}catch{return}}}},97:(Ae,te,A)=>{A.d(te,{t:()=>_});const _={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache"}},580:(Ae,te,A)=>{A.d(te,{i:()=>m,u:()=>_});const _="@azure/msal-browser",m="3.3.0"},593:(Ae,te,A)=>{A.d(te,{$H:()=>X,BD:()=>R,Bs:()=>T,EC:()=>H,Gv:()=>ne,H4:()=>Q,Ix:()=>F,Ky:()=>O,Mm:()=>b,Oq:()=>y,WN:()=>N,c4:()=>P,kd:()=>S,lA:()=>z,lu:()=>Z,qx:()=>m,s_:()=>B,yo:()=>w});var _=A(500);const m={INTERACTION_IN_PROGRESS_VALUE:"interaction_in_progress",INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},R={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS"},O={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},F={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},H={GET:"GET",POST:"POST"},P={AUTHORITY:"authority",ACQUIRE_TOKEN_ACCOUNT:"acquireToken.account",SESSION_STATE:"session.state",REQUEST_STATE:"request.state",NONCE_IDTOKEN:"nonce.id_token",ORIGIN_URI:"request.origin",RENEW_STATUS:"token.renew.status",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",SCOPES:"scopes",INTERACTION_STATUS_KEY:"interaction.status",CCS_CREDENTIAL:"ccs.credential",CORRELATION_ID:"request.correlationId",NATIVE_REQUEST:"request.native",REDIRECT_CONTEXT:"request.redirect.context"},y={ACCOUNT_KEYS:"msal.account.keys",TOKEN_KEYS:"msal.token.keys"},T={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},N={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962};var B=function(He){return He.Redirect="redirect",He.Popup="popup",He.Silent="silent",He.None="none",He}(B||{});const X={Startup:"startup",Login:"login",Logout:"logout",AcquireToken:"acquireToken",SsoSilent:"ssoSilent",HandleRedirect:"handleRedirect",None:"none"},w={scopes:_.f_},b="jwk",z={React:"@azure/msal-react",Angular:"@azure/msal-angular"},Q="msal.db",S=1,ne=`${Q}.keys`,Z={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5}},484:(Ae,te,A)=>{A.d(te,{$P:()=>Q,$S:()=>b,$V:()=>X,ET:()=>B,L7:()=>w,Re:()=>T,eQ:()=>z,fl:()=>N,hH:()=>F,tT:()=>H,zd:()=>P});var _=A(581),m=A(293),R=A(593),O=A(377);function F(S){S.location.hash="","function"==typeof S.history.replaceState&&S.history.replaceState(null,"",`${S.location.origin}${S.location.pathname}${S.location.search}`)}function H(S){const ne=S.split("#");ne.shift(),window.location.hash=ne.length>0?ne.join("#"):""}function P(){return window.parent!==window}function T(){return window.location.href.split("?")[0].split("#")[0]}function N(){const ne=new _.G(window.location.href).getUrlComponents();return`${ne.Protocol}//${ne.HostNameAndPort}/`}function B(){if(_.G.hashContainsKnownProperties(window.location.hash)&&P())throw(0,m.Z_)(O.xO)}function X(S,ne){const Z=P();if(S===R.s_.Redirect&&Z&&!ne)throw(0,m.Z_)(O.b_)}function w(){if(function y(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&"string"==typeof window.name&&0===window.name.indexOf(`${R.qx.POPUP_NAME_PREFIX}.`)}())throw(0,m.Z_)(O.bj)}function b(S){if(!S)throw(0,m.Z_)(O.Dx)}function z(S){if(!S)throw(0,m.Z_)(O.al)}function Q(S){const ne=document.createElement("link");ne.rel="preconnect",ne.href=new URL(S).origin,ne.crossOrigin="anonymous",document.head.appendChild(ne),window.setTimeout(()=>{try{document.head.removeChild(ne)}catch{}},1e4)}},82:(Ae,te,A)=>{A.d(te,{Z_:()=>R,ky:()=>F});var _=A(140),m=A(841);function R(H,P){const y=function O(H){if(!H)throw(0,_.zP)(m.PM);const y=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(H);if(!y||y.length<4)throw(0,_.zP)(m.GH);return y[2]}(H);try{const T=P(y);return JSON.parse(T)}catch{throw(0,_.zP)(m.GH)}}function F(H,P){if(0===P||Date.now()-3e5>H+P)throw(0,_.zP)(m.Ao)}},758:(Ae,te,A)=>{A.d(te,{B:()=>O,j:()=>F});var _=A(140),m=A(500),R=A(841);function O(H,P){if(!H)throw(0,_.zP)(R.S7);try{const y=P.base64Decode(H);return JSON.parse(y)}catch{throw(0,_.zP)(R.ZE)}}function F(H){if(!H)throw(0,_.zP)(R.ZE);const P=H.split(m.Bv.CLIENT_INFO_SEPARATOR,2);return{uid:P[0],utid:P.length<2?m.gT.EMPTY_STRING:P[1]}}},322:(Ae,te,A)=>{A.d(te,{Qh:()=>R,UD:()=>H,eM:()=>y,ix:()=>T,tJ:()=>P,wn:()=>F});var _=A(581);const R={"https://login.microsoftonline.com/common/":{token_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.com/common/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.com/common/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.com",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pas.windows.net"},"https://login.chinacloudapi.cn/common/":{token_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.chinacloudapi.cn/common/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://microsoftgraph.chinacloudapi.cn/oidc/userinfo",authorization_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.chinacloudapi.cn/common/kerberos",tenant_region_scope:null,cloud_instance_name:"partner.microsoftonline.cn",cloud_graph_host_name:"graph.chinacloudapi.cn",msgraph_host:"microsoftgraph.chinacloudapi.cn",rbac_url:"https://pas.chinacloudapi.cn"},"https://login.microsoftonline.us/common/":{token_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.us/common/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.us/common/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.us",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pasff.usgovcloudapi.net"},"https://login.microsoftonline.com/consumers/":{token_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.com/consumers/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.com/9188040d-6c67-4c5b-b112-36a304b66dad/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.com/consumers/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.com",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pas.windows.net"},"https://login.chinacloudapi.cn/consumers/":{token_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.chinacloudapi.cn/consumers/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.partner.microsoftonline.cn/9188040d-6c67-4c5b-b112-36a304b66dad/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://microsoftgraph.chinacloudapi.cn/oidc/userinfo",authorization_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.chinacloudapi.cn/consumers/kerberos",tenant_region_scope:null,cloud_instance_name:"partner.microsoftonline.cn",cloud_graph_host_name:"graph.chinacloudapi.cn",msgraph_host:"microsoftgraph.chinacloudapi.cn",rbac_url:"https://pas.chinacloudapi.cn"},"https://login.microsoftonline.us/consumers/":{token_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.us/consumers/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.us/9188040d-6c67-4c5b-b112-36a304b66dad/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.us/consumers/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.us",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pasff.usgovcloudapi.net"},"https://login.microsoftonline.com/organizations/":{token_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.com/organizations/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.com/organizations/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.com",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pas.windows.net"},"https://login.chinacloudapi.cn/organizations/":{token_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.chinacloudapi.cn/organizations/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://microsoftgraph.chinacloudapi.cn/oidc/userinfo",authorization_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.chinacloudapi.cn/organizations/kerberos",tenant_region_scope:null,cloud_instance_name:"partner.microsoftonline.cn",cloud_graph_host_name:"graph.chinacloudapi.cn",msgraph_host:"microsoftgraph.chinacloudapi.cn",rbac_url:"https://pas.chinacloudapi.cn"},"https://login.microsoftonline.us/organizations/":{token_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.us/organizations/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.us/organizations/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.us",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pasff.usgovcloudapi.net"}},O={"https://login.microsoftonline.com/common/":{tenant_discovery_endpoint:"https://login.microsoftonline.com/common/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.chinacloudapi.cn/common/":{tenant_discovery_endpoint:"https://login.chinacloudapi.cn/common/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.us/common/":{tenant_discovery_endpoint:"https://login.microsoftonline.us/common/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.com/consumers/":{tenant_discovery_endpoint:"https://login.microsoftonline.com/consumers/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.chinacloudapi.cn/consumers/":{tenant_discovery_endpoint:"https://login.chinacloudapi.cn/consumers/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.us/consumers/":{tenant_discovery_endpoint:"https://login.microsoftonline.us/consumers/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.com/organizations/":{tenant_discovery_endpoint:"https://login.microsoftonline.com/organizations/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.chinacloudapi.cn/organizations/":{tenant_discovery_endpoint:"https://login.chinacloudapi.cn/organizations/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.us/organizations/":{tenant_discovery_endpoint:"https://login.microsoftonline.us/organizations/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},F=new Set;for(const N in O)for(const B of O[N].metadata)for(const X of B.aliases)F.add(X);function H(N){if(N){const B=T(N);if(B)return B.aliases}return null}function P(N,B){if(N&&B){const w=y(B,new _.G(N).getUrlComponents().HostNameAndPort);if(w)return w.aliases}return null}function y(N,B){for(let X=0;X<N.length;X++){const w=N[X];if(w.aliases.includes(B))return w}return null}function T(N){const B=new _.G(N).getUrlComponents();return N in O?y(O[N].metadata,B.HostNameAndPort):null}},286:(Ae,te,A)=>{A.d(te,{z:()=>_});const _={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"}},63:(Ae,te,A)=>{A.d(te,{a:()=>_});const _={Default:0,Adfs:1,Dsts:2,Ciam:3}},132:(Ae,te,A)=>{A.d(te,{A:()=>_});const _={AAD:"AAD",OIDC:"OIDC"}},723:(Ae,te,A)=>{A.d(te,{L:()=>N,w:()=>B});var _=A(861),m=A(500),R=A(795),O=A(603),F=A(140),H=A(82),P=A(667),y=A(322),T=A(841);class N{constructor(w,b,z,Q){this.clientId=w,this.cryptoImpl=b,this.commonLogger=z.clone(P.u,P.i),this.staticAuthorityOptions=Q}getAllAccounts(w){const b=[];return this.getAccountsFilteredBy(w||{}).forEach(z=>{const Q=this.getAccountInfoFromEntity(z,w);Q&&b.push(Q)}),b}getAccountInfoFilteredBy(w){const b=this.getAllAccounts(w);return b.length>0?b[0]:null}getBaseAccountInfo(w){const b=this.getAccountsFilteredBy(w);return b.length>0?b[0].getAccountInfo():null}getAccountInfoFromEntity(w,b){const z=w.getAccountInfo(),Q=this.getIdToken(z);if(Q){const S=(0,H.Z_)(Q.secret,this.cryptoImpl.base64Decode);if(this.idTokenClaimsMatchAccountFilter(S,b))return z.idToken=Q.secret,z.idTokenClaims=S,z}return null}idTokenClaimsMatchAccountFilter(w,b){return!(b&&(b.loginHint&&!this.matchLoginHint(w,b.loginHint)||b.sid&&!this.matchSid(w,b.sid)))}saveCacheRecord(w,b){var z=this;return(0,_.Z)(function*(){if(!w)throw(0,F.zP)(T.mj);w.account&&z.setAccount(w.account),w.idToken&&!1!==b?.idToken&&z.setIdTokenCredential(w.idToken),w.accessToken&&!1!==b?.accessToken&&(yield z.saveAccessToken(w.accessToken)),w.refreshToken&&!1!==b?.refreshToken&&z.setRefreshTokenCredential(w.refreshToken),w.appMetadata&&z.setAppMetadata(w.appMetadata)})()}saveAccessToken(w){var b=this;return(0,_.Z)(function*(){const z={clientId:w.clientId,credentialType:w.credentialType,environment:w.environment,homeAccountId:w.homeAccountId,realm:w.realm,tokenType:w.tokenType,requestedClaimsHash:w.requestedClaimsHash},Q=b.getTokenKeys(),S=R.i.fromString(w.target),ne=[];Q.accessToken.forEach(Z=>{if(!b.accessTokenKeyMatchesFilter(Z,z,!1))return;const He=b.getAccessTokenCredential(Z);He&&b.credentialMatchesFilter(He,z)&&R.i.fromString(He.target).intersectingScopeSets(S)&&ne.push(b.removeAccessToken(Z))}),yield Promise.all(ne),b.setAccessTokenCredential(w)})()}getAccountsFilteredBy(w){const b=this.getAccountKeys(),z=[];return b.forEach(Q=>{if(!this.isAccountKey(Q,w.homeAccountId,w.tenantId))return;const S=this.getAccount(Q);S&&(w.homeAccountId&&!this.matchHomeAccountId(S,w.homeAccountId)||w.localAccountId&&!this.matchLocalAccountId(S,w.localAccountId)||w.username&&!this.matchUsername(S,w.username)||w.environment&&!this.matchEnvironment(S,w.environment)||w.realm&&!this.matchRealm(S,w.realm)||w.tenantId&&!this.matchRealm(S,w.tenantId)||w.nativeAccountId&&!this.matchNativeAccountId(S,w.nativeAccountId)||w.authorityType&&!this.matchAuthorityType(S,w.authorityType)||w.name&&!this.matchName(S,w.name)||z.push(S))}),z}isAccountKey(w,b,z){return!(w.split(m.Bv.CACHE_KEY_SEPARATOR).length<3||b&&!w.toLowerCase().includes(b.toLowerCase())||z&&!w.toLowerCase().includes(z.toLowerCase()))}isCredentialKey(w){if(w.split(m.Bv.CACHE_KEY_SEPARATOR).length<6)return!1;const b=w.toLowerCase();if(-1===b.indexOf(m.d3.ID_TOKEN.toLowerCase())&&-1===b.indexOf(m.d3.ACCESS_TOKEN.toLowerCase())&&-1===b.indexOf(m.d3.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())&&-1===b.indexOf(m.d3.REFRESH_TOKEN.toLowerCase()))return!1;if(b.indexOf(m.d3.REFRESH_TOKEN.toLowerCase())>-1){const Q=`${m.d3.REFRESH_TOKEN}${m.Bv.CACHE_KEY_SEPARATOR}${m.ch}${m.Bv.CACHE_KEY_SEPARATOR}`;if(-1===b.indexOf(`${m.d3.REFRESH_TOKEN}${m.Bv.CACHE_KEY_SEPARATOR}${this.clientId}${m.Bv.CACHE_KEY_SEPARATOR}`.toLowerCase())&&-1===b.indexOf(Q.toLowerCase()))return!1}else if(-1===b.indexOf(this.clientId.toLowerCase()))return!1;return!0}credentialMatchesFilter(w,b){return!(b.clientId&&!this.matchClientId(w,b.clientId)||b.userAssertionHash&&!this.matchUserAssertionHash(w,b.userAssertionHash)||"string"==typeof b.homeAccountId&&!this.matchHomeAccountId(w,b.homeAccountId)||b.environment&&!this.matchEnvironment(w,b.environment)||b.realm&&!this.matchRealm(w,b.realm)||b.credentialType&&!this.matchCredentialType(w,b.credentialType)||b.familyId&&!this.matchFamilyId(w,b.familyId)||b.target&&!this.matchTarget(w,b.target)||(b.requestedClaimsHash||w.requestedClaimsHash)&&w.requestedClaimsHash!==b.requestedClaimsHash||w.credentialType===m.d3.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(b.tokenType&&!this.matchTokenType(w,b.tokenType)||b.tokenType===m.hO.SSH&&b.keyId&&!this.matchKeyId(w,b.keyId)))}getAppMetadataFilteredBy(w){return this.getAppMetadataFilteredByInternal(w.environment,w.clientId)}getAppMetadataFilteredByInternal(w,b){const z=this.getKeys(),Q={};return z.forEach(S=>{if(!this.isAppMetadata(S))return;const ne=this.getAppMetadata(S);ne&&(w&&!this.matchEnvironment(ne,w)||b&&!this.matchClientId(ne,b)||(Q[S]=ne))}),Q}getAuthorityMetadataByAlias(w){const b=this.getAuthorityMetadataKeys();let z=null;return b.forEach(Q=>{if(!this.isAuthorityMetadata(Q)||-1===Q.indexOf(this.clientId))return;const S=this.getAuthorityMetadata(Q);S&&-1!==S.aliases.indexOf(w)&&(z=S)}),z}removeAllAccounts(){var w=this;return(0,_.Z)(function*(){const b=w.getAccountKeys(),z=[];b.forEach(Q=>{z.push(w.removeAccount(Q))}),yield Promise.all(z)})()}removeAccount(w){var b=this;return(0,_.Z)(function*(){const z=b.getAccount(w);z&&(yield b.removeAccountContext(z),b.removeItem(w))})()}removeAccountContext(w){var b=this;return(0,_.Z)(function*(){const z=b.getTokenKeys(),Q=w.generateAccountId(),S=[];z.idToken.forEach(ne=>{0===ne.indexOf(Q)&&b.removeIdToken(ne)}),z.accessToken.forEach(ne=>{0===ne.indexOf(Q)&&S.push(b.removeAccessToken(ne))}),z.refreshToken.forEach(ne=>{0===ne.indexOf(Q)&&b.removeRefreshToken(ne)}),yield Promise.all(S)})()}removeAccessToken(w){var b=this;return(0,_.Z)(function*(){const z=b.getAccessTokenCredential(w);if(z){if(z.credentialType.toLowerCase()===m.d3.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&z.tokenType===m.hO.POP){const S=z.keyId;if(S)try{yield b.cryptoImpl.removeTokenBindingKey(S)}catch{throw(0,F.zP)(T.ol)}}return b.removeItem(w)}})()}removeAppMetadata(){return this.getKeys().forEach(b=>{this.isAppMetadata(b)&&this.removeItem(b)}),!0}readCacheRecord(w,b,z){const Q=this.getTokenKeys(),S=this.readAccountFromCache(w),ne=this.getIdToken(w,Q),Z=this.getAccessToken(w,b,Q),He=this.getRefreshToken(w,!1,Q),De=this.readAppMetadataFromCache(z);return S&&ne&&(S.idTokenClaims=(0,H.Z_)(ne.secret,this.cryptoImpl.base64Decode)),{account:S,idToken:ne,accessToken:Z,refreshToken:He,appMetadata:De}}readAccountFromCache(w){const b=O.r.generateAccountCacheKey(w);return this.getAccount(b)}getIdToken(w,b){this.commonLogger.trace("CacheManager - getIdToken called");const Q=this.getIdTokensByFilter({homeAccountId:w.homeAccountId,environment:w.environment,credentialType:m.d3.ID_TOKEN,clientId:this.clientId,realm:w.tenantId},b),S=Q.length;return S<1?(this.commonLogger.info("CacheManager:getIdToken - No token found"),null):S>1?(this.commonLogger.info("CacheManager:getIdToken - Multiple id tokens found, clearing them"),Q.forEach(ne=>{this.removeIdToken(ne.generateCredentialKey())}),null):(this.commonLogger.info("CacheManager:getIdToken - Returning id token"),Q[0])}getIdTokensByFilter(w,b){const z=b&&b.idToken||this.getTokenKeys().idToken,Q=[];return z.forEach(S=>{if(!this.idTokenKeyMatchesFilter(S,{clientId:this.clientId,...w}))return;const ne=this.getIdTokenCredential(S);ne&&this.credentialMatchesFilter(ne,w)&&Q.push(ne)}),Q}idTokenKeyMatchesFilter(w,b){const z=w.toLowerCase();return!(b.clientId&&-1===z.indexOf(b.clientId.toLowerCase())||b.homeAccountId&&-1===z.indexOf(b.homeAccountId.toLowerCase()))}removeIdToken(w){this.removeItem(w)}removeRefreshToken(w){this.removeItem(w)}getAccessToken(w,b,z){this.commonLogger.trace("CacheManager - getAccessToken called");const Q=R.i.createSearchScopes(b.scopes),S=b.authenticationScheme||m.hO.BEARER,ne=S&&S.toLowerCase()!==m.hO.BEARER.toLowerCase()?m.d3.ACCESS_TOKEN_WITH_AUTH_SCHEME:m.d3.ACCESS_TOKEN,Z={homeAccountId:w.homeAccountId,environment:w.environment,credentialType:ne,clientId:this.clientId,realm:w.tenantId,target:Q,tokenType:S,keyId:b.sshKid,requestedClaimsHash:b.requestedClaimsHash},He=z&&z.accessToken||this.getTokenKeys().accessToken,De=[];He.forEach(Ie=>{if(this.accessTokenKeyMatchesFilter(Ie,Z,!0)){const ae=this.getAccessTokenCredential(Ie);ae&&this.credentialMatchesFilter(ae,Z)&&De.push(ae)}});const ie=De.length;return ie<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):ie>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),De.forEach(Ie=>{this.removeAccessToken(Ie.generateCredentialKey())}),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),De[0])}accessTokenKeyMatchesFilter(w,b,z){const Q=w.toLowerCase();if(b.clientId&&-1===Q.indexOf(b.clientId.toLowerCase())||b.homeAccountId&&-1===Q.indexOf(b.homeAccountId.toLowerCase())||b.realm&&-1===Q.indexOf(b.realm.toLowerCase())||b.requestedClaimsHash&&-1===Q.indexOf(b.requestedClaimsHash.toLowerCase()))return!1;if(b.target){const S=b.target.asArray();for(let ne=0;ne<S.length;ne++){if(z&&!Q.includes(S[ne].toLowerCase()))return!1;if(!z&&Q.includes(S[ne].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(w){const b=this.getTokenKeys(),z=[];return b.accessToken.forEach(Q=>{if(!this.accessTokenKeyMatchesFilter(Q,w,!0))return;const S=this.getAccessTokenCredential(Q);S&&this.credentialMatchesFilter(S,w)&&z.push(S)}),z}getRefreshToken(w,b,z){this.commonLogger.trace("CacheManager - getRefreshToken called");const S={homeAccountId:w.homeAccountId,environment:w.environment,credentialType:m.d3.REFRESH_TOKEN,clientId:this.clientId,familyId:b?m.ch:void 0},ne=z&&z.refreshToken||this.getTokenKeys().refreshToken,Z=[];return ne.forEach(De=>{if(this.refreshTokenKeyMatchesFilter(De,S)){const ie=this.getRefreshTokenCredential(De);ie&&this.credentialMatchesFilter(ie,S)&&Z.push(ie)}}),Z.length<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),Z[0])}refreshTokenKeyMatchesFilter(w,b){const z=w.toLowerCase();return!(b.familyId&&-1===z.indexOf(b.familyId.toLowerCase())||!b.familyId&&b.clientId&&-1===z.indexOf(b.clientId.toLowerCase())||b.homeAccountId&&-1===z.indexOf(b.homeAccountId.toLowerCase()))}readAppMetadataFromCache(w){const z=this.getAppMetadataFilteredBy({environment:w,clientId:this.clientId}),Q=Object.keys(z).map(ne=>z[ne]),S=Q.length;if(S<1)return null;if(S>1)throw(0,F.zP)(T.EC);return Q[0]}isAppMetadataFOCI(w){const b=this.readAppMetadataFromCache(w);return!(!b||b.familyId!==m.ch)}matchHomeAccountId(w,b){return"string"==typeof w.homeAccountId&&b===w.homeAccountId}matchLocalAccountId(w,b){return"string"==typeof w.localAccountId&&b===w.localAccountId}matchUsername(w,b){return"string"==typeof w.username&&b.toLowerCase()===w.username.toLowerCase()}matchName(w,b){return b.toLowerCase()===w.name?.toLowerCase()}matchUserAssertionHash(w,b){return!(!w.userAssertionHash||b!==w.userAssertionHash)}matchEnvironment(w,b){if(this.staticAuthorityOptions){const Q=(0,y.tJ)(this.staticAuthorityOptions.canonicalAuthority,this.staticAuthorityOptions.cloudDiscoveryMetadata)||(0,y.UD)(this.staticAuthorityOptions.canonicalAuthority)||this.staticAuthorityOptions.knownAuthorities;if(Q&&Q.includes(b)&&Q.includes(w.environment))return!0}const z=this.getAuthorityMetadataByAlias(b);return!!(z&&z.aliases.indexOf(w.environment)>-1)}matchCredentialType(w,b){return w.credentialType&&b.toLowerCase()===w.credentialType.toLowerCase()}matchClientId(w,b){return!(!w.clientId||b!==w.clientId)}matchFamilyId(w,b){return!(!w.familyId||b!==w.familyId)}matchRealm(w,b){return!(!w.realm||b!==w.realm)}matchNativeAccountId(w,b){return!(!w.nativeAccountId||b!==w.nativeAccountId)}matchLoginHint(w,b){return w?.login_hint===b||w.preferred_username===b||w?.upn===b}matchSid(w,b){return!(!w?.sid||w.sid!==b)}matchAuthorityType(w,b){return!(!w.authorityType||b.toLowerCase()!==w.authorityType.toLowerCase())}matchTarget(w,b){return!(w.credentialType!==m.d3.ACCESS_TOKEN&&w.credentialType!==m.d3.ACCESS_TOKEN_WITH_AUTH_SCHEME||!w.target)&&R.i.fromString(w.target).containsScopeSet(b)}matchTokenType(w,b){return!(!w.tokenType||w.tokenType!==b)}matchKeyId(w,b){return!(!w.keyId||w.keyId!==b)}isAppMetadata(w){return-1!==w.indexOf(m.dg)}isAuthorityMetadata(w){return-1!==w.indexOf(m.QU.CACHE_KEY)}generateAuthorityMetadataCacheKey(w){return`${m.QU.CACHE_KEY}-${this.clientId}-${w}`}static toObject(w,b){for(const z in b)w[z]=b[z];return w}}class B extends N{setAccount(){throw(0,F.zP)(T.M2)}getAccount(){throw(0,F.zP)(T.M2)}setIdTokenCredential(){throw(0,F.zP)(T.M2)}getIdTokenCredential(){throw(0,F.zP)(T.M2)}setAccessTokenCredential(){throw(0,F.zP)(T.M2)}getAccessTokenCredential(){throw(0,F.zP)(T.M2)}setRefreshTokenCredential(){throw(0,F.zP)(T.M2)}getRefreshTokenCredential(){throw(0,F.zP)(T.M2)}setAppMetadata(){throw(0,F.zP)(T.M2)}getAppMetadata(){throw(0,F.zP)(T.M2)}setServerTelemetry(){throw(0,F.zP)(T.M2)}getServerTelemetry(){throw(0,F.zP)(T.M2)}setAuthorityMetadata(){throw(0,F.zP)(T.M2)}getAuthorityMetadata(){throw(0,F.zP)(T.M2)}getAuthorityMetadataKeys(){throw(0,F.zP)(T.M2)}setThrottlingCache(){throw(0,F.zP)(T.M2)}getThrottlingCache(){throw(0,F.zP)(T.M2)}removeItem(){throw(0,F.zP)(T.M2)}containsKey(){throw(0,F.zP)(T.M2)}getKeys(){throw(0,F.zP)(T.M2)}getAccountKeys(){throw(0,F.zP)(T.M2)}getTokenKeys(){throw(0,F.zP)(T.M2)}clear(){return(0,_.Z)(function*(){throw(0,F.zP)(T.M2)})()}updateCredentialCacheKey(){throw(0,F.zP)(T.M2)}}},603:(Ae,te,A)=>{A.d(te,{r:()=>P});var _=A(500),m=A(758),R=A(140),O=A(63),F=A(132),H=A(841);class P{generateAccountId(){return[this.homeAccountId,this.environment].join(_.Bv.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return P.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,idTokenClaims:this.idTokenClaims,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType}}static generateAccountCacheKey(T){return[T.homeAccountId,T.environment||_.gT.EMPTY_STRING,T.tenantId||_.gT.EMPTY_STRING].join(_.Bv.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(T,N){const B=new P;B.authorityType=N.authorityType===O.a.Adfs?_.iR.ADFS_ACCOUNT_TYPE:N.protocolMode===F.A.AAD?_.iR.MSSTS_ACCOUNT_TYPE:_.iR.GENERIC_ACCOUNT_TYPE,B.clientInfo=T.clientInfo,B.homeAccountId=T.homeAccountId,B.nativeAccountId=T.nativeAccountId;const X=T.environment||N&&N.getPreferredCache();if(!X)throw(0,R.zP)(H.Q9);return B.environment=X,B.realm=T.idTokenClaims.tid||_.gT.EMPTY_STRING,B.localAccountId=T.idTokenClaims.oid||T.idTokenClaims.sub||_.gT.EMPTY_STRING,B.username=T.idTokenClaims.preferred_username||T.idTokenClaims.upn||(T.idTokenClaims.emails?T.idTokenClaims.emails[0]:null)||_.gT.EMPTY_STRING,B.name=T.idTokenClaims.name,B.cloudGraphHostName=T.cloudGraphHostName,B.msGraphHost=T.msGraphHost,B}static createFromAccountInfo(T,N,B){const X=new P;return X.authorityType=T.authorityType||_.iR.GENERIC_ACCOUNT_TYPE,X.homeAccountId=T.homeAccountId,X.localAccountId=T.localAccountId,X.nativeAccountId=T.nativeAccountId,X.realm=T.tenantId,X.environment=T.environment,X.username=T.username,X.name=T.name,X.cloudGraphHostName=N,X.msGraphHost=B,X}static generateHomeAccountId(T,N,B,X,w){const b=w?.sub?w.sub:_.gT.EMPTY_STRING;if(N===O.a.Adfs||N===O.a.Dsts)return b;if(T)try{const z=(0,m.B)(T,X);if(z.uid&&z.utid)return`${z.uid}${_.Bv.CLIENT_INFO_SEPARATOR}${z.utid}`}catch{}return B.verbose("No client info in response"),b}static isAccountEntity(T){return!!T&&T.hasOwnProperty("homeAccountId")&&T.hasOwnProperty("environment")&&T.hasOwnProperty("realm")&&T.hasOwnProperty("localAccountId")&&T.hasOwnProperty("username")&&T.hasOwnProperty("authorityType")}static accountInfoIsEqual(T,N,B){if(!T||!N)return!1;let X=!0;if(B){const w=T.idTokenClaims||{},b=N.idTokenClaims||{};X=w.iat===b.iat&&w.nonce===b.nonce}return T.homeAccountId===N.homeAccountId&&T.localAccountId===N.localAccountId&&T.username===N.username&&T.tenantId===N.tenantId&&T.environment===N.environment&&T.nativeAccountId===N.nativeAccountId&&X}}},703:(Ae,te,A)=>{A.d(te,{j6:()=>He,lh:()=>ie,z:()=>X});var _=A(861),m=A(214),R=A(630),O=A(500),F=A(667),H=A(286),P=A(723),y=A(132),T=A(140),N=A(841);const X={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1},w={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:R.i.Info,correlationId:O.gT.EMPTY_STRING},b={claimsBasedCachingEnabled:!1},z={sendGetRequestAsync:()=>(0,_.Z)(function*(){throw(0,T.zP)(N.M2)})(),sendPostRequestAsync:()=>(0,_.Z)(function*(){throw(0,T.zP)(N.M2)})()},Q={sku:O.gT.SKU,version:F.i,cpu:O.gT.EMPTY_STRING,os:O.gT.EMPTY_STRING},S={clientSecret:O.gT.EMPTY_STRING,clientAssertion:void 0},ne={azureCloudInstance:H.z.None,tenant:`${O.gT.DEFAULT_COMMON_TENANT}`},Z={application:{appName:"",appVersion:""}};function He({authOptions:Ie,systemOptions:ae,loggerOptions:K,cacheOptions:$,storageInterface:J,networkInterface:oe,cryptoInterface:Ce,clientCredentials:pe,libraryInfo:Pe,telemetry:Me,serverTelemetryManager:ve,persistencePlugin:qe,serializableCache:at}){const _t={...w,...K};return{authOptions:De(Ie),systemOptions:{...X,...ae},loggerOptions:_t,cacheOptions:{...b,...$},storageInterface:J||new P.w(Ie.clientId,m.d,new R.Y(_t)),networkInterface:oe||z,cryptoInterface:Ce||m.d,clientCredentials:pe||S,libraryInfo:{...Q,...Pe},telemetry:{...Z,...Me},serverTelemetryManager:ve||null,persistencePlugin:qe||null,serializableCache:at||null}}function De(Ie){return{clientCapabilities:[],azureCloudOptions:ne,skipAuthorityMetadataCache:!1,...Ie}}function ie(Ie){return Ie.authOptions.authority.options.protocolMode===y.A.OIDC}},214:(Ae,te,A)=>{A.d(te,{d:()=>O});var _=A(861),m=A(140),R=A(841);const O={createNewGuid:()=>{throw(0,m.zP)(R.M2)},base64Decode:()=>{throw(0,m.zP)(R.M2)},base64Encode:()=>{throw(0,m.zP)(R.M2)},getPublicKeyThumbprint:()=>(0,_.Z)(function*(){throw(0,m.zP)(R.M2)})(),removeTokenBindingKey:()=>(0,_.Z)(function*(){throw(0,m.zP)(R.M2)})(),clearKeystore:()=>(0,_.Z)(function*(){throw(0,m.zP)(R.M2)})(),signJwt:()=>(0,_.Z)(function*(){throw(0,m.zP)(R.M2)})(),hashString:()=>(0,_.Z)(function*(){throw(0,m.zP)(R.M2)})()}},481:(Ae,te,A)=>{A.d(te,{MD:()=>H,l4:()=>F});var _=A(500),m=A(12);const R={[m.g]:"Unexpected error in authentication.",[m.D]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class F extends Error{constructor(y,T,N){super(T?`${y}: ${T}`:y),Object.setPrototypeOf(this,F.prototype),this.errorCode=y||_.gT.EMPTY_STRING,this.errorMessage=T||_.gT.EMPTY_STRING,this.subError=N||_.gT.EMPTY_STRING,this.name="AuthError"}setCorrelationId(y){this.correlationId=y}}function H(P,y){return new F(P,y?`${R[P]} ${y}`:R[P])}},12:(Ae,te,A)=>{A.d(te,{D:()=>m,g:()=>_});const _="unexpected_error",m="post_request_failed"},140:(Ae,te,A)=>{A.d(te,{er:()=>F,zP:()=>H});var _=A(481),m=A(841);const R={[m.ZE]:"The client info could not be parsed/decoded correctly",[m.S7]:"The client info was empty",[m.GH]:"Token cannot be parsed",[m.PM]:"The token is null or empty",[m.HO]:"Endpoints cannot be resolved",[m.EF]:"Network request failed",[m.Ce]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[m.b4]:"The hash parameters could not be deserialized",[m.r8]:"State was not the expected format",[m.Tu]:"State mismatch error",[m.LV]:"State not found",[m.vR]:"Nonce mismatch error",[m.w7]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[m.Ao]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[m.MU]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[m.RH]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[m.EC]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[m.FU]:"Token request cannot be made without authorization code or refresh token.",[m.v1]:"Cannot remove null or empty scope from ScopeSet",[m.f4]:"Cannot append ScopeSet",[m.S]:"Empty input ScopeSet cannot be processed",[m.Jk]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[m.tS]:"Device code is expired.",[m.ZT]:"Device code stopped polling for unknown reasons.",[m.D7]:"Please pass an account object, silent flow is not supported without account information",[m.mj]:"Cache record object was null or undefined.",[m.Q9]:"Invalid environment when attempting to create cache entry",[m.cX]:"No account found in cache for given key.",[m.QL]:"No crypto object detected.",[m.cy]:"Unexpected credential type.",[m.aE]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[m.SX]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[m.s$]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[m.nQ]:"User defined timeout for device code polling reached",[m.P_]:"Cannot generate a POP jwt if the token_claims are not populated",[m.Zv]:"Server response does not contain an authorization code to proceed",[m.ol]:"Could not remove the credential's binding key from storage.",[m.ig]:"The provided authority does not support logout",[m.Of]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[m.Mq]:"No network connectivity. Check your internet connection.",[m.$R]:"User cancelled the flow.",[m.k7]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[m.M2]:"This method has not been implemented",[m.Ls]:"The nested app auth bridge is disabled"};class F extends _.l4{constructor(y,T){super(y,T?`${R[y]}: ${T}`:R[y]),this.name="ClientAuthError",Object.setPrototypeOf(this,F.prototype)}}function H(P,y){return new F(P,y)}},841:(Ae,te,A)=>{A.d(te,{$R:()=>Le,Ao:()=>b,Ce:()=>P,D7:()=>K,EC:()=>S,EF:()=>H,FU:()=>ne,GH:()=>R,HO:()=>F,Jk:()=>ie,LV:()=>B,Ls:()=>M,M2:()=>ue,MU:()=>z,Mq:()=>mt,Of:()=>Gt,PM:()=>O,P_:()=>at,Q9:()=>J,QL:()=>Ce,RH:()=>Q,S:()=>De,S7:()=>m,SX:()=>Me,Tu:()=>N,ZE:()=>_,ZT:()=>ae,Zv:()=>_t,aE:()=>Pe,b4:()=>y,cX:()=>oe,cy:()=>pe,f4:()=>He,ig:()=>Qe,k7:()=>Ve,mj:()=>$,nQ:()=>qe,ol:()=>rn,r8:()=>T,s$:()=>ve,tS:()=>Ie,v1:()=>Z,vR:()=>X,w7:()=>w});const _="client_info_decoding_error",m="client_info_empty_error",R="token_parsing_error",O="null_or_empty_token",F="endpoints_resolution_error",H="network_error",P="openid_config_error",y="hash_not_deserialized",T="invalid_state",N="state_mismatch",B="state_not_found",X="nonce_mismatch",w="auth_time_not_found",b="max_age_transpired",z="multiple_matching_tokens",Q="multiple_matching_accounts",S="multiple_matching_appMetadata",ne="request_cannot_be_made",Z="cannot_remove_empty_scope",He="cannot_append_scopeset",De="empty_input_scopeset",ie="device_code_polling_cancelled",Ie="device_code_expired",ae="device_code_unknown_error",K="no_account_in_silent_request",$="invalid_cache_record",J="invalid_cache_environment",oe="no_account_found",Ce="no_crypto_object",pe="unexpected_credential_type",Pe="invalid_assertion",Me="invalid_client_credential",ve="token_refresh_required",qe="user_timeout_reached",at="token_claims_cnf_required_for_signedjwt",_t="authorization_code_missing_from_server_response",rn="binding_key_not_removed",Qe="end_session_endpoint_not_supported",Gt="key_id_missing",mt="no_network_connectivity",Le="user_canceled",Ve="missing_tenant_id_error",ue="method_not_implemented",M="nested_app_auth_bridge_disabled"},680:(Ae,te,A)=>{A.d(te,{ei:()=>H});var _=A(481),m=A(299);const R={[m.RV]:"A redirect URI is required for all calls, and none has been set.",[m.LB]:"Could not parse the given claims request object.",[m.Oz]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[m.yH]:"URL could not be parsed into appropriate segments.",[m.To]:"URL was empty or null.",[m.vE]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[m.z_]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[m.nm]:"Given claims parameter must be a stringified JSON object.",[m.dL]:"Token request was empty and not found in cache.",[m.$h]:"The logout request was null or undefined.",[m.d6]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[m.TU]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[m.E]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[m.zx]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[m.o_]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[m.dK]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[m.hI]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[m.U9]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[m.i1]:"Invalid authentication header provided",[m.qz]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[m.Ol]:"Cannot set allowNativeBroker parameter to true when not in AAD protocol mode.",[m.Hv]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."};class F extends _.l4{constructor(y){super(y,R[y]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,F.prototype)}}function H(P){return new F(P)}},299:(Ae,te,A)=>{A.d(te,{$h:()=>N,E:()=>w,Hv:()=>ie,LB:()=>m,Ol:()=>De,Oz:()=>R,RV:()=>_,TU:()=>X,To:()=>F,U9:()=>ne,d6:()=>B,dK:()=>Q,dL:()=>T,hI:()=>S,i1:()=>Z,nm:()=>y,o_:()=>z,qz:()=>He,vE:()=>H,yH:()=>O,z_:()=>P,zx:()=>b});const _="redirect_uri_empty",m="claims_request_parsing_error",R="authority_uri_insecure",O="url_parse_error",F="empty_url_error",H="empty_input_scopes_error",P="invalid_prompt_value",y="invalid_claims",T="token_request_empty",N="logout_request_empty",B="invalid_code_challenge_method",X="pkce_params_missing",w="invalid_cloud_discovery_metadata",b="invalid_authority_metadata",z="untrusted_authority",Q="missing_ssh_jwk",S="missing_ssh_kid",ne="missing_nonce_authentication_header",Z="invalid_authentication_header",He="cannot_set_OIDCOptions",De="cannot_allow_native_broker",ie="authority_mismatch"},544:(Ae,te,A)=>{A.d(te,{Cf:()=>T,Yo:()=>y,ip:()=>N});var _=A(500),m=A(481),R=A(490);const O=[R.tZ,R.Mo,R.kk],F=["message_only","additional_action","basic_action","user_password_expired","consent_required"],H={[R.I2]:"No refresh token found in the cache. Please sign-in.",[R.QP]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API."};class y extends m.l4{constructor(X,w,b,z,Q,S,ne){super(X,w,b),Object.setPrototypeOf(this,y.prototype),this.timestamp=z||_.gT.EMPTY_STRING,this.traceId=Q||_.gT.EMPTY_STRING,this.correlationId=S||_.gT.EMPTY_STRING,this.claims=ne||_.gT.EMPTY_STRING,this.name="InteractionRequiredAuthError"}}function T(B,X,w){const b=!!B&&O.indexOf(B)>-1,z=!!w&&F.indexOf(w)>-1,Q=!!X&&O.some(S=>X.indexOf(S)>-1);return b||Q||z}function N(B){return new y(B,H[B])}},490:(Ae,te,A)=>{A.d(te,{I2:()=>_,Mo:()=>O,QP:()=>m,kk:()=>F,tZ:()=>R});const _="no_tokens_found",m="native_account_unavailable",R="interaction_required",O="consent_required",F="login_required"},498:(Ae,te,A)=>{A.d(te,{n:()=>m});var _=A(481);class m extends _.l4{constructor(O,F,H){super(O,F,H),this.name="ServerError",Object.setPrototypeOf(this,m.prototype)}}},630:(Ae,te,A)=>{A.d(te,{Y:()=>R,i:()=>m});var _=A(500),m=function(O){return O[O.Error=0]="Error",O[O.Warning=1]="Warning",O[O.Info=2]="Info",O[O.Verbose=3]="Verbose",O[O.Trace=4]="Trace",O}(m||{});class R{constructor(F,H,P){this.level=m.Info;const T=F||R.createDefaultLoggerOptions();this.localCallback=T.loggerCallback||(()=>{}),this.piiLoggingEnabled=T.piiLoggingEnabled||!1,this.level="number"==typeof T.logLevel?T.logLevel:m.Info,this.correlationId=T.correlationId||_.gT.EMPTY_STRING,this.packageName=H||_.gT.EMPTY_STRING,this.packageVersion=P||_.gT.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:m.Info}}clone(F,H,P){return new R({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:P||this.correlationId},F,H)}logMessage(F,H){if(H.logLevel>this.level||!this.piiLoggingEnabled&&H.containsPii)return;const T=`[${(new Date).toUTCString()}] : [${H.correlationId||this.correlationId||""}] : ${this.packageName}@${this.packageVersion} : ${m[H.logLevel]} - ${F}`;this.executeCallback(H.logLevel,T,H.containsPii||!1)}executeCallback(F,H,P){this.localCallback&&this.localCallback(F,H,P)}error(F,H){this.logMessage(F,{logLevel:m.Error,containsPii:!1,correlationId:H||_.gT.EMPTY_STRING})}errorPii(F,H){this.logMessage(F,{logLevel:m.Error,containsPii:!0,correlationId:H||_.gT.EMPTY_STRING})}warning(F,H){this.logMessage(F,{logLevel:m.Warning,containsPii:!1,correlationId:H||_.gT.EMPTY_STRING})}warningPii(F,H){this.logMessage(F,{logLevel:m.Warning,containsPii:!0,correlationId:H||_.gT.EMPTY_STRING})}info(F,H){this.logMessage(F,{logLevel:m.Info,containsPii:!1,correlationId:H||_.gT.EMPTY_STRING})}infoPii(F,H){this.logMessage(F,{logLevel:m.Info,containsPii:!0,correlationId:H||_.gT.EMPTY_STRING})}verbose(F,H){this.logMessage(F,{logLevel:m.Verbose,containsPii:!1,correlationId:H||_.gT.EMPTY_STRING})}verbosePii(F,H){this.logMessage(F,{logLevel:m.Verbose,containsPii:!0,correlationId:H||_.gT.EMPTY_STRING})}trace(F,H){this.logMessage(F,{logLevel:m.Trace,containsPii:!1,correlationId:H||_.gT.EMPTY_STRING})}tracePii(F,H){this.logMessage(F,{logLevel:m.Trace,containsPii:!0,correlationId:H||_.gT.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}},667:(Ae,te,A)=>{A.d(te,{i:()=>m,u:()=>_});const _="@azure/msal-common",m="14.2.0"},795:(Ae,te,A)=>{A.d(te,{i:()=>P});var _=A(680),m=A(92),R=A(140),O=A(500),F=A(299),H=A(841);class P{constructor(T){const N=T?m.x.trimArrayEntries([...T]):[],B=N?m.x.removeEmptyStringsFromArray(N):[];this.validateInputScopes(B),this.scopes=new Set,B.forEach(X=>this.scopes.add(X))}static fromString(T){const B=(T||O.gT.EMPTY_STRING).split(" ");return new P(B)}static createSearchScopes(T){const N=new P(T);return N.containsOnlyOIDCScopes()?N.removeScope(O.gT.OFFLINE_ACCESS_SCOPE):N.removeOIDCScopes(),N}validateInputScopes(T){if(!T||T.length<1)throw(0,_.ei)(F.vE)}containsScope(T){const N=this.printScopesLowerCase().split(" "),B=new P(N);return!!T&&B.scopes.has(T.toLowerCase())}containsScopeSet(T){return!(!T||T.scopes.size<=0)&&this.scopes.size>=T.scopes.size&&T.asArray().every(N=>this.containsScope(N))}containsOnlyOIDCScopes(){let T=0;return O.$f.forEach(N=>{this.containsScope(N)&&(T+=1)}),this.scopes.size===T}appendScope(T){T&&this.scopes.add(T.trim())}appendScopes(T){try{T.forEach(N=>this.appendScope(N))}catch{throw(0,R.zP)(H.f4)}}removeScope(T){if(!T)throw(0,R.zP)(H.v1);this.scopes.delete(T.trim())}removeOIDCScopes(){O.$f.forEach(T=>{this.scopes.delete(T)})}unionScopeSets(T){if(!T)throw(0,R.zP)(H.S);const N=new Set;return T.scopes.forEach(B=>N.add(B.toLowerCase())),this.scopes.forEach(B=>N.add(B.toLowerCase())),N}intersectingScopeSets(T){if(!T)throw(0,R.zP)(H.S);T.containsOnlyOIDCScopes()||T.removeOIDCScopes();const N=this.unionScopeSets(T),B=T.getScopeCount(),X=this.getScopeCount();return N.size<X+B}getScopeCount(){return this.scopes.size}asArray(){const T=[];return this.scopes.forEach(N=>T.push(N)),T}printScopes(){return this.scopes?this.asArray().join(" "):O.gT.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}},979:(Ae,te,A)=>{A.d(te,{$L:()=>m,Ak:()=>_});const _={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",StandardInteractionClientInitializeAuthorizationCodeRequest:"standardInteractionClientInitializeAuthorizationCodeRequest",GetAuthCodeUrl:"getAuthCodeUrl",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponseFromHash:"handleCodeResponseFromHash",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",AuthClientCreateQueryString:"authClientCreateQueryString",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromiseMeasurement",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues"},m={NotStarted:0,InProgress:1,Completed:2}},581:(Ae,te,A)=>{A.d(te,{G:()=>P});var _=A(680),m=A(140),R=A(92),O=A(500),F=A(299),H=A(841);class P{get urlString(){return this._urlString}constructor(T){if(this._urlString=T,!this._urlString)throw(0,_.ei)(F.To);this.getHash()||(this._urlString=P.canonicalizeUri(T))}static canonicalizeUri(T){if(T){let N=T.toLowerCase();return R.x.endsWith(N,"?")?N=N.slice(0,-1):R.x.endsWith(N,"?/")&&(N=N.slice(0,-2)),R.x.endsWith(N,"/")||(N+="/"),N}return T}validateAsUri(){let T;try{T=this.getUrlComponents()}catch{throw(0,_.ei)(F.yH)}if(!T.HostNameAndPort||!T.PathSegments)throw(0,_.ei)(F.yH);if(!T.Protocol||"https:"!==T.Protocol.toLowerCase())throw(0,_.ei)(F.Oz)}static appendQueryString(T,N){return N?T.indexOf("?")<0?`${T}?${N}`:`${T}&${N}`:T}static removeHashFromUrl(T){return P.canonicalizeUri(T.split("#")[0])}replaceTenantPath(T){const N=this.getUrlComponents(),B=N.PathSegments;return T&&0!==B.length&&(B[0]===O.Nb.COMMON||B[0]===O.Nb.ORGANIZATIONS)&&(B[0]=T),P.constructAuthorityUriFromObject(N)}getHash(){return P.parseHash(this.urlString)}getUrlComponents(){const T=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),N=this.urlString.match(T);if(!N)throw(0,_.ei)(F.yH);const B={Protocol:N[1],HostNameAndPort:N[4],AbsolutePath:N[5],QueryString:N[7]};let X=B.AbsolutePath.split("/");return X=X.filter(w=>w&&w.length>0),B.PathSegments=X,B.QueryString&&B.QueryString.endsWith("/")&&(B.QueryString=B.QueryString.substring(0,B.QueryString.length-1)),B}static getDomainFromUrl(T){const N=RegExp("^([^:/?#]+://)?([^/?#]*)"),B=T.match(N);if(!B)throw(0,_.ei)(F.yH);return B[2]}static getAbsoluteUrl(T,N){if(T[0]===O.gT.FORWARD_SLASH){const X=new P(N).getUrlComponents();return X.Protocol+"//"+X.HostNameAndPort+T}return T}static parseHash(T){const N=T.indexOf("#"),B=T.indexOf("#/");return B>-1?T.substring(B+2):N>-1?T.substring(N+1):O.gT.EMPTY_STRING}static parseQueryString(T){const N=T.indexOf("?"),B=T.indexOf("/?");return B>-1?T.substring(B+2):N>-1?T.substring(N+1):O.gT.EMPTY_STRING}static parseQueryServerResponse(T){const N=T.indexOf("?code"),B=T.indexOf("/?code"),X=T.indexOf("#");return B>-1&&X>-1?T.substring(B+2,X):B>-1?T.substring(B+2):N>-1&&X>-1?T.substring(N+1,X):N>-1?T.substring(N+1):O.gT.EMPTY_STRING}static constructAuthorityUriFromObject(T){return new P(T.Protocol+"//"+T.HostNameAndPort+"/"+T.PathSegments.join("/"))}static getDeserializedHash(T){if(!T)return{};const N=P.parseHash(T),B=R.x.queryStringToObject(N||T);if(!B)throw(0,m.zP)(H.b4);return B}static getDeserializedQueryString(T){if(!T)return{};const N=P.parseQueryString(T),B=R.x.queryStringToObject(N||T);if(!B)throw(0,m.zP)(H.b4);return B}static getDeserializedCodeResponse(T,N){const B=new P(N);let X;return X=T===O.rg.QUERY?P.getDeserializedQueryString(N):P.getDeserializedHash(B.getHash()),X}static hashContainsKnownProperties(T){if(!T||T.indexOf("=")<0)return!1;const N=P.getDeserializedHash(T);return!!(N.code||N.error_description||N.error||N.state)}}},500:(Ae,te,A)=>{A.d(te,{$f:()=>O,As:()=>T,Bv:()=>S,D1:()=>oe,Fo:()=>y,Ge:()=>Ce,HN:()=>K,L:()=>qe,LL:()=>Z,NJ:()=>N,Nb:()=>P,QU:()=>Ie,SZ:()=>F,To:()=>ve,VO:()=>B,VX:()=>X,Vi:()=>H,W:()=>Pe,YY:()=>pe,bb:()=>J,ch:()=>ie,d3:()=>ne,dg:()=>He,f_:()=>R,gT:()=>_,hO:()=>$,iR:()=>Q,ki:()=>Me,oj:()=>m,pQ:()=>ae,qJ:()=>z,rg:()=>w,sR:()=>De,vw:()=>b});const _={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",REGIONAL_AUTH_NON_MSI_QUERY_STRING:"allowestsrnonmsi=true",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},m={SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR_RANGE_START:400,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR_RANGE_START:500,SERVER_ERROR_RANGE_END:599},R=[_.OPENID_SCOPE,_.PROFILE_SCOPE,_.OFFLINE_ACCESS_SCOPE],O=[...R,_.EMAIL_SCOPE],F={CONTENT_TYPE:"Content-Type",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},H={ID_TOKEN:"idtoken",CLIENT_INFO:"client.info",ADAL_ID_TOKEN:"adal.idtoken",ERROR:"error",ERROR_DESC:"error.description",ACTIVE_ACCOUNT:"active-account",ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},P={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},y={CLIENT_ID:"client_id",REDIRECT_URI:"redirect_uri",RESPONSE_TYPE:"response_type",RESPONSE_MODE:"response_mode",GRANT_TYPE:"grant_type",CLAIMS:"claims",SCOPE:"scope",ERROR:"error",ERROR_DESCRIPTION:"error_description",ACCESS_TOKEN:"access_token",ID_TOKEN:"id_token",REFRESH_TOKEN:"refresh_token",EXPIRES_IN:"expires_in",STATE:"state",NONCE:"nonce",PROMPT:"prompt",SESSION_STATE:"session_state",CLIENT_INFO:"client_info",CODE:"code",CODE_CHALLENGE:"code_challenge",CODE_CHALLENGE_METHOD:"code_challenge_method",CODE_VERIFIER:"code_verifier",CLIENT_REQUEST_ID:"client-request-id",X_CLIENT_SKU:"x-client-SKU",X_CLIENT_VER:"x-client-VER",X_CLIENT_OS:"x-client-OS",X_CLIENT_CPU:"x-client-CPU",X_CLIENT_CURR_TELEM:"x-client-current-telemetry",X_CLIENT_LAST_TELEM:"x-client-last-telemetry",X_MS_LIB_CAPABILITY:"x-ms-lib-capability",X_APP_NAME:"x-app-name",X_APP_VER:"x-app-ver",POST_LOGOUT_URI:"post_logout_redirect_uri",ID_TOKEN_HINT:"id_token_hint",DEVICE_CODE:"device_code",CLIENT_SECRET:"client_secret",CLIENT_ASSERTION:"client_assertion",CLIENT_ASSERTION_TYPE:"client_assertion_type",TOKEN_TYPE:"token_type",REQ_CNF:"req_cnf",OBO_ASSERTION:"assertion",REQUESTED_TOKEN_USE:"requested_token_use",ON_BEHALF_OF:"on_behalf_of",FOCI:"foci",CCS_HEADER:"X-AnchorMailbox",RETURN_SPA_CODE:"return_spa_code",NATIVE_BROKER:"nativebroker",LOGOUT_HINT:"logout_hint"},T={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},N={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},B={ACCOUNT:"account",SID:"sid",LOGIN_HINT:"login_hint",ID_TOKEN:"id_token",DOMAIN_HINT:"domain_hint",ORGANIZATIONS:"organizations",CONSUMERS:"consumers",ACCOUNT_ID:"accountIdentifier",HOMEACCOUNT_ID:"homeAccountIdentifier"},X={PLAIN:"plain",S256:"S256"},w={QUERY:"query",FRAGMENT:"fragment"},b={...w,FORM_POST:"form_post"},z={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},Q={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},S={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},ne={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},Z={ADFS:1001,MSA:1002,MSSTS:1003,GENERIC:1004,ACCESS_TOKEN:2001,REFRESH_TOKEN:2002,ID_TOKEN:2003,APP_METADATA:3001,UNDEFINED:9999},He="appmetadata",De="client_info",ie="1",Ie={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:86400},ae={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},K={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},$={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},J={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},oe={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},Ce={username:"username",password:"password"},pe={httpSuccess:200,httpBadRequest:400},Pe={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},Me={CONFIGURED_MATCHES_DETECTED:"1",CONFIGURED_NO_AUTO_DETECTION:"2",CONFIGURED_NOT_DETECTED:"3",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},ve={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},qe={Jwt:"JWT",Jwk:"JWK",Pop:"pop"}},92:(Ae,te,A)=>{A.d(te,{x:()=>_});class _{static isEmptyObj(R){if(R)try{const O=JSON.parse(R);return 0===Object.keys(O).length}catch{}return!0}static startsWith(R,O){return 0===R.indexOf(O)}static endsWith(R,O){return R.length>=O.length&&R.lastIndexOf(O)===R.length-O.length}static queryStringToObject(R){const O={},F=R.split("&"),H=P=>decodeURIComponent(P.replace(/\+/g," "));return F.forEach(P=>{if(P.trim()){const[y,T]=P.split(/=(.+)/g,2);y&&T&&(O[H(y)]=H(T))}}),O}static trimArrayEntries(R){return R.map(O=>O.trim())}static removeEmptyStringsFromArray(R){return R.filter(O=>!!O)}static jsonParseHelper(R){try{return JSON.parse(R)}catch{return null}}static matchPattern(R,O){return new RegExp(R.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(O)}}},441:(Ae,te,A)=>{A.d(te,{I:()=>_});class _{static nowSeconds(){return Math.round((new Date).getTime()/1e3)}static isTokenExpired(R,O){const F=Number(R)||0;return _.nowSeconds()+O>F}static wasClockTurnedBack(R){return Number(R)>_.nowSeconds()}static delay(R,O){return new Promise(F=>setTimeout(()=>F(O),R))}}},861:(Ae,te,A)=>{function _(R,O,F,H,P,y,T){try{var N=R[y](T),B=N.value}catch(X){return void F(X)}N.done?O(B):Promise.resolve(B).then(H,P)}function m(R){return function(){var O=this,F=arguments;return new Promise(function(H,P){var y=R.apply(O,F);function T(B){_(y,H,P,T,N,"next",B)}function N(B){_(y,H,P,T,N,"throw",B)}T(void 0)})}}A.d(te,{Z:()=>m})}},Ae=>{Ae(Ae.s=513)}]);